{"version":3,"file":"/js/gallery.js","mappings":"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","sources":["webpack:///./resources/assets/js/gallery.js"],"sourcesContent":["var loader, gallery, search;\nvar fileDrop, fileProgress, fileUploadField, fileError;\n\n$(document).ready(function() {\n    initGallery();\n    initUploader();\n    registerEvents();\n});\n\nfunction initGallery() {\n    loader = $('#gallery-loader');\n    gallery = $('#gallery-images');\n    search = $('#gallery-search');\n\n\n    fileDrop = $('.uploader');\n    fileProgress = $('.progress');\n    fileUploadField = $('#file-upload');\n    fileError = $('.gallery-error');\n\n    search.on('blur', function(e) {\n        e.preventDefault();\n        initSearch();\n    }).bind('keydown', function(e) {\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            initSearch();\n        }\n    });\n}\n\n/**\n *\n */\nfunction initSearch() {\n    gallery.hide();\n    loader.show();\n\n    $.ajax({\n        url: search.data('url') + '?q=' + search.val()\n    }).done(function(data) {\n        loader.hide();\n        gallery.html(data).show();\n        registerEvents();\n    });\n}\n\n/**\n *\n */\nfunction initUploader() {\n\n    fileDrop.unbind('drop dragover').bind('drop dragover', function(e) {\n        e.preventDefault();\n        fileProgress.show();\n    });\n\n    $('.file-upload-form').fileupload({\n        dropZone: fileDrop,\n        dataType: 'json',\n        add: function (e, data) {\n            fileError.hide();\n            data.submit();\n        },\n        progressall: function (e, data) {\n            var progress = parseInt(data.loaded / data.total * 100, 10);\n            fileProgress.show();\n            $('.progress .progress-bar').css(\n                'width',\n                progress + '%'\n            );\n        },\n        done: function (e, data) {\n            fileProgress.hide();\n\n            if (data.result.success) {\n                gallery.prepend(data.result.html);\n\n                registerEvents();\n            }\n        },\n        fail: function(e, data) {\n            fileProgress.hide();\n\n            if (data.jqXHR.responseJSON) {\n                fileError.text(buildErrors(data.jqXHR.responseJSON.errors)).fadeToggle();\n            }\n\n            registerEvents();\n        }\n    });\n}\n\n\n/**\n *\n * @param data\n * @returns {string}\n */\nfunction buildErrors(data) {\n    var errors = '';\n    for (var key in data) {\n        // skip loop if the property is from prototype\n        if (!data.hasOwnProperty(key)) continue;\n\n        for (var e in data[key]) {\n            errors += data[key][e] + \"\\n\";\n        }\n\n    }\n    return errors;\n}\n\nfunction registerEvents() {\n    $('#gallery-images li')\n        .unbind('click')\n        .on('click', function () {\n            let folder = $(this).data('folder');\n            if (folder) {\n                window.location = folder;\n                return;\n            }\n\n            $.ajax({\n                url: $(this).data('url')\n            }).done(function(data) {\n                $('#large-modal-content').html(data);\n                $('#large-modal').modal('show');\n            });\n    });\n}\n"],"names":["loader","gallery","search","fileDrop","fileProgress","fileUploadField","fileError","$","document","ready","initGallery","initUploader","registerEvents","on","e","preventDefault","initSearch","bind","key","hide","show","ajax","url","data","val","done","html","unbind","fileupload","dropZone","dataType","add","submit","progressall","progress","parseInt","loaded","total","css","result","success","prepend","fail","jqXHR","responseJSON","text","buildErrors","errors","fadeToggle","hasOwnProperty","folder","window","location","modal"],"sourceRoot":""}