{"version":3,"file":"/js/gallery.js","mappings":"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","sources":["webpack:///./resources/assets/js/gallery.js"],"sourcesContent":["var loader, gallery, search;\nvar fileDrop, fileProgress, fileUploadField, fileError;\n\n$(document).ready(function() {\n    initGallery();\n    initUploader();\n    registerEvents();\n});\n\nfunction initGallery() {\n    loader = $('#gallery-loader');\n    gallery = $('#gallery-images');\n    search = $('#gallery-search');\n\n\n    fileDrop = $('.uploader');\n    fileProgress = $('.progress');\n    fileUploadField = $('#file-upload');\n    fileError = $('.gallery-error');\n\n    search.on('blur', function(e) {\n        e.preventDefault();\n        initSearch();\n    }).bind('keydown', function(e) {\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            initSearch();\n        }\n    });\n}\n\n/**\n *\n */\nfunction initSearch() {\n    gallery.hide();\n    loader.show();\n\n    $.ajax({\n        url: search.data('url') + '?q=' + search.val()\n    }).done(function(data) {\n        loader.hide();\n        gallery.html(data).show();\n        registerEvents();\n    });\n}\n\n/**\n *\n */\nfunction initUploader() {\n\n    fileDrop.unbind('drop dragover').bind('drop dragover', function(e) {\n        e.preventDefault();\n        fileProgress.show();\n    });\n\n    $('.file-upload-form').fileupload({\n        dropZone: fileDrop,\n        dataType: 'json',\n        add: function (e, data) {\n            fileError.hide();\n            data.submit();\n        },\n        progressall: function (e, data) {\n            var progress = parseInt(data.loaded / data.total * 100, 10);\n            fileProgress.show();\n            $('.progress .progress-bar').css(\n                'width',\n                progress + '%'\n            );\n        },\n        done: function (e, data) {\n            fileProgress.hide();\n\n            if (data.result.success) {\n                gallery.prepend(data.result.html);\n\n                registerEvents();\n            }\n        },\n        fail: function(e, data) {\n            fileProgress.hide();\n\n            if (data.jqXHR.responseJSON) {\n                fileError.text(buildErrors(data.jqXHR.responseJSON.errors)).fadeToggle();\n            }\n\n            registerEvents();\n        }\n    });\n}\n\n\n/**\n *\n * @param data\n * @returns {string}\n */\nfunction buildErrors(data) {\n    var errors = '';\n    for (var key in data) {\n        // skip loop if the property is from prototype\n        if (!data.hasOwnProperty(key)) continue;\n\n        for (var e in data[key]) {\n            errors += data[key][e] + \"\\n\";\n        }\n\n    }\n    return errors;\n}\n\nfunction registerEvents() {\n    $('#gallery-images li')\n        .unbind('click')\n        .on('click', function () {\n            let folder = $(this).data('folder');\n            if (folder) {\n                window.location = folder;\n                return;\n            }\n\n            $.ajax({\n                url: $(this).data('url')\n            }).done(function(data) {\n                $('#large-modal-content').html(data);\n                $('#large-modal').modal('show');\n            });\n    });\n}\n"],"names":["loader","gallery","search","fileDrop","fileProgress","fileUploadField","fileError","$","document","ready","initGallery","initUploader","registerEvents","on","e","preventDefault","initSearch","bind","key","hide","show","ajax","url","data","val","done","html","unbind","fileupload","dropZone","dataType","add","submit","progressall","progress","parseInt","loaded","total","css","result","success","prepend","fail","jqXHR","responseJSON","text","buildErrors","errors","fadeToggle","hasOwnProperty","folder","window","location","modal"],"sourceRoot":""}