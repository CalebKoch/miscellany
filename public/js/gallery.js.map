{"version":3,"file":"/js/gallery.js","mappings":"MAAA,IAAIA,EAAQC,EAASC,EACjBC,EAAUC,EAA+BC,EAiC7C,SAASC,IACLL,EAAQM,OACRP,EAAOQ,OAEPC,EAAEC,KAAK,CACHC,IAAKT,EAAOU,KAAK,OAAS,MAAQV,EAAOW,QAC1CC,MAAK,SAASF,GACbZ,EAAOO,OACPN,EAAQc,KAAKH,GAAMJ,OACnBQ,GACH,GACJ,CAoED,SAASA,IACLP,EAAE,sBACGQ,OAAO,SACPC,GAAG,SAAS,WACT,IAAIC,EAASV,EAAEW,MAAMR,KAAK,UACtBO,EACAE,OAAOC,SAAWH,EAItBV,EAAEC,KAAK,CACHC,IAAKF,EAAEW,MAAMR,KAAK,SACnBE,MAAK,SAASF,GACbH,EAAE,wBAAwBM,KAAKH,GAC/BH,EAAE,gBAAgBc,MAAM,OAC3B,GACR,GACJ,CA/HDd,EAAEe,UAAUC,OAAM,WAOdzB,EAASS,EAAE,mBACXR,EAAUQ,EAAE,mBACZP,EAASO,EAAE,mBAGXN,EAAWM,EAAE,aACbL,EAAeK,EAAE,aACCA,EAAE,gBACpBJ,EAAYI,EAAE,kBAEdP,EAAOgB,GAAG,QAAQ,SAASQ,GACvBA,EAAEC,iBACFrB,GACH,IAAEsB,KAAK,WAAW,SAASF,GACV,UAAVA,EAAEG,MACFH,EAAEC,iBACFrB,IAEP,IAwBDH,EAASc,OAAO,iBAAiBW,KAAK,iBAAiB,SAASF,GAC5DA,EAAEC,iBACFvB,EAAaI,MAChB,IAEDC,EAAE,qBAAqBqB,WAAW,CAC9BC,SAAU5B,EACV6B,SAAU,OACVC,IAAK,SAAUP,EAAGd,GACdP,EAAUE,OACVK,EAAKsB,QACR,EACDC,YAAa,SAAUT,EAAGd,GACtB,IAAIwB,EAAWC,SAASzB,EAAK0B,OAAS1B,EAAK2B,MAAQ,IAAK,IACxDnC,EAAaI,OACbC,EAAE,2BAA2B+B,IACzB,QACAJ,EAAW,IAElB,EACDtB,KAAM,SAAUY,EAAGd,GACfR,EAAaG,OAETK,EAAK6B,OAAOC,UACZzC,EAAQ0C,QAAQ/B,EAAK6B,OAAO1B,MAE5BC,IAEP,EACD4B,KAAM,SAASlB,EAAGd,GACdR,EAAaG,OAETK,EAAKiC,MAAMC,cACXzC,EAAU0C,KAc1B,SAAqBnC,GACjB,IAAIoC,EAAS,GACb,IAAK,IAAInB,KAAOjB,EAEZ,GAAKA,EAAKqC,eAAepB,GAEzB,IAAK,IAAIH,KAAKd,EAAKiB,GACfmB,GAAUpC,EAAKiB,GAAKH,GAAK,KAIjC,OAAOsB,CACV,CA1B8BE,CAAYtC,EAAKiC,MAAMC,aAAaE,SAASG,aAGhEnC,GACH,IAnFLA,GACH,G","sources":["webpack:///./resources/assets/js/gallery.js"],"sourcesContent":["var loader, gallery, search;\nvar fileDrop, fileProgress, fileUploadField, fileError;\n\n$(document).ready(function() {\n    initGallery();\n    initUploader();\n    registerEvents();\n});\n\nfunction initGallery() {\n    loader = $('#gallery-loader');\n    gallery = $('#gallery-images');\n    search = $('#gallery-search');\n\n\n    fileDrop = $('.uploader');\n    fileProgress = $('.progress');\n    fileUploadField = $('#file-upload');\n    fileError = $('.gallery-error');\n\n    search.on('blur', function(e) {\n        e.preventDefault();\n        initSearch();\n    }).bind('keydown', function(e) {\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            initSearch();\n        }\n    });\n}\n\n/**\n *\n */\nfunction initSearch() {\n    gallery.hide();\n    loader.show();\n\n    $.ajax({\n        url: search.data('url') + '?q=' + search.val()\n    }).done(function(data) {\n        loader.hide();\n        gallery.html(data).show();\n        registerEvents();\n    });\n}\n\n/**\n *\n */\nfunction initUploader() {\n\n    fileDrop.unbind('drop dragover').bind('drop dragover', function(e) {\n        e.preventDefault();\n        fileProgress.show();\n    });\n\n    $('.file-upload-form').fileupload({\n        dropZone: fileDrop,\n        dataType: 'json',\n        add: function (e, data) {\n            fileError.hide();\n            data.submit();\n        },\n        progressall: function (e, data) {\n            var progress = parseInt(data.loaded / data.total * 100, 10);\n            fileProgress.show();\n            $('.progress .progress-bar').css(\n                'width',\n                progress + '%'\n            );\n        },\n        done: function (e, data) {\n            fileProgress.hide();\n\n            if (data.result.success) {\n                gallery.prepend(data.result.html);\n\n                registerEvents();\n            }\n        },\n        fail: function(e, data) {\n            fileProgress.hide();\n\n            if (data.jqXHR.responseJSON) {\n                fileError.text(buildErrors(data.jqXHR.responseJSON.errors)).fadeToggle();\n            }\n\n            registerEvents();\n        }\n    });\n}\n\n\n/**\n *\n * @param data\n * @returns {string}\n */\nfunction buildErrors(data) {\n    var errors = '';\n    for (var key in data) {\n        // skip loop if the property is from prototype\n        if (!data.hasOwnProperty(key)) continue;\n\n        for (var e in data[key]) {\n            errors += data[key][e] + \"\\n\";\n        }\n\n    }\n    return errors;\n}\n\nfunction registerEvents() {\n    $('#gallery-images li')\n        .unbind('click')\n        .on('click', function () {\n            let folder = $(this).data('folder');\n            if (folder) {\n                window.location = folder;\n                return;\n            }\n\n            $.ajax({\n                url: $(this).data('url')\n            }).done(function(data) {\n                $('#large-modal-content').html(data);\n                $('#large-modal').modal('show');\n            });\n    });\n}\n"],"names":["loader","gallery","search","fileDrop","fileProgress","fileError","initSearch","hide","show","$","ajax","url","data","val","done","html","registerEvents","unbind","on","folder","this","window","location","modal","document","ready","e","preventDefault","bind","key","fileupload","dropZone","dataType","add","submit","progressall","progress","parseInt","loaded","total","css","result","success","prepend","fail","jqXHR","responseJSON","text","errors","hasOwnProperty","buildErrors","fadeToggle"],"sourceRoot":""}