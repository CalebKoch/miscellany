{"version":3,"file":"/js/location/map-v3.js","mappings":";;;;;;;;;;;;;;AAAe,SAASA,aAAaA,CAAA,EAAG;EACpC;EACAC,CAAC,CAACC,IAAI,CAACD,CAAC,CAAC,iBAAiB,CAAC,EAAE,YAAY;IACrCA,CAAC,CAAC,IAAI,CAAC,CAACE,KAAK,CAAC,UAAUC,CAAC,EAAE;MACvB,IAAIC,IAAI,GAAGJ,CAAC,CAAC,IAAI,CAAC,CAACK,IAAI,CAAC,MAAM,CAAC;MAC/B,IAAIC,MAAM,GAAGN,CAAC,CAAC,IAAI,CAAC,CAACK,IAAI,CAAC,eAAe,CAAC;MAC1C,IAAIE,WAAW,GAAGP,CAAC,CAAC,IAAI,CAAC,CAACK,IAAI,CAAC,QAAQ,CAAC;MAExCL,CAAC,CAACO,WAAW,CAAC,CAACC,IAAI,CAAC,cAAc,CAAC,CAACC,IAAI,CAACL,IAAI,CAAC;MAE9C,IAAIJ,CAAC,CAAC,IAAI,CAAC,CAACK,IAAI,CAAC,UAAU,CAAC,EAAE;QAC1BL,CAAC,CAAC,wBAAwB,CAAC,CAACU,IAAI,EAAE;MACtC,CAAC,MAAM;QACHV,CAAC,CAAC,wBAAwB,CAAC,CAACW,IAAI,EAAE;MACtC;MAEA,IAAIX,CAAC,CAAC,IAAI,CAAC,CAACK,IAAI,CAAC,aAAa,CAAC,EAAE;QAC7BL,CAAC,CAACO,WAAW,CAAC,CAACC,IAAI,CAAC,YAAY,CAAC,CAACG,IAAI,EAAE;QACxCX,CAAC,CAACO,WAAW,CAAC,CAACC,IAAI,CAAC,cAAc,CAAC,CAACE,IAAI,EAAE;MAC9C,CAAC,MAAM;QACHV,CAAC,CAACO,WAAW,CAAC,CAACC,IAAI,CAAC,cAAc,CAAC,CAACG,IAAI,EAAE;QAC1CX,CAAC,CAACO,WAAW,CAAC,CAACC,IAAI,CAAC,YAAY,CAAC,CAACE,IAAI,EAAE;MAC5C;MAEA,IAAIJ,MAAM,EAAE;QACRN,CAAC,CAAC,wBAAwB,CAAC,CAACK,IAAI,CAAC,QAAQ,EAAEC,MAAM,CAAC;MACtD;IACJ,CAAC,CAAC;EACN,CAAC,CAAC;;EAGF;EACAN,CAAC,CAACC,IAAI,CAACD,CAAC,CAAC,wBAAwB,CAAC,EAAE,UAAUY,KAAK,EAAE;IACjDZ,CAAC,CAAC,IAAI,CAAC,CAACa,MAAM,CAAC,OAAO,CAAC;IACvBb,CAAC,CAAC,IAAI,CAAC,CAACE,KAAK,CAAC,UAAUC,CAAC,EAAE;MACvB,IAAIG,MAAM,GAAGN,CAAC,CAAC,IAAI,CAAC,CAACK,IAAI,CAAC,QAAQ,CAAC;MACnC;MACA,IAAIC,MAAM,EAAE;QACRN,CAAC,CAAC,GAAG,GAAGM,MAAM,GAAG,8BAA8B,CAAC,CAACQ,GAAG,CAChDd,CAAC,CAAC,iCAAiC,CAAC,CAACe,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAC9D;QACD;QACAf,CAAC,CAAC,GAAG,GAAGM,MAAM,CAAC,CAACU,MAAM,EAAE;MAC5B,CAAC,MAAM;QACHhB,CAAC,CAAC,sBAAsB,CAAC,CAACgB,MAAM,EAAE;MACtC;IACJ,CAAC,CAAC;EACN,CAAC,CAAC;AACN;;;;;;UChDA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;ACNyD;;AAEzD;AACA;;AAEA,IAAIC,WAAW;AACf,IAAIC,UAAU,EAAEC,aAAa;AAC7B,IAAIC,WAAW,EAAEC,kBAAkB,EAAEC,gBAAgB;;AAErD;AACA,IAAIC,mBAAmB;AACvB,IAAIC,mBAAmB,EAAEC,mBAAmB,EAAEC,oBAAoB,EAAEC,aAAa,EAAEC,cAAc;AAEjG5B,CAAC,CAAC6B,QAAQ,CAAC,CAACC,KAAK,CAAC,YAAW;EAEzBC,MAAM,CAACC,GAAG,CAACC,cAAc,EAAE;EAC3B;;EAEAF,MAAM,CAACC,GAAG,CAACE,EAAE,CAAC,WAAW,EAAE,UAAUC,EAAE,EAAE;IACrCpC,sEAAa,EAAE;EACnB,CAAC,CAAC;;EAEF;;EAEAC,CAAC,CAAC,uBAAuB,CAAC,CAACE,KAAK,CAAC,UAAUC,CAAC,EAAE;IAC1CH,CAAC,CAAC,wBAAwB,CAAC,CAACc,GAAG,CAAC,CAAC,CAAC;IAClCd,CAAC,CAAC,uBAAuB,CAAC,CAACU,IAAI,EAAE;IACjC0B,cAAc,EAAE;EACpB,CAAC,CAAC;EACFpC,CAAC,CAAC,yBAAyB,CAAC,CAACE,KAAK,CAAC,UAAUC,CAAC,EAAE;IAC5CH,CAAC,CAAC,wBAAwB,CAAC,CAACc,GAAG,CAAC,CAAC,CAAC;IAClCd,CAAC,CAAC,uBAAuB,CAAC,CAACW,IAAI,EAAE;IACjCyB,cAAc,EAAE;EACpB,CAAC,CAAC;EACFpC,CAAC,CAAC,0BAA0B,CAAC,CAACE,KAAK,CAAC,UAAUC,CAAC,EAAE;IAC7CH,CAAC,CAAC,wBAAwB,CAAC,CAACc,GAAG,CAAC,CAAC,CAAC;IAClCd,CAAC,CAAC,uBAAuB,CAAC,CAACU,IAAI,EAAE;IACjC0B,cAAc,EAAE;EACpB,CAAC,CAAC;EACFpC,CAAC,CAAC,wBAAwB,CAAC,CAACE,KAAK,CAAC,UAAUC,CAAC,EAAE;IAC3CH,CAAC,CAAC,wBAAwB,CAAC,CAACc,GAAG,CAAC,CAAC,CAAC;IAClCd,CAAC,CAAC,uBAAuB,CAAC,CAACU,IAAI,EAAE;IACjC0B,cAAc,EAAE;EACpB,CAAC,CAAC;EACFpC,CAAC,CAAC,oBAAoB,CAAC,CAACE,KAAK,CAAC,UAAUC,CAAC,EAAE;IACvCkC,WAAW,CAACrC,CAAC,CAAC,IAAI,CAAC,CAACK,IAAI,CAAC,SAAS,CAAC,CAAC;EACxC,CAAC,CAAC;EACFL,CAAC,CAAC,yBAAyB,CAAC,CAACE,KAAK,CAAC,UAAUC,CAAC,EAAE;IAC5C4B,MAAM,CAACC,GAAG,CAACC,cAAc,EAAE;EAC/B,CAAC,CAAC;EAEFK,cAAc,EAAE;EAChBC,YAAY,EAAE;EACdC,iBAAiB,EAAE;EACnBC,kBAAkB,EAAE;EACpBC,aAAa,EAAE;AACnB,CAAC,CAAC;;AAEF;AACA;AACA;AACA,SAASJ,cAAcA,CAAA,EACvB;EACI;EACArB,WAAW,GAAGjB,CAAC,CAAC,WAAW,CAAC;EAC5B,IAAIiB,WAAW,CAAC0B,MAAM,KAAK,CAAC,EAAE;IAC1B;IACA;EACJ;EACAzB,UAAU,GAAGlB,CAAC,CAAC,cAAc,CAAC;EAC9BmB,aAAa,GAAGnB,CAAC,CAAC,iBAAiB,CAAC;EACpCoB,WAAW,GAAGpB,CAAC,CAAC,mBAAmB,CAAC;EACpCsB,gBAAgB,GAAGtB,CAAC,CAAC,yBAAyB,CAAC;EAC/CqB,kBAAkB,GAAGrB,CAAC,CAAC,2BAA2B,CAAC;EAEnD+B,MAAM,CAACa,aAAa,GAAG,UAASC,GAAG,EAAE;IACjCC,WAAW,EAAE;IACb,IAAIf,MAAM,CAACgB,aAAa,CAACC,OAAO,EAAE;MAC9BH,GAAG,GAAGA,GAAG,GAAG,WAAW;IAC3B;IACA7C,CAAC,CAACiD,IAAI,CAAC;MACHJ,GAAG,EAAEA,GAAG;MACRK,IAAI,EAAE,KAAK;MACXC,KAAK,EAAE,IAAI;MACXC,OAAO,EAAE,SAAAA,QAAUC,MAAM,EAAE;QACvB,IAAIA,MAAM,EAAE;UACR,IAAItB,MAAM,CAACgB,aAAa,CAACC,OAAO,EAAE;YAC9B1B,gBAAgB,CAACgC,IAAI,CAACD,MAAM,CAACjD,IAAI,CAAC;YAClCiB,kBAAkB,CAACb,IAAI,CAAC,UAAU,CAAC,CAAC8C,IAAI,CAACD,MAAM,CAACE,IAAI,CAAC,CAAC7C,IAAI,EAAE;YAC5DW,kBAAkB,CAACb,IAAI,CAAC,UAAU,CAAC,CAACG,IAAI,EAAE;UAC9C,CAAC,MAAM;YACHQ,aAAa,CAACmC,IAAI,CAACD,MAAM,CAACE,IAAI,CAAC,CAAC7C,IAAI,EAAE,CACjC8C,MAAM,EAAE,CAAChD,IAAI,CAAC,UAAU,CAAC,CAACG,IAAI,EAAE;YAErC8C,iBAAiB,EAAE;YACnBxC,WAAW,CAACyC,QAAQ,CAAC,cAAc,CAAC;UACxC;UACA3D,sEAAa,EAAE;QACnB;MACJ;IACJ,CAAC,CAAC;EACN,CAAC;EAED4D,UAAU,EAAE;AAChB;;AAEA;AACA;AACA;AACA;AACA,SAASpB,YAAYA,CAAA,EACrB;EACIvC,CAAC,CAAC,wBAAwB,CAAC,CAAC4D,MAAM,CAAC,UAAUzD,CAAC,EAAE;IAC5C,IAAI,IAAI,CAAC0D,KAAK,IAAI,CAAC,EAAE;MACjB7D,CAAC,CAAC,2BAA2B,CAAC,CAACW,IAAI,EAAE;MACrCX,CAAC,CAAC,2BAA2B,CAAC,CAACU,IAAI,EAAE;IACzC,CAAC,MAAM;MACHV,CAAC,CAAC,2BAA2B,CAAC,CAACW,IAAI,EAAE;MACrCX,CAAC,CAAC,2BAA2B,CAAC,CAACU,IAAI,EAAE;IACzC;EACJ,CAAC,CAAC;;EAEF;EACA,IAAIoD,UAAU,GAAG9D,CAAC,CAAC,kBAAkB,CAAC;EACtC,IAAIA,CAAC,CAAC,cAAc,CAAC,CAAC2C,MAAM,KAAK,CAAC,IAAI3C,CAAC,CAAC,uBAAuB,CAAC,CAAC2C,MAAM,KAAK,CAAC,EAAE;IAC3E;IACA;EACJ;EAEAmB,UAAU,CAACjD,MAAM,CAAC,QAAQ,CAAC,CAACqB,EAAE,CAAC,QAAQ,EAAE,YAAW;IAChDH,MAAM,CAACgC,2BAA2B,GAAG,KAAK;EAC9C,CAAC,CAAC;EAGFJ,UAAU,EAAE;AAChB;AAEA,SAASb,WAAWA,CAAA,EACpB;EACI;EACA,IAAIf,MAAM,CAACgB,aAAa,CAACC,OAAO,EAAE;IAC9B3B,kBAAkB,CAACb,IAAI,CAAC,UAAU,CAAC,CAACE,IAAI,EAAE;IAC1CW,kBAAkB,CAACb,IAAI,CAAC,UAAU,CAAC,CAACG,IAAI,EAAE;IAC1CS,WAAW,CAAC4C,KAAK,CAAC,QAAQ,CAAC;IAC3B;EACJ;;EAEA;EACA/C,WAAW,CAACgD,WAAW,CAAC,kBAAkB,CAAC,CAACP,QAAQ,CAAC,cAAc,CAAC;EACpExC,UAAU,CAACP,IAAI,EAAE;EACjBQ,aAAa,CAACmC,IAAI,CAAC,EAAE,CAAC,CAAC5C,IAAI,EAAE;EAC7BS,aAAa,CAACqC,MAAM,EAAE,CAAChD,IAAI,CAAC,UAAU,CAAC,CAACE,IAAI,EAAE;EAC9CwD,sBAAsB,EAAE;AAC5B;AAEA,SAAST,iBAAiBA,CAAA,EAC1B;EACIzD,CAAC,CAAC,eAAe,CAAC,CAACE,KAAK,CAAC,UAAUiC,EAAE,EAAE;IACnChB,aAAa,CAACR,IAAI,EAAE;IACpBO,UAAU,CAACR,IAAI,EAAE;EACrB,CAAC,CAAC;AACN;AAEA,SAASiD,UAAUA,CAAA,EACnB;EACI3D,CAAC,CAAC,oBAAoB,CAAC,CAACE,KAAK,CAAC,UAAUiC,EAAE,EAAE;IACxCA,EAAE,CAACgC,cAAc,EAAE;IACnBpC,MAAM,CAACC,GAAG,CAACoC,KAAK,CAACC,CAAC,CAACC,MAAM,CAACtE,CAAC,CAAC,IAAI,CAAC,CAACK,IAAI,CAAC,KAAK,CAAC,EAAEL,CAAC,CAAC,IAAI,CAAC,CAACK,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;IACpE0B,MAAM,CAAC/B,CAAC,CAAC,IAAI,CAAC,CAACK,IAAI,CAAC,IAAI,CAAC,CAAC,CAACkE,SAAS,EAAE;EAC1C,CAAC,CAAC;EAEFvE,CAAC,CAAC,kBAAkB,CAAC,CAACE,KAAK,CAAC,YAAY;IACpCgE,sBAAsB,EAAE;EAC5B,CAAC,CAAC;AACN;AACA,SAASA,sBAAsBA,CAAA,EAAG;EAC9BM,UAAU,CAAC,YAAM;IACb;IACAzC,MAAM,CAACC,GAAG,CAACC,cAAc,EAAE;EAC/B,CAAC,EAAE,GAAG,CAAC;AACX;AACA,SAASO,iBAAiBA,CAAA,EAAG;EACzBxC,CAAC,CAAC,yBAAyB,CAAC,CAACE,KAAK,CAAC,UAAUC,CAAC,EAAE;IAC5CA,CAAC,CAACgE,cAAc,EAAE;IAClBnE,CAAC,CAAC,IAAI,CAAC,CAACwD,MAAM,EAAE,CAAC7C,IAAI,EAAE;IACvBX,CAAC,CAAC,yBAAyB,CAAC,CAACU,IAAI,EAAE;EACvC,CAAC,CAAC;AACN;;AAEA;AACA;AACA;AACA,SAASgC,aAAaA,CAAA,EAAG;EACrB1C,CAAC,CAAC,kBAAkB,CAAC,CAACE,KAAK,CAAC,UAAUC,CAAC,EAAE;IACrCA,CAAC,CAACgE,cAAc,EAAE;IAClBpC,MAAM,CAAC0C,eAAe,GAAG,IAAI;IAC7BzE,CAAC,CAAC,MAAM,CAAC,CAAC0D,QAAQ,CAAC,eAAe,CAAC;EACvC,CAAC,CAAC;EACF1D,CAAC,CAAC,mBAAmB,CAAC,CAACE,KAAK,CAAC,UAAUC,CAAC,EAAE;IACtCA,CAAC,CAACgE,cAAc,EAAE;IAClBpC,MAAM,CAAC0C,eAAe,GAAG,KAAK;IAC9BzE,CAAC,CAAC,MAAM,CAAC,CAACiE,WAAW,CAAC,eAAe,CAAC;EAC1C,CAAC,CAAC;EACFjE,CAAC,CAAC,mBAAmB,CAAC,CAACE,KAAK,CAAC,UAAUC,CAAC,EAAE;IACtCA,CAAC,CAACgE,cAAc,EAAE;IAClBpC,MAAM,CAAC2C,cAAc,GAAG,KAAK;IAC7B1E,CAAC,CAAC,MAAM,CAAC,CAACiE,WAAW,CAAC,kBAAkB,CAAC;IACzCjE,CAAC,CAAC,eAAe,CAAC,CAACgE,KAAK,CAAC,MAAM,CAAC;EACpC,CAAC,CAAC;AAGN;AAEA,SAASvB,kBAAkBA,CAAA,EAAG;EAE1BzC,CAAC,CAAC,wBAAwB,CAAC,CAACkC,EAAE,CAAC,OAAO,EAAE,UAAU/B,CAAC,EAAE;IACjDA,CAAC,CAACgE,cAAc,EAAE;IAClBpC,MAAM,CAAC2C,cAAc,GAAG,IAAI;IAC5B3C,MAAM,CAAC4C,SAAS,CAAC3E,CAAC,CAAC,IAAI,CAAC,CAACK,IAAI,CAAC,OAAO,CAAC,CAAC;IACvCL,CAAC,CAAC,MAAM,CAAC,CAAC0D,QAAQ,CAAC,kBAAkB,CAAC;IACtC1D,CAAC,CAAC,eAAe,CAAC,CAACgE,KAAK,CAAC,MAAM,CAAC;EACpC,CAAC,CAAC;EAEFzC,mBAAmB,GAAGvB,CAAC,CAAC,gBAAgB,CAAC;EACzCuB,mBAAmB,CAACrB,KAAK,CAAC,UAAUC,CAAC,EAAE;IACnCA,CAAC,CAACgE,cAAc,EAAE;IAClB,IAAIpC,MAAM,CAAC6C,OAAO,EAAE;MAChB7C,MAAM,CAACC,GAAG,CAAC6C,WAAW,CAAC9C,MAAM,CAAC6C,OAAO,CAAC;IAC1C;IACA5E,CAAC,CAAC,+BAA+B,CAAC,CAACc,GAAG,CAAC,EAAE,CAAC;IAC1CS,mBAAmB,CAACZ,IAAI,EAAE;EAC9B,CAAC,CAAC;AACN;AAEAoB,MAAM,CAAC+C,kBAAkB,GAAG,UAASC,GAAG,EAAEC,GAAG,EAAE;EAC3C,IAAIC,KAAK,GAAGjF,CAAC,CAAC,+BAA+B,CAAC;EAC9C,IAAIkF,OAAO,GAAGD,KAAK,CAACnE,GAAG,EAAE;EACzB,IAAIoE,OAAO,CAACvC,MAAM,GAAG,CAAC,EAAE;IACpBuC,OAAO,IAAI,GAAG;EAClB;EACAD,KAAK,CAACnE,GAAG,CAACoE,OAAO,GAAGH,GAAG,GAAG,GAAG,GAAGC,GAAG,CAAC;;EAEpC;EACA,IAAIG,MAAM,GAAGF,KAAK,CAACnE,GAAG,EAAE;EACxB,IAAIsE,MAAM,GAAGD,MAAM,CAACE,IAAI,CAAC,GAAG,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC;EACxC,IAAIC,UAAU,GAAG,EAAE;EAEnBH,MAAM,CAACI,OAAO,CAAC,UAACC,KAAK,EAAK;IACtB,IAAIC,QAAQ,GAAGD,KAAK,CAACH,KAAK,CAAC,GAAG,CAAC;IAC/BC,UAAU,CAACI,IAAI,CAAC,CAACD,QAAQ,CAAC,CAAC,CAAC,EAAEA,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;EAC/C,CAAC,EAAEH,UAAU,CAAC;;EAEd;EACA,IAAIxD,MAAM,CAAC6C,OAAO,EAAE;IAChB7C,MAAM,CAACC,GAAG,CAAC6C,WAAW,CAAC9C,MAAM,CAAC6C,OAAO,CAAC;EAC1C;;EAEA;EACAgB,eAAe,EAAE;EAEjB7D,MAAM,CAAC6C,OAAO,GAAGP,CAAC,CAACO,OAAO,CAACW,UAAU,EAAE;IACnCM,MAAM,EAAErE,mBAAmB;IAC3BsE,KAAK,EAAErE,mBAAmB;IAC1BsE,OAAO,EAAErE,oBAAoB;IAC7BsE,SAAS,EAAErE,aAAa;IACxBsE,WAAW,EAAErE,cAAc;IAC3BsE,OAAO,EAAE,OAAO;IAChBC,QAAQ,EAAE;EACd,CAAC,CAAC;EACFpE,MAAM,CAAC6C,OAAO,CAACwB,KAAK,CAACrE,MAAM,CAACC,GAAG,CAAC;EAChCT,mBAAmB,CAACb,IAAI,EAAE;AAC9B,CAAC;AAED,SAASkF,eAAeA,CAAA,EAAG;EACvBnE,mBAAmB,GAAGzB,CAAC,CAAC,qCAAqC,CAAC,CAACc,GAAG,EAAE;EACpE,IAAI,CAACW,mBAAmB,IAAIA,mBAAmB,CAACkB,MAAM,GAAG,CAAC,EAAE;IACxDlB,mBAAmB,GAAG,KAAK;EAC/B;EAEAC,oBAAoB,GAAG1B,CAAC,CAAC,6CAA6C,CAAC,CAACc,GAAG,EAAE;EAC7E,IAAIuF,KAAK,CAAC3E,oBAAoB,CAAC,IAAI,CAACA,oBAAoB,EAAE;IACtDA,oBAAoB,GAAG,CAAC;EAC5B,CAAC,MAAM;IACHA,oBAAoB,GAAGA,oBAAoB,GAAG,GAAG;EACrD;EAEAC,aAAa,GAAG3B,CAAC,CAAC,sBAAsB,CAAC,CAACc,GAAG,EAAE;EAC/C,IAAI,CAACa,aAAa,IAAIA,aAAa,CAACgB,MAAM,GAAG,CAAC,EAAE;IAC5ChB,aAAa,GAAG,KAAK;EACzB;EAEAC,cAAc,GAAG5B,CAAC,CAAC,uBAAuB,CAAC,CAACc,GAAG,EAAE;EACjD,IAAIuF,KAAK,CAACzE,cAAc,CAAC,EAAE;IACvBA,cAAc,GAAG,GAAG;EACxB,CAAC,MAAM;IACHA,cAAc,GAAGA,cAAc,GAAG,GAAG;EACzC;EAEAJ,mBAAmB,GAAGxB,CAAC,CAAC,2CAA2C,CAAC,CAACc,GAAG,EAAE;EAC1E,IAAIuF,KAAK,CAAC7E,mBAAmB,CAAC,IAAI,CAACA,mBAAmB,EAAE;IACpDA,mBAAmB,GAAG,CAAC;EAC3B;AACJ;AAEA,SAASY,cAAcA,CAAA,EAAG;EACtBpC,CAAC,CAAC,qBAAqB,CAAC,CAACU,IAAI,EAAE;EAC/BV,CAAC,CAAC,gBAAgB,CAAC,CAACU,IAAI,EAAE;AAC9B;AAEA,SAAS2B,WAAWA,CAACQ,GAAG,EAAE;EACtB7C,CAAC,CAAC,qBAAqB,CAAC,CAACW,IAAI,EAAE;EAC/BX,CAAC,CAAC,gBAAgB,CAAC,CAACW,IAAI,EAAE;;EAE1B;EACA,IAAIX,CAAC,CAAC,iCAAiC,CAAC,CAAC2C,MAAM,KAAK,CAAC,EAAE;IACnD;EACJ;EAEA2D,OAAO,CAACC,GAAG,CAAC,WAAW,EAAE1D,GAAG,CAAC;EAC7B7C,CAAC,CAACiD,IAAI,CAAC;IACHJ,GAAG,EAAEA;EACT,CAAC,CAAC,CAAC2D,IAAI,CAAC,UAAUnG,IAAI,EAAE;IACpBL,CAAC,CAAC,qBAAqB,CAAC,CAACsD,IAAI,CAACjD,IAAI,CAAC;IACnCoG,iBAAiB,EAAE;EACvB,CAAC,CAAC;AACN;AAEA,SAASA,iBAAiBA,CAAA,EAAG;EACzBzG,CAAC,CAAC,aAAa,CAAC,CAACkC,EAAE,CAAC,OAAO,EAAE,UAAU/B,CAAC,EAAE;IACtCA,CAAC,CAACgE,cAAc,EAAE;IAElB,IAAItB,GAAG,GAAG7C,CAAC,CAAC,IAAI,CAAC,CAACK,IAAI,CAAC,KAAK,CAAC;IAC7BL,CAAC,CAAC,IAAI,CAAC,CAACQ,IAAI,CAAC,UAAU,CAAC,CAACE,IAAI,EAAE;IAE/BV,CAAC,CAACiD,IAAI,CAAC;MACHJ,GAAG,EAAEA,GAAG;MACR6D,OAAO,EAAE;IACb,CAAC,CAAC,CAACF,IAAI,CAAC,UAAUnD,MAAM,EAAE;MACtB;MACArD,CAAC,CAAC,IAAI,CAAC,CAACQ,IAAI,CAAC,UAAU,CAAC,CAACG,IAAI,EAAE;MAE/BgG,MAAM,CAACC,IAAI,CAACvD,MAAM,CAACwD,MAAM,CAAC,CAACrB,OAAO,CAAC,UAAAsB,GAAG,EAAI;QACtC,IAAIhG,GAAG,GAAGuC,MAAM,CAACwD,MAAM,CAACC,GAAG,CAAC;QAE5B,IAAIC,KAAK,GAAG/G,CAAC,CAAC,SAAS,GAAG8G,GAAG,GAAG,IAAI,CAAC;QACrC,IAAIC,KAAK,CAACpE,MAAM,KAAK,CAAC,EAAE;UACpB2D,OAAO,CAACU,IAAI,CAAC,cAAc,EAAE,eAAe,EAAEF,GAAG,CAAC;UAClD;QACJ;QACA,IAAIA,GAAG,CAACG,QAAQ,CAAC,QAAQ,CAAC,EAAE;UACxBF,KAAK,CAACG,QAAQ,CAAC,KAAK,EAAEpG,GAAG,CAAC;QAC9B,CAAC,MAAM;UACHiG,KAAK,CAACjG,GAAG,CAACA,GAAG,CAAC;QAClB;MACJ,CAAC,CAAC;MACFd,CAAC,CAAC,uBAAuB,CAAC,CAACE,KAAK,EAAE;IACtC,CAAC,CAAC;EACN,CAAC,CAAC;AACN,C","sources":["webpack:///./resources/assets/js/components/delete-confirm.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./resources/assets/js/location/map-v3.js"],"sourcesContent":["export default function deleteConfirm() {\n    // Delete confirm dialog\n    $.each($('.delete-confirm'), function () {\n        $(this).click(function (e) {\n            let name = $(this).data('name');\n            let target = $(this).data('delete-target');\n            let targetModal = $(this).data('target');\n\n            $(targetModal).find('.target-name').text(name);\n\n            if ($(this).data('mirrored')) {\n                $('#delete-confirm-mirror').show();\n            } else {\n                $('#delete-confirm-mirror').hide();\n            }\n\n            if ($(this).data('recoverable')) {\n                $(targetModal).find('.permanent').hide();\n                $(targetModal).find('.recoverable').show();\n            } else {\n                $(targetModal).find('.recoverable').hide();\n                $(targetModal).find('.permanent').show();\n            }\n\n            if (target) {\n                $('.delete-confirm-submit').data('target', target);\n            }\n        });\n    });\n\n\n    // Submit modal form\n    $.each($('.delete-confirm-submit'), function (index) {\n        $(this).unbind('click');\n        $(this).click(function (e) {\n            var target = $(this).data('target');\n            //console.log('Submit delete confirmation', target);\n            if (target) {\n                $('#' + target + ' input[name=remove_mirrored]').val(\n                    $('#delete-confirm-mirror-checkbox').is(':checked') ? 1 : 0\n                );\n                //console.log('target', target, $('#' + target));\n                $('#' + target).submit();\n            } else {\n                $('#delete-confirm-form').submit();\n            }\n        })\n    });\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import deleteConfirm from \"../components/delete-confirm\";\n\n//require ('leaflet.markercluster/dist/leaflet.markercluster');\n//require ('leaflet.markercluster.layersupport');\n\nvar mapPageBody;\nvar sidebarMap, sidebarMarker;\nvar markerModal, markerModalContent, markerModalTitle;\n\n// Polygon layout style\nvar eraseTempPolygonBtn;\nvar polygonStrokeWeight, polygonStrokeColour, polygonStrokeOpacity, polygonColour, polygonOpacity;\n\n$(document).ready(function() {\n\n    window.map.invalidateSize();\n    //deleteConfirm();\n\n    window.map.on('popupopen', function (ev) {\n        deleteConfirm();\n    });\n\n    // Event fired when clicking on an existing map point\n\n    $('a[href=\"#marker-pin\"]').click(function (e) {\n        $('input[name=\"shape_id\"]').val(1);\n        $('#map-marker-bg-colour').show();\n        showMainFields();\n    });\n    $('a[href=\"#marker-label\"]').click(function (e) {\n        $('input[name=\"shape_id\"]').val(2);\n        $('#map-marker-bg-colour').hide();\n        showMainFields();\n    });\n    $('a[href=\"#marker-circle\"]').click(function (e) {\n        $('input[name=\"shape_id\"]').val(3);\n        $('#map-marker-bg-colour').show();\n        showMainFields();\n    });\n    $('a[href=\"#marker-poly\"]').click(function (e) {\n        $('input[name=\"shape_id\"]').val(5);\n        $('#map-marker-bg-colour').show();\n        showMainFields();\n    });\n    $('a[href=\"#presets\"]').click(function (e) {\n        loadPresets($(this).data('presets'));\n    });\n    $('a[href=\"#form-markers\"]').click(function (e) {\n        window.map.invalidateSize();\n    });\n\n    initMapExplore();\n    initMapForms();\n    initMapEntryClick();\n    initPolygonDrawing();\n    registerModes();\n});\n\n/**\n *\n */\nfunction initMapExplore()\n{\n    //console.log('initMapExplore', '');\n    mapPageBody = $('#map-body');\n    if (mapPageBody.length === 0) {\n        //console.log('initMapExplore', 'no explore mode');\n        return;\n    }\n    sidebarMap = $('#sidebar-map');\n    sidebarMarker = $('#sidebar-marker');\n    markerModal = $('#map-marker-modal');\n    markerModalTitle = $('#map-marker-modal-title');\n    markerModalContent = $('#map-marker-modal-content');\n\n    window.markerDetails = function(url) {\n        showSidebar();\n        if (window.kankaIsMobile.matches) {\n            url = url + '?mobile=1';\n        }\n        $.ajax({\n            url: url,\n            type: 'GET',\n            async: true,\n            success: function (result) {\n                if (result) {\n                    if (window.kankaIsMobile.matches) {\n                        markerModalTitle.html(result.name);\n                        markerModalContent.find('.content').html(result.body).show();\n                        markerModalContent.find('.spinner').hide();\n                    } else {\n                        sidebarMarker.html(result.body).show()\n                            .parent().find('.spinner').hide();\n\n                        handleCloseMarker();\n                        mapPageBody.addClass('sidebar-open');\n                    }\n                    deleteConfirm();\n                }\n            }\n        });\n    };\n\n    initLegend();\n}\n\n/**\n * When submitting the layer or marker form from the map modal, disable the map form unsaved changed\n * alert.\n */\nfunction initMapForms()\n{\n    $('select[name=\"size_id\"]').change(function (e) {\n        if (this.value == 6) {\n            $('.map-marker-circle-helper').hide();\n            $('.map-marker-circle-radius').show();\n        } else {\n            $('.map-marker-circle-radius').hide();\n            $('.map-marker-circle-helper').show();\n        }\n    });\n\n    //console.info('mapsv3', 'initMapForms');\n    let markerForm = $('#map-marker-form');\n    if ($('#entity-form').length === 0 && $('.map-marker-edit-form').length === 0) {\n        //console.info('initMapForms empty');\n        return;\n    }\n\n    markerForm.unbind('submit').on('submit', function() {\n        window.entityFormHasUnsavedChanges = false;\n    });\n\n\n    initLegend();\n}\n\nfunction showSidebar()\n{\n    // On mobile use the modal instead of the sidebar\n    if (window.kankaIsMobile.matches) {\n        markerModalContent.find('.spinner').show();\n        markerModalContent.find('.content').hide();\n        markerModal.modal('toggle');\n        return;\n    }\n\n    //window.map.invalidateSize();\n    mapPageBody.removeClass('sidebar-collapse').addClass('sidebar-open');\n    sidebarMap.hide();\n    sidebarMarker.html('').show();\n    sidebarMarker.parent().find('.spinner').show();\n    invalidateMapOnSidebar();\n}\n\nfunction handleCloseMarker()\n{\n    $('.marker-close').click(function (ev) {\n        sidebarMarker.hide();\n        sidebarMap.show();\n    });\n}\n\nfunction initLegend()\n{\n    $('.map-legend-marker').click(function (ev) {\n        ev.preventDefault();\n        window.map.panTo(L.latLng($(this).data('lat'), $(this).data('lng')));\n        window[$(this).data('id')].openPopup();\n    });\n\n    $('a.sidebar-toggle').click(function () {\n        invalidateMapOnSidebar();\n    });\n}\nfunction invalidateMapOnSidebar() {\n    setTimeout(() => {\n        // Invalidate the map size when the sidebar is rendered/hidden\n        window.map.invalidateSize();\n    }, 500);\n}\nfunction initMapEntryClick() {\n    $('.map-marker-entry-click').click(function (e) {\n        e.preventDefault();\n        $(this).parent().hide();\n        $('.map-marker-entry-entry').show();\n    });\n}\n\n/**\n * Register switching in and out of edit mode\n */\nfunction registerModes() {\n    $('.btn-mode-enable').click(function (e) {\n        e.preventDefault();\n        window.exploreEditMode = true;\n        $('body').addClass('map-edit-mode');\n    });\n    $('.btn-mode-disable').click(function (e) {\n        e.preventDefault();\n        window.exploreEditMode = false;\n        $('body').removeClass('map-edit-mode');\n    });\n    $('.btn-mode-drawing').click(function (e) {\n        e.preventDefault();\n        window.drawingPolygon = false;\n        $('body').removeClass('map-drawing-mode');\n        $('#marker-modal').modal('show');\n    });\n\n\n}\n\nfunction initPolygonDrawing() {\n\n    $('#start-drawing-polygon').on('click', function (e) {\n        e.preventDefault();\n        window.drawingPolygon = true;\n        window.showToast($(this).data('toast'));\n        $('body').addClass('map-drawing-mode');\n        $('#marker-modal').modal('hide');\n    });\n\n    eraseTempPolygonBtn = $('#reset-polygon');\n    eraseTempPolygonBtn.click(function (e) {\n        e.preventDefault();\n        if (window.polygon) {\n            window.map.removeLayer(window.polygon);\n        }\n        $('textarea[name=\"custom_shape\"]').val('');\n        eraseTempPolygonBtn.hide();\n    });\n}\n\nwindow.addPolygonPosition = function(lat, lng) {\n    let shape = $('textarea[name=\"custom_shape\"]');\n    let current = shape.val();\n    if (current.length > 0) {\n        current += ' ';\n    }\n    shape.val(current + lat + ',' + lng);\n\n    // Redraw the polygon\n    let coords = shape.val();\n    let blocks = coords.trim(\" \").split(\" \");\n    let coordsData = [];\n\n    blocks.forEach((block) => {\n        let segments = block.split(',');\n        coordsData.push([segments[0], segments[1]]);\n    }, coordsData);\n\n    // Remove previous polygon if it was already drawn\n    if (window.polygon) {\n        window.map.removeLayer(window.polygon);\n    }\n\n    // Background colour as defined by the user if they are so far?\n    getPolygonStyle();\n\n    window.polygon = L.polygon(coordsData, {\n        weight: polygonStrokeWeight,\n        color: polygonStrokeColour,\n        opacity: polygonStrokeOpacity,\n        fillColor: polygonColour,\n        fillOpacity: polygonOpacity,\n        linecap: 'round',\n        linejoin: 'round',\n    });\n    window.polygon.addTo(window.map);\n    eraseTempPolygonBtn.show();\n}\n\nfunction getPolygonStyle() {\n    polygonStrokeColour = $('input[name=\"polygon_style[stroke]\"]').val();\n    if (!polygonStrokeColour || polygonStrokeColour.length < 7) {\n        polygonStrokeColour = 'red';\n    }\n\n    polygonStrokeOpacity = $('input[name=\"polygon_style[stroke-opacity]\"]').val();\n    if (isNaN(polygonStrokeOpacity) || !polygonStrokeOpacity) {\n        polygonStrokeOpacity = 1;\n    } else {\n        polygonStrokeOpacity = polygonStrokeOpacity / 100;\n    }\n\n    polygonColour = $('input[name=\"colour\"]').val();\n    if (!polygonColour || polygonColour.length < 7) {\n        polygonColour = 'red';\n    }\n\n    polygonOpacity = $('input[name=\"opacity\"]').val();\n    if (isNaN(polygonOpacity)) {\n        polygonOpacity = 0.5;\n    } else {\n        polygonOpacity = polygonOpacity / 100;\n    }\n\n    polygonStrokeWeight = $('input[name=\"polygon_style[stroke-width]\"]').val();\n    if (isNaN(polygonStrokeWeight) || !polygonStrokeWeight) {\n        polygonStrokeWeight = 1;\n    }\n}\n\nfunction showMainFields() {\n    $('#marker-main-fields').show();\n    $('#marker-footer').show();\n}\n\nfunction loadPresets(url) {\n    $('#marker-main-fields').hide();\n    $('#marker-footer').hide();\n\n    // If presets have already been loaded, skip loading/rendering of the list\n    if ($('.marker-preset-list .fa-spinner').length === 0) {\n        return;\n    }\n\n    console.log('load from', url);\n    $.ajax({\n        url: url\n    }).done(function (data) {\n        $('.marker-preset-list').html(data);\n        handlePresetClick();\n    });\n}\n\nfunction handlePresetClick() {\n    $('.preset-use').on('click', function (e) {\n        e.preventDefault();\n\n        let url = $(this).data('url');\n        $(this).find('.fa-spin').show();\n\n        $.ajax({\n            url: url,\n            context: this,\n        }).done(function (result) {\n            // Switch stuff around\n            $(this).find('.fa-spin').hide();\n\n            Object.keys(result.preset).forEach(key => {\n                let val = result.preset[key];\n\n                let field = $('[name=\"' + key + '\"]');\n                if (field.length === 0) {\n                    console.info('markerPreset', 'unknown field', key);\n                    return;\n                }\n                if (key.endsWith('colour')) {\n                    field.spectrum(\"set\", val);\n                } else {\n                    field.val(val);\n                }\n            });\n            $('a[href=\"#marker-pin\"]').click();\n        });\n    });\n}\n"],"names":["deleteConfirm","$","each","click","e","name","data","target","targetModal","find","text","show","hide","index","unbind","val","is","submit","mapPageBody","sidebarMap","sidebarMarker","markerModal","markerModalContent","markerModalTitle","eraseTempPolygonBtn","polygonStrokeWeight","polygonStrokeColour","polygonStrokeOpacity","polygonColour","polygonOpacity","document","ready","window","map","invalidateSize","on","ev","showMainFields","loadPresets","initMapExplore","initMapForms","initMapEntryClick","initPolygonDrawing","registerModes","length","markerDetails","url","showSidebar","kankaIsMobile","matches","ajax","type","async","success","result","html","body","parent","handleCloseMarker","addClass","initLegend","change","value","markerForm","entityFormHasUnsavedChanges","modal","removeClass","invalidateMapOnSidebar","preventDefault","panTo","L","latLng","openPopup","setTimeout","exploreEditMode","drawingPolygon","showToast","polygon","removeLayer","addPolygonPosition","lat","lng","shape","current","coords","blocks","trim","split","coordsData","forEach","block","segments","push","getPolygonStyle","weight","color","opacity","fillColor","fillOpacity","linecap","linejoin","addTo","isNaN","console","log","done","handlePresetClick","context","Object","keys","preset","key","field","info","endsWith","spectrum"],"sourceRoot":""}