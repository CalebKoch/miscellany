(()=>{var e,r,o,n,a,l;function t(){r.hide(),e.show(),$.ajax({url:o.data("url")+"?q="+o.val()}).done((function(o){e.hide(),r.html(o).show(),d()}))}function d(){$("#gallery-images li").unbind("click").on("click",(function(){var e=$(this).data("folder");e?window.location=e:$.ajax({url:$(this).data("url")}).done((function(e){$("#large-modal-content").html(e),$("#large-modal").modal("show")}))}))}$(document).ready((function(){e=$("#gallery-loader"),r=$("#gallery-images"),o=$("#gallery-search"),n=$(".uploader"),a=$(".progress"),$("#file-upload"),l=$(".gallery-error"),o.on("blur",(function(e){e.preventDefault(),t()})).bind("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),t())})),n.unbind("drop dragover").bind("drop dragover",(function(e){e.preventDefault(),a.show()})),$(".file-upload-form").fileupload({dropZone:n,dataType:"json",add:function(e,r){l.hide(),r.submit()},progressall:function(e,r){var o=parseInt(r.loaded/r.total*100,10);a.show(),$(".progress .progress-bar").css("width",o+"%")},done:function(e,o){a.hide(),o.result.success&&(r.prepend(o.result.html),d())},fail:function(e,r){a.hide(),r.jqXHR.responseJSON&&l.text(function(e){var r="";for(var o in e)if(e.hasOwnProperty(o))for(var n in e[o])r+=e[o][n]+"\n";return r}(r.jqXHR.responseJSON.errors)).fadeToggle(),d()}}),d()}))})();
//# sourceMappingURL=gallery.js.map