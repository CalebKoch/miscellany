const l=document.getElementById("dialog-backdrop");let c;const a=()=>{document.querySelectorAll('[data-toggle="dialog"]').forEach(e=>{e.addEventListener("click",d)}),document.querySelectorAll('[data-toggle="dialog-ajax"]').forEach(e=>{e.addEventListener("click",d)})},u=new Event("dialog.loaded");function d(e){e.preventDefault();let t=this.dataset.target;if(!t)return;let o=this.dataset.url,n=this.dataset.focus;s(t,o,n)}const s=(e,t,o)=>{e=document.getElementById(e),e.removeAttribute("open"),e.show(),l.classList.remove("hidden"),e.dataset.dismissible!=="false"&&l.addEventListener("click",function(n){e.close()}),e.addEventListener("click",function(n){let i=e.getBoundingClientRect();!(i.top<=n.clientY&&n.clientY<=i.top+i.height&&i.left<=n.clientX&&n.clientX<=i.left+i.width)&&n.target.tagName==="DIALOG"&&e.close()}),e.addEventListener("close",function(n){l.classList.add("hidden")}),t?f(t,e):o&&document.querySelector(o).focus()},f=(e,t)=>{c?t.innerHTML=c:c=t.innerHTML,fetch(e,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(o=>o.text()).then(o=>{t.innerHTML=o,t.show(),typeof $=="function"?($(document).trigger("shown.bs.modal"),$(".btn-manage-perm").click(function(n){n.preventDefault(),t.close();let i=$(this).data("target");$(i).click()})):document.dispatchEvent(u)})},r=e=>{document.getElementById(e).close()};window.initDialogs=a;window.openDialog=s;window.closeDialog=r;
