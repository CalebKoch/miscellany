import{d as le}from"./delete-confirm-fec6aa52.js";import{d as Oe}from"./mention-5d95822d.js";import{a as _e}from"./ajax-modal-1230002e.js";import{S as ve}from"./sortable.esm-be94e56d.js";import{_ as x,c as r,a,t as c,o as l,n as M,w as Ae,b as h,F as v,r as y,d as w,e as g,f as D,g as q,h as Y,i as He,v as Ke,j as Ne,k as be,l as Be}from"./_plugin-vue_export-helper-de6cf830.js";import{m as Re}from"./mitt-f7ef348c.js";import{v as we}from"./v-click-outside.umd-d5c5f7b0.js";import"./_commonjsHelpers-725317a4.js";$(document).ready(function(){window.initTags=function(){$.each($(".form-tags"),function(){let e=$(this).data("dropdown-parent");$(this).hasClass("select2-hidden-accessible")||$(this).select2({tags:$(this).data("allow-new"),allowClear:$(this).data("allow-clear"),dropdownParent:e||"",minimumInputLength:0,ajax:{quietMillis:500,delay:500,url:$(this).data("url"),dataType:"json",data:function(t){return{q:$.trim(t.term)}},processResults:function(t){return{results:t}},cache:!0},createTag:function(t){var i=$.trim(t.term);return i===""?null:{id:i,text:i,newTag:!0}},templateSelection:function(t,i){if(t.newTag)return $('<span class="new-tag" title="'+$("#tags").data("new-tag")+'">'+t.text+' <i class="fa-solid fa-plus-circle"></i></span>');let s=$(t.element);return t.colour?$(i).addClass(t.colour):s.data("colour")&&$(i).addClass(s.data("colour")),t.text}})})},window.initTags()});$(document).ready(function(){window.initForeignSelect=function(){$("select.select2").length!==0&&($.each($("select.select2"),function(e){if($(this).hasClass("select2-hidden-accessible"))return;let t=$(this).data("allow-clear"),i=$(this).data("dropdown-parent");$(this).select2({tags:!1,placeholder:$(this).data("placeholder"),allowClear:t||!0,language:$(this).data("language"),minimumInputLength:0,dropdownParent:i||"",width:"100%",ajax:{delay:500,quietMillis:500,url:$(this).data("url"),dataType:"json",data:function(s){return{q:$.trim(s.term)}},processResults:function(s){return{results:s}},error:function(s){return console.log("error",s),s.status===503&&window.showToast(s.responseJSON.message,"toast-error"),{results:[]}},cache:!0},templateResult:function(s){var n="";return s.image?n=$("<span><img src='"+s.image+"' width='24' height='24' class='rounded-full'/> "+s.text+"</span>"):n=$("<span>"+s.text+"</span>"),n},createTag:function(s){return null}})}),$("select.select2-local").select2({placeholder:$(this).data("placeholder"),language:$(this).data("language"),allowClear:!0}),$("select.select2-colour").select2({allowClear:!1,templateResult:re,templateSelection:re}))}});function re(e){if(e.id==="none")return e.text;var t=$('<span><div class="badge label bg-'+e.id+'"> </div>'+e.text+"</span>");return t}var V=Array();function Ue(){let t=$(this).data("id");if(t in V)return V[t];var i='<div class="center"><i class="fa-solid fa-spinner fa-spin"></i></div>';return $.ajax({url:$(this).data("url"),method:"GET",async:!1,success:function(s){i=s}}),V[t]=i,i}window.ajaxTooltip=function(){$('[data-toggle="tooltip-ajax"]').tooltip({title:Ue,delay:500,trigger:"hover",placement:"auto",template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner tooltip-ajax text-left p-1 min-w-96"></div></div>',html:!0,sanitize:!1}),$('[data-toggle="tooltip-ajax"]').click(function(){$(this).tooltip("hide")})};$(document).ready(function(){$.each($("form"),function(){$(this).data("shortcut")&&Ve(this)}),ze(),We()});function ze(){$(document).bind("keydown",function(e){let t=$(e.target),i=$("#entity-modal"),s=$(".quick-creator-button"),n=$('[data-keyboard="edit"]');if(e.key==="]"){if(H(t))return;$(".sidebar-toggle").click().blur()}else{if(e.key==="k")return H(t)?void 0:($("#entity-lookup").focus(),!1);if(e.key==="n"&&!(e.ctrlKey||e.metaKey)&&!e.altKey&&s.length>0){if(H(t)||(i.data("bs.modal")||{}).isShown)return;s[0].click()}else if(e.key==="e"&&!(e.ctrlKey||e.metaKey)&&n.length===1){if(H(t)||(i.data("bs.modal")||{}).isShown)return;n[0].click()}else e.key==="Escape"&&i.has(".qq-modal-selection").length===1&&i.modal("hide")}})}function H(e){return e.length===0?!1:e.is("input")||e.is("select")||e.is("textarea")||e.attr("contentEditable")==="true"||e.hasClass("CodeMirror")}function Ve(e){$(document).bind("keydown",function(t){if((t.ctrlKey||t.metaKey)&&t.key.toLowerCase()==="s")return window.entityFormHasUnsavedChanges=!1,t.shiftKey?W("submit-update"):t.altKey&&W("submit-new"),$(e).submit(),!1;if((t.ctrlKey||t.metaKey)&&t.altKey&&t.key==="c")return window.entityFormHasUnsavedChanges=!1,W("submit-copy"),$(e).submit(),!1})}function W(e){let t=$("#form-submit-main");t&&t.attr("name",e)}function We(){$('input[data-paste="fontawesome"]').on("paste",function(e){e.preventDefault();let t;if(e.clipboardData||e.originalEvent.clipboardData?t=(e.originalEvent||e).clipboardData.getData("text/plain"):window.clipboardData&&(t=window.clipboardData.getData("Text")),t.startsWith('<i class="fa')||t.startsWith('<i class="ra')){let i=$(t).attr("class");if(i){$(this).val(i);return}}$(this).val(t)})}var O,C,J,_,T,S,k,P,N,I,B;$(document).ready(function(){at(),_e(),$e(),Qe(),B=$('#form-entry input[name="name"]'),B.length===1&&Je(),Xe(),Ge(),ke(),ye(),Ye(),Ze(),et(),xe(),Ce(),it(),nt(),st()});function Ye(){$(document).on("shown.bs.modal shown.bs.popover",function(){ye(),$e(),ke()})}function Je(){B.data("live-disabled")||B.focusout(function(){if(!$(this).val())return;let e=$(".duplicate-entity-warning"),t=$(this).data("id"),i=$(this).data("live")+"?q="+encodeURIComponent($(this).val())+"&type="+$(this).data("type")+"&exclude="+$(this).data("id");e.hide(),$.ajax(i).done(function(s){if(s.length>0){let n=Object.keys(s).filter(function(o){return!t||t!=s[o].id}).map(function(o){return'<a href="'+s[o].url+'">'+s[o].name+"</a>"});n.length>0&&($("#duplicate-entities").html(n.join(", ")),e.fadeIn())}else e.hide()})})}function $e(){if(O=$(".form-submit-actions"),O.length===0)return;let e=$("#form-submit-main"),t=$("#submit-mode");if(t===void 0)throw new Error("No submit mode hidden input found");$.each(O,function(){$(this).unbind("click").on("click",function(){return t.attr("name",$(this).data("action")),e.trigger("click"),!1})})}function Xe(){$.each($("form"),function(){$(this).on("submit",function(){window.entityFormHasUnsavedChanges=!1;var e=$(this).find(".btn-success");return e.length>0&&($.each(e,function(){$(this).hasClass("dropdown-toggle")?$(this).prop("disabled",!0):$(this).prop("disabled",!0).addClass("loading")}),$(this).append('<input type="hidden" name="'+$("#form-submit-main").attr("name")+'" />')),!0})})}function Ge(){C=$("#entity-calendar-form-add"),_=$('[name="calendar_id"]'),$(".entity-calendar-modal-form"),I=$(".entity-calendar-subform"),P=$("#entity-calendar-form-cancel"),J=$(".entity-calendar-form"),S=$('input[name="calendar_year"]'),T=$('select[name="calendar_month"]'),k=$('select[name="calendar_day"]'),N=$(".entity-calendar-loading"),C.length===1&&(C.on("click",function(e){e.preventDefault(),C.hide(),J.show();var t=C.data("default-calendar");return t&&(_.val(t),P.show(),I.fadeIn(),R(t)),!1}),P.on("click",function(e){e.preventDefault(),_.val(null),P.hide(),X()})),_.length===1&&_.on("change",function(){if(I.hide(),!_.val()){X();return}S=$('input[name="calendar_year"]'),T=$('select[name="calendar_month"]'),k=$('select[name="calendar_day"]'),S.length===0&&$('input[name="year"]').length===1&&(S=$('input[name="year"]'),T=$('select[name="month"]'),k=$('input[name="day"]')),R(_.val())}),ot()}function ye(){$("#entity-calendar-modal-add").length!==0&&(C=$("input[name=calendar-data-url]"),_=$('select[name="calendar_id"]'),S=$('input[name="year"]'),T=$('select[name="month"]'),k=$('input[name="day"]'),N=$(".entity-calendar-loading"),I=$(".entity-calendar-subform"),_.on("change",function(){if(I.hide(),!_.val()){X();return}R(_.val())}),_.val()&&(P.show(),I.fadeIn(),R(_.val())))}function R(e){N.show(),e=parseInt(e);var t=$('input[name="calendar-data-url"]').data("url").replace("/0/","/"+e+"/");$.ajax(t).done(function(i){let s=k.val();S.html(""),T.html(""),k.html("");let n=1,o=1;s||(s=i.current.day);let f=parseInt(i.current.month);$.each(i.months,function(d){let p=i.months[d],u=n===f?' selected="selected"':"";T.append('<option value="'+n+'" data-length="'+p.length+'" '+u+">"+this.name+"</option>"),n===f&&(o=p.length),n++});for(let d=1;d<o;d++){let p=d==s?' selected="selected"':"";k.append('<option value="'+d+'" '+p+">"+d+"</option>")}N.hide(),I.show(),S.val(i.current.year),$('select[name="calendar_recurring_periodicity"] option').remove(),$.each(i.recurring,function(d,p){$('select[name="calendar_recurring_periodicity"]').append('<option value="'+d+'">'+p+"</option>")}),$('input[name="length"]').val(1),i.length===1&&T.val(i[0].id),tt()})}function X(){J.hide(),C.show(),$('input[name="calendar_day"]').val(null),$('input[name="calendar_month"]').val(null),$('input[name="calendar_year"]').val(null)}function Qe(){if(O=$('form[data-unload="1"]'),O.length===0)return;let e=$("#form-submit-main");$(document).on("change",":input",function(){$(this).data("skip-unsaved")||(window.entityFormHasUnsavedChanges=!0)}),e.length===1&&$(window).bind("beforeunload",function(t){if(window.entityFormHasUnsavedChanges)return"Unsaved data warning"})}function ke(){$('form[data-maintenance="1"]').each(function(){$(this).data("with-maintenance")!==!0&&($(this).data("with-maintenance",!0),$(this).submit(function(e){if($(this).data("checked-maintenance")===!0)return!0;e.preventDefault();let t={url:$(this).attr("action"),method:$(this).attr("method"),data:$(this).serialize(),context:this};if($(this).find('input[type="file"]').length>0){let i=new FormData(this);t={url:$(this).attr("action"),method:$(this).attr("method"),data:i,cache:!1,contentType:!1,processData:!1,context:this}}$.ajax(t).done(function(){$(this).data("checked-maintenance",!0).submit()}).fail(function(i){window.formErrorHandler(i,this)})}))})}function Ze(){$("#datagrid-simple-sorter").change(function(){let e="";this.value&&(e=this.name+"="+this.value);let t=$(this).data("url"),i=null;t.includes("#")&&(i="#"+t.split("#")[1],t=t.split("#")[0]),$(this).data("url").includes("?")?t+="&"+e:t+="?"+e,t+=i,window.location=t})}function et(){$(".permission-toggle").change(function(){let t="input[data-action="+$(this).data("action")+"]";$(this).prop("checked")?$(t).prop("checked",!0):$(t).prop("checked",!1)})}function tt(){$.isFunction($.fn.spectrum)&&$(".spectrum").spectrum({preferredFormat:"hex",showInput:!0,showPalette:!0,allowEmpty:!0})}function xe(){let e=$(".entity-story-block .collapse"),t=$(".entity-story-block .element-toggle");$(".btn-post-collapse").unbind("click").click(function(){return e.collapse("hide"),t.addClass("collapsed"),!1}),$(".btn-post-expand").unbind("click").click(function(){return e.collapse("show"),t.removeClass("collapsed"),!1})}function it(){$(".sidebar-section-title").click(function(){$(this).next().hasClass("in")?($(this).find(".fa-chevron-down").hide(),$(this).find(".fa-chevron-right").show()):($(this).find(".fa-chevron-right").hide(),$(this).find(".fa-chevron-down").show())})}function Ce(){$(".story-load-more").click(function(e){let t=$(this);return e.preventDefault(),$("#story-more-spinner").show(),$(this).hide(),$.ajax({url:$(this).data("url")}).done(function(i){t.parent().remove(),i&&($(".entity-posts").append(i),Ce(),xe())}).fail(function(){$("#story-more-spinner").hide(),t.show()}),!1})}function nt(){$(".domain-trust").click(function(){let e="kanka_trusted_domains",t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");t=t?t[2]:"";let i=$(this).data("domain");t.includes(i)||(t&&(t+="|"),t+=i);let s=new Date;s.setTime(s.getTime()+30*24*60*60*1e3),document.cookie=e+"="+t+";expires="+s.toUTCString()+";sameSite=Strict"})}function at(){$(".dynamic-row-add").on("click",function(e){e.preventDefault();let t=$(this).data("target"),i=$(this).data("template");return $("."+t).append('<div class="form-group">'+$("#"+i).html()+"</div>"),ce(),!1}),ce()}function ce(){$.each($(".dynamic-row-delete"),function(){$(this).unbind("click").unbind("keydown"),$(this).on("click",function(e){e.preventDefault(),$(this).closest(".parent-delete-row").remove()}).on("keydown",function(e){e.key==="Enter"&&$(this).click()})})}function st(){$('input[data-toggle="entity-privacy"]').change(function(){let e=$("#entity-is-private");$(this).prop("checked")?e.show():e.hide()})}function ot(){$('select[name="calendar_month"]').change(function(){let e=$(this).find(":selected").data("length");lt(e)})}function lt(e){let t=k.val();t>e&&(t=e),k.html("");for(let i=1;i<=e;i++){let s=i==t?' selected="selected"':"";k.append('<option value="'+i+'" '+s+">"+i+"</option>")}}$("#campaign-delete-confirm").on("shown.bs.modal",function(){$("#campaign-delete-form").focus()});var G;$(document).ready(function(){G=$(".post-perm-add"),G.length!==0&&(rt(),De())});function rt(){G.on("click",function(e){e.preventDefault();let t=$(this).data("type"),i=$('select[name="'+t+'"]');if(!i||!i.val())return!1;let s=i.find(":selected")[0],n=$("#post-perm-"+t+"-template").clone().removeClass("hidden").removeAttr("id"),o=n.html().replace(/\$SELECTEDID\$/g,i.val()).replace(/\$SELECTEDNAME\$/g,s.text);return n.html(o).insertBefore($("#post-perm-target")),$("#post-new-"+t).modal("toggle"),De(),i.val("").trigger("change"),!1})}function De(){$.each($(".post-delete-perm"),function(){$(this).unbind("click"),$(this).on("click",function(){$(this).parent().parent().parent().parent().remove()})})}var de;$(document).ready(function(){de=$("#calendar-year-switcher"),de.length===1&&($("#calendar-year-switcher-field"),$("#add-calendar-event"),ct()),$(document).on("shown.bs.modal",function(){ue()}),$('select[name="recurring_periodicity"]').length===1&&ue(),dt()});function ct(){$(".calendar-event-block").each(function(){$(this).data("toggle")!=="ajax-modal"&&$(this).data("url")&&$(this).click(function(){window.location=$(this).data("url")})})}function ue(){$('select[name="recurring_periodicity"]').change(function(){this.value?$("#add_event_recurring_until").show():$("#add_event_recurring_until").hide()}),$("#calendar-action-existing").click(function(e){e.preventDefault(),$("#calendar-event-first").hide(),$(".calendar-new-event-field").hide(),$("#calendar-event-subform").fadeToggle(),$("#calendar-event-submit").toggle()}),$("#calendar-action-new").click(function(e){e.preventDefault(),$("#calendar-event-first").hide(),$(".calendar-existing-event-field").hide(),$("#calendar-event-subform").fadeToggle(),$("#calendar-event-submit").toggle()}),$("#calendar-event-switch").click(function(e){e.preventDefault(),$("#calendar-event-subform").hide(),$("#calendar-event-first").fadeToggle(),$(".calendar-existing-event-field").show(),$(".calendar-new-event-field").show(),$("#calendar-event-submit").toggle()})}function dt(){$(document).bind("keydown",function(e){(e.ctrlKey||e.metaKey)&&e.which===37?$('[data-shortcut="previous"]').addClass("loading")[0].click():(e.ctrlKey||e.metaKey)&&e.which===39&&$('[data-shortcut="next"]').addClass("loading")[0].click()})}var j,Q=300*1e3,Se,Z=!0;$(document).ready(function(){j=$("#entity-edit-warning"),j.length!==0&&(ut(),ft())});function ut(){Z=!1,j.modal({backdrop:!1}),$("#entity-edit-warning-ignore").click(function(e){e.preventDefault(),fe(),Z=!0,$.ajax({url:$(this).data("url"),type:"POST",context:this}).done(function(){j.modal("hide")})}),$("#entity-edit-warning-back").click(function(e){e.preventDefault(),fe(),window.location.href=$(this).data("url")})}function fe(){j.find(".modal-ajax-body").hide(),j.find(".modal-spinner-body").show(),j.find(".modal-footer").hide()}function ft(){let e=$("#editing-keep-alive");e.length!==0&&(Se=e.data("url"),setTimeout(ee,Q))}function ee(){if(!Z){setTimeout(ee,Q);return}$.ajax({url:Se,type:"POST"}).done(function(){setTimeout(ee,Q)})}var b="#entity-modal",K;$(document).ready(function(){$(document).on("shown.bs.modal shown.bs.popover",function(){z()}),$(".quick-creator-subform").click(function(){$.ajax({url:$(this).data("url")}).done(function(e){$(b).find(".modal-content").show().html(e),$(b).find(".modal-spinner").hide(),$(b).modal(),se()})})});function z(){$('[data-toggle="entity-creator"]').unbind("click").click(function(e){return e.preventDefault(),$(this).data("type")==="inline"?($(".quick-creator-body").hide(),$(".quick-creator-footer").hide(),$(".quick-creator-loading").show()):Ie(),$.ajax({url:$(this).data("url"),context:this}).done(function(i){$(b).find(".modal-content").show().html(i),$(b).find(".modal-spinner").hide(),se(),oe()}),!1})}function Te(){$("#qq-name-field").unbind("focusout").focusout(function(){$(this).val()&&($(this).parent().parent().find(".duplicate-entity-warning").hide(),$.ajax({url:$(this).data("live")+"?q="+$(this).val()+"&type="+$(this).data("type"),context:this}).done(function(e){if(e.length>0){let t=Object.keys(e).map(function(i){return'<a href="'+e[i].url+'">'+e[i].name+"</a>"}).join(", ");$(this).parent().parent().find(".duplicate-entities").html(t),$(this).parent().parent().find(".duplicate-entity-warning").fadeIn()}else $(this).parent().parent().find(".duplicate-entity-warning").hide()}))})}function Ie(){$(b).find(".modal-content").hide(),$(b).find(".modal-spinner").show()}function se(){K=$(".quick-creator-submit"),window.initForeignSelect(),window.initTags(),Te(),je(),oe(),K.on("click",function(e){let t=$(this).data("action");return t&&$('#entity-creator-form [name="action"]').val(t),!0}),$("#entity-creator-form").submit(function(e){e.preventDefault(),K.prop("disabled",!0).find("span").hide().parent().find("i.fa-spin").show(),$("div.text-danger").remove(),$.post({url:$(this).attr("action"),data:$(this).serialize(),context:this}).done(function(t){if(typeof t=="object"){if(t.redirect){window.location.replace(t.redirect);return}let i=new Option(t._name,t._id),s=$("#"+t._target);if(t._multi){let n=s.val();n.push(t._id),s.append(i).val(n)}else s.children().remove().end().append(i).val(t._id);s.trigger("change"),$(b).find(".modal-content").html("").show(),$(b).find(".modal-spinner").hide(),$(b).modal("toggle"),te();return}$(b).find(".modal-content").html(t).show(),$(b).find(".modal-spinner").hide(),z(),te()}).fail(function(t){if(t.responseJSON.errors){let i=t.responseJSON.errors;Object.keys(i).forEach(function(f){let d=$('#entity-creator-form [name="'+f+'"]');d.length>0&&d.addClass("input-error").parent().append('<div class="text-danger">'+i[f][0]+"</div>")});let n=Object.keys(i)[0],o=$('#entity-creator-form input[name="'+n+'"]');if(o[0]){o[0].scrollIntoView({behavior:"smooth"}),$(".tab-content .active").removeClass("active"),$(".nav-tabs li.active").removeClass("active");let f=$('[name="'+n+'"').closest(".tab-pane");f.addClass("active"),$('a[href="#'+f.attr("id")+'"]').closest("li").addClass("active")}}K.prop("disabled",!1).find("i.fa-spin").hide().parent().find("span").show(),$('#entity-creator-form [name="action"]').val("")})})}function je(){$("#entity-creator-back").click(function(e){e.preventDefault(),Ie(),$.ajax({url:$(this).data("url"),context:this}).done(function(t){let i=$(this).data("target");$(i).find(".modal-content").html(t).show(),$(i).find(".modal-spinner").hide(),z()})})}function oe(){$(".qq-mode-toggle").unbind("click").on("click",function(e){e.preventDefault(),!$(this).hasClass("active")&&($(".qq-mode-toggle").removeClass("active"),$(this).addClass("active"),$(".quick-creator-body").hide(),$(".quick-creator-footer").hide(),$(".quick-creator-loading").show(),$.ajax({url:$(this).data("url")}).done(function(t){$("#entity-modal").find(".modal-content").html(t).show(),te()}))}),$(".qq-action-more").unbind("click").on("click",function(e){e.preventDefault(),$(this).hide(),$(".qq-more-fields").show()}),z()}function te(){oe(),Te(),je(),se(),window.initForeignSelect(),window.initTags()}var E,L,ht=new IntersectionObserver(function(e){e[0].isIntersecting===!0&&ne($(".datagrid-onload"))},{threshold:[0]});$(document).ready(function(){Me(),Ee(),U(),pt()});function Ee(){$("[data-bulk-action]").on("click",function(){mt($(this).data("bulk-action"))}),$(".bulk-print").on("click",function(e){e.preventDefault();let t=$(this).closest("form");t.find(),t.submit()})}function Me(){var e=$("#datagrid-select-all");e.length>0&&e.unbind("click").click(function(){$(this).prop("checked")?$.each($("input[name='model[]']"),function(){$(this).prop("checked",!0)}):$.each($("input[name='model[]']"),function(){$(this).prop("checked",!1)}),U()}),$.each($("input[name='model[]']"),function(){$(this).change(function(t){U(),t.preventDefault()})})}function mt(e){var t=[];$.each($("input[name='model[]']"),function(){$(this).prop("checked")&&t.push($(this).val())}),$("#datagrid-bulk-"+e+"-models").val(t.toString())}function U(){var e=!0;$.each($("input[name='model[]']"),function(){$(this).prop("checked")&&(e=!1)}),e?$(".datagrid-bulk-actions .btn").prop("disabled",!0).addClass("disabled"):$(".datagrid-bulk-actions .btn").prop("disabled",!1).removeClass("disabled")}function pt(){ie(),qe(),gt(),U(),ie()}function ie(){$(".datagrid-bulk").click(function(e){e.preventDefault(),E=$(this).closest("form");let t=[];$.each($("input[name='model[]']"),function(){$(this).prop("checked")&&t.push($(this).val())}),$.ajax({url:E.attr("action")+"?action=edit",method:"POST",data:{model:t}}).done(function(i){$("#entity-modal").find(".modal-content").html(i),$("#entity-modal").modal()})}),$(".datagrid-submit").click(function(e){if(e.preventDefault(),E=$(this).closest("form"),E.find('input[name="action"]').val($(this).data("action")),$(this).data("action")==="delete")return $("#datagrid-bulk-delete").modal(),!1;$(".datagrid-bulk-actions").hide(),$(".datagrid-spinner").show(),E.submit()}),$("#datagrid-action-confirm").click(function(){$("#datagrid-bulk-delete").modal("hide"),E.submit()})}function qe(){$.each($('table[data-render="datagrid2"]'),function(){L=$(this),$(this).find("thead a").click(function(e){e.preventDefault(),ne($(this))}),$(this).closest("#datagrid-parent").find(".pagination > li > a").click(function(e){e.preventDefault(),ne($(this))})}),Me(),Ee(),ie()}function gt(){$(".datagrid-onload").length!=0&&ht.observe(document.querySelector(".datagrid-onload"))}function ne(e){L.find("thead").hide(),L.find("tbody").hide(),L.find("tfoot").fadeIn();let t=e.attr("href"),i=e.data("url");t==="#"&&i&&(t=i);let s=e.data("target")??"#datagrid-parent";$.ajax(t).done(function(n){n.html&&$(s).html(n.html),n.deletes&&$("#datagrid-delete-forms").html(n.deletes),n.url&&window.history.pushState({},"",n.url),qe(),$(document).trigger("shown.bs.modal"),_e()}).fail(function(n){console.error("datagrid2",n),L.find("tfoot").addClass("bg-danger")})}$(document).ready(function(){_t(),vt()});function _t(){if($("#quick-link-selector").length===0)return!1;$("#quick-link-selector .btn-app").each(function(t){$(this).click(function(){$(".quick-link-subform").hide(),$("#quick-link-selector .btn-app").removeClass("btn-active");let i=$(this).data("type");$(this).addClass("btn-active"),$("#quick-link-"+i).show()})})}function vt(){let e=$("#entity-selector");if(e.length===0)return!1;e.val()!=""&&$("#filter-subform").show(),e.change(function(){e.val()==""?($("#filter-subform").hide(),console.log(e.val())):$("#filter-subform").show()})}$(document).ready(function(){$(".form-members").count!==0&&$.each($(".form-members"),function(){let e=$(this).data("allow-clear");$(this).select2({tags:!0,allowClear:e||!0,minimumInputLength:0,ajax:{quietMillis:500,delay:500,url:$(this).attr("data-url"),dataType:"json",data:function(t){return{q:$.trim(t.term)}},processResults:function(t){return{results:t}},cache:!0},createTag:function(){}})})});$(document).ready(function(){bt(),wt(),$t(),kt(),xt(),Ct(),yt(),Dt()});function bt(){$.each($(".form-rpg-systems"),function(){$(this).select2({multiple:!0,allowClear:!0,minimumInputLength:0})})}function wt(){$(".campaign-settings").length!==0&&$(".box-module").unbind("click").click(function(e){e.preventDefault(),!$(this).hasClass("box-loading")&&($(this).addClass("box-loading"),$(this).find(".loading").show(),$(this).find("p").hide(),$.ajax({method:"post",url:$(this).data("url"),context:this}).done(function(t){t.success&&(t.status?$(this).addClass("box-success").removeClass("box-default"):$(this).removeClass("box-success").addClass("box-default"),window.showToast(t.toast)),$(this).find(".loading").hide(),$(this).find("p").show(),$(this).removeClass("box-loading")}))})}function $t(){$(".btn-user-roles").popover({html:!0,sanitize:!1,trigger:"focus"})}function yt(){$(".public-permission").click(function(e){e.preventDefault(),$(this).addClass("loading"),$.ajax({method:"post",url:$(this).data("url"),context:this}).done(function(t){$(this).removeClass("loading"),t.success&&(t.status?$(this).addClass("enabled"):$(this).removeClass("enabled"),window.showToast(t.toast))})})}function kt(){$.each($(".codemirror"),function(){let e=$(this).attr("id");CodeMirror.fromTextArea(document.getElementById(e),{extraKeys:{"Ctrl-Space":"autocomplete"},lineNumbers:!0,lineWrapping:!0,theme:"dracula"})})}function xt(){let e=[].slice.call(document.querySelectorAll(".nested-sortable"));for(let t=0;t<e.length;t++)new ve(e[t],{group:"nested",handle:".dnd-handle",animation:150,fallbackOnBody:!0,swapThreshold:.65,onMove:function(i,s){let n=i.dragged,o=i.related,f=$(o).parents(".fixed-position").length>0;return!(n.classList.contains("fixed-position")&&f)}})}function Ct(){let e=$(".campaign-export-btn");if(e.length===0)return;let t=$(".campaign-export-spinner");t.hide(),e.show(),e.click(function(i){i.preventDefault(),t.show(),e.hide(),$.ajax({url:e.data("url"),method:"POST"}).done(function(s){t.hide(),s.error?$("#campaign-export-error").html(s.error).show():$("#campaign-export-success").html(s.success).show()}).fail(function(s){console.error("campaign export call",s)})})}function Dt(){let e=$("form#campaign-style");e.length!==0&&e.on("submit",function(t){let i=$($(this).data("error"));return $('textarea[name="content"]').val().length<$(this).data("max-content")?(i.hide(),!0):(i.show(),$("form .submit-group .btn").prop("disabled",!1),!1)})}$(document).ready(function(){St()});function St(){$("[data-clipboard]").length!==0&&$("[data-clipboard]").click(function(e){e.preventDefault();let t=$("<input>");$("body").append(t),t.val($(this).data("clipboard")).select(),document.execCommand("copy"),t.remove();let i=$(this).data("success"),s=$(this).data("toast");if(s)return window.showToast(s),!1;if(i)$(i).fadeIn(),setTimeout(function(){$(i).fadeOut()},3e3);else return!1})}$(document).ready(function(){Fe()});function Fe(){$('.toast-container [data-toggle="dismiss"]').unbind("click").on("click",function(e){e.preventDefault(),$(this).parent().parent().fadeOut()})}window.showToast=function(e,t){t=t||"toast-success";let i=$('<div class="'+t+' mt-2 text-right">');i.html('<span class="toast-message inline-block p-3">'+e+'<i class="fa-solid fa-times cursor-pointer ml-1" data-toggle="dismiss"></i></span'),$(".toast-container").append(i),setTimeout(function(){i.fadeOut()},3e3),Fe()};window.handleExploreMapClick=function(e){if(!window.exploreEditMode)return;let t=e.latlng,i=t.lat.toFixed(3),s=t.lng.toFixed(3);if(window.drawingPolygon){window.addPolygonPosition(i,s);return}$("#marker-latitude").val(i),$("#marker-longitude").val(s),$("#marker-modal").modal("show")};+function(e){var t="lte.pushmenu",i={collapseScreenSize:767,expandOnHover:!1,expandTransitionDelay:200},s={collapsed:".sidebar-collapse",open:".sidebar-open",mainSidebar:".main-sidebar",contentWrapper:".content-wrapper",searchInput:".sidebar-form .form-control",button:'[data-toggle="push-menu"]',mini:".sidebar-mini",expanded:".sidebar-expanded-on-hover",layoutFixed:".fixed"},n={collapsed:"sidebar-collapse",open:"sidebar-open",mini:"sidebar-mini",expanded:"sidebar-expanded-on-hover",expandFeature:"sidebar-mini-expand-feature",layoutFixed:"fixed"},o={expanded:"expanded.pushMenu",collapsed:"collapsed.pushMenu"},f=function(u){this.options=u,this.init()};f.prototype.init=function(){(this.options.expandOnHover||e("body").is(s.mini+s.layoutFixed))&&(this.expandOnHover(),e("body").addClass(n.expandFeature)),e(s.contentWrapper).click(function(){e(window).width()<=this.options.collapseScreenSize&&e("body").hasClass(n.open)&&this.close()}.bind(this)),e(s.searchInput).click(function(u){u.stopPropagation()})},f.prototype.toggle=function(){var u=e(window).width(),m=!e("body").hasClass(n.collapsed);u<=this.options.collapseScreenSize&&(m=e("body").hasClass(n.open)),m?this.close():this.open()},f.prototype.open=function(){var u=e(window).width();u>this.options.collapseScreenSize?e("body").removeClass(n.collapsed).trigger(e.Event(o.expanded)):e("body").addClass(n.open).trigger(e.Event(o.expanded))},f.prototype.close=function(){var u=e(window).width();u>this.options.collapseScreenSize?e("body").addClass(n.collapsed).trigger(e.Event(o.collapsed)):e("body").removeClass(n.open+" "+n.collapsed).trigger(e.Event(o.collapsed))},f.prototype.expandOnHover=function(){e(s.mainSidebar).hover(function(){e("body").is(s.mini+s.collapsed)&&e(window).width()>this.options.collapseScreenSize&&this.expand()}.bind(this),function(){e("body").is(s.expanded)&&this.collapse()}.bind(this))},f.prototype.expand=function(){setTimeout(function(){e("body").removeClass(n.collapsed).addClass(n.expanded)},this.options.expandTransitionDelay)},f.prototype.collapse=function(){setTimeout(function(){e("body").removeClass(n.expanded).addClass(n.collapsed)},this.options.expandTransitionDelay)};function d(u){return this.each(function(){var m=e(this),F=m.data(t);if(!F){var Le=e.extend({},i,m.data(),typeof u=="object"&&u);m.data(t,F=new f(Le))}u==="toggle"&&F.toggle()})}var p=window.$.fn.pushMenu;window.$.fn.pushMenu=d,window.$.fn.pushMenu.Constructor=f,window.$.fn.pushMenu.noConflict=function(){return window.$.fn.pushMenu=p,this},window.$(document).on("click",s.button,function(u){u.preventDefault(),d.call(window.$(this),"toggle")}),window.$(window).on("load",function(){d.call(window.$(s.button))})}(jQuery);$(window).ready(function(){Tt()});function Tt(){$(".banner-notification-dismiss").click(function(e){e.preventDefault(),console.log("click"),$.post({url:$(this).data("url"),method:"POST"}).done(function(){})})}window.initSortable=function(){var e=document.querySelectorAll(".sortable-elements"),t;if(e.length!==0)for(t=0;t<e.length;++t){let i={},s=e[t].getAttribute("data-handle");s&&(i.handle=s),ve.create(e[t],i)}};$(document).ready(()=>{window.initSortable()});window.formErrorHandler=function(e,t){if($(".input-error").removeClass("input-error"),$(".text-danger").remove(),$(t).find(".btn-success").prop("disabled",!1).removeClass("loading"),e.status===503){window.showToast(e.responseJSON.message,"toast-error");return}if(e.status===403){$("#entity-form-403-error").show();return}let i=e.responseJSON.errors,s=[],n=Object.keys(i),o=!0;if(n.forEach(function(u){let m=$('[name="'+u+'"]');m.length>0?m.addClass("input-error").parent().append('<div class="text-danger">'+i[u][0]+"</div>"):(o=!1,s.push(i[u][0]))}),!o){let u=$("#entity-form-generic-error .error-logs");u.html(""),s.forEach(function(m){let F=m+"<br />";u.append(F)}),$("#entity-form-generic-error").show()}if($(this).find(".tab-content").length===0)return;let f=Object.keys(i)[0],d=document.getElementsByName(f);if(!d[0])return;d[0].scrollIntoView({behavior:"smooth"}),$(".tab-content .active").removeClass("active"),$(".nav-tabs li.active").removeClass("active");let p=$('[name="'+f+'"').closest(".tab-pane");p.addClass("active"),$('a[href="#'+p.attr("id")+'"]').closest("li").addClass("active")};const It={props:{text:String,title:String}},jt={class:"mx-5"},Et=["title"],Mt=a("i",{class:"fa-solid fa-chevrons-left","aria-hidden":"true","data-sidebar":"collapse"},null,-1),qt=a("i",{class:"fa-solid fa-chevrons-right","aria-hidden":"true","data-sidebar":"expand"},null,-1),Ft={class:"sr-only"};function Pt(e,t,i,s,n,o){return l(),r("div",jt,[a("span",{role:"button",class:"sidebar-toggle text-center cursor-pointer","data-toggle":"tooltip",title:i.title,"data-placement":"right","data-html":"true",tabindex:"3"},[Mt,qt,a("span",Ft,c(i.text),1)],8,Et)])}const Lt=x(It,[["render",Pt]]),Ot={props:["entity"],methods:{backgroundImage:function(e){return"url('"+e.image+"')"},preview:function(e){this.emitter.emit("preview",e)}}},At=["data-id"],Ht={class:"flex-none"},Kt=["href","title"],Nt={class:"flex-grow truncate pl-1"},Bt=["title"],Rt={class:"entity-type text-xs"};function Ut(e,t,i,s,n,o){return l(),r("div",{class:"flex justify-center gap-1 mb-1 cursor-pointer hover:lookup-entity rounded p-1 w-full","data-id":i.entity.id,onClick:t[1]||(t[1]=f=>o.preview(i.entity))},[a("div",Ht,[a("a",{href:i.entity.link,style:M({backgroundImage:o.backgroundImage(i.entity)}),onClick:t[0]||(t[0]=Ae(()=>{},["stop"])),title:i.entity.name,class:"rounded cover-background block h-16 w-16"},null,12,Kt)]),a("div",Nt,[a("div",{class:"font-extrabold entity-name truncate",title:i.entity.name},c(i.entity.name),9,Bt),a("div",Rt,c(i.entity.type),1)])],8,At)}const Pe=x(Ot,[["render",Ut]]),zt={props:["entity"],components:{LookupEntity:Pe},data(){return{focus_profile:!0,focus_pins:!1,focus_access:!1}},methods:{hasTitle(){return this.entity.title},tagClass(e){let t="inline-block rounded-xl px-3 py-1 mr-2 bg-neutral-400 text-black text-xs mb-1";return e.colour&&(t+=" bg-"+e.colour,e.colour==="black"&&(t+=" text-white")),t},backgroundImage:function(){return"url('"+this.entity.image+"')"},tabClass:function(e){let t="p-1 px-1 mx-1 pt-2 select-none text-center truncate border-b-2 border-solid border-r-0 border-t-0 border-l-0";return e==="profile"&&this.focus_profile||e==="links"&&this.focus_pins||e==="access"&&this.focus_access?t+=" font-black border-slate-600":t+=" cursor-pointer border-lookup",t},switchTab:function(e){this.focus_profile=!1,this.focus_pins=!1,this.focus_access=!1,e==="profile"?this.focus_profile=!0:e==="links"?this.focus_pins=!0:e==="access"&&(this.focus_access=!0)},profileClass:function(e){return"entity-profile-"+e.slug}}},Vt={class:"entity-header p-3 bg-entity-focus"},Wt={class:"block w-full flex items-center"},Yt=["href","title"],Jt={key:0,class:"fa-solid fa-skull mx-2","aria-hidden":"true"},Xt=["href"],Gt=a("i",{class:"fa-solid fa-external-link","aria-hidden":"true","aria-label":"Open in a new window"},null,-1),Qt=[Gt],Zt={key:0,class:"block w-full"},ei={key:1,class:"my-1 w-full"},ti=["href"],ii=["href","data-tag"],ni=a("i",{class:"ra ra-tower","aria-hidden":"true","aria-label":"Location"},null,-1),ai=["href","title"],si={class:"entity-sections"},oi={class:"tabs flex my-2 justify-center items-center border-solid border-slate-600 border-b-2 border-r-0 border-t-0 border-l-0"},li={key:0,class:"tab-profile p-5"},ri={key:0,class:"entity-pinned-attributes"},ci=["data-attribute","data-target"],di={class:"inline-block text-uppercase font-extrabold mr-1"},ui=["innerHTML"],fi=a("hr",null,null,-1),hi={class:"text-uppercase font-extrabold truncate"},mi={key:1,class:"tab-links p-3"},pi={key:0,class:"text-center italic"};function gi(e,t,i,s,n,o){const f=q("LookupEntity");return l(),r(v,null,[a("div",Vt,[a("div",Wt,[a("a",{class:"text-2xl font-extrabold entity-name",href:i.entity.link,title:i.entity.name},c(i.entity.name),9,Yt),i.entity.is_dead?(l(),r("i",Jt)):h("",!0),a("a",{class:"ml-2 text-xs",target:"_blank",href:i.entity.link},Qt,8,Xt)]),o.hasTitle()?(l(),r("div",Zt,c(i.entity.title),1)):h("",!0),i.entity.tags.length>0?(l(),r("div",ei,[(l(!0),r(v,null,y(i.entity.tags,d=>(l(),r("a",{class:g(o.tagClass(d)),href:d.link},c(d.name),11,ti))),256))])):h("",!0),i.entity.location?(l(),r("a",{key:2,class:"block w-full cursor-pointer my-2",href:i.entity.location.link,"data-tag":i.entity.id},[ni,w(" "+c(i.entity.location.name),1)],8,ii)):h("",!0),i.entity.image?(l(),r("a",{key:3,href:i.entity.link,style:M({backgroundImage:o.backgroundImage()}),title:i.entity.name,class:"rounded cover-background block w-full aspect-square"},null,12,ai)):h("",!0)]),a("div",si,[a("div",oi,[a("div",{class:g(o.tabClass("profile")),onClick:t[0]||(t[0]=d=>o.switchTab("profile"))},c(i.entity.texts.profile),3),a("div",{class:g(o.tabClass("links")),onClick:t[1]||(t[1]=d=>o.switchTab("links"))},c(i.entity.texts.connections),3),a("div",{class:g(o.tabClass("access")),onClick:t[2]||(t[2]=d=>o.switchTab("access"))},null,2)]),n.focus_profile?(l(),r("div",li,[i.entity.attributes.length>0?(l(),r("div",ri,[(l(!0),r(v,null,y(i.entity.attributes,d=>(l(),r("div",{class:"mb-3","data-attribute":d.name,"data-target":d.id},[a("span",di,c(d.name),1),a("span",{innerHTML:d.value},null,8,ui)],8,ci))),256)),fi])):h("",!0),(l(!0),r(v,null,y(i.entity.profile,d=>(l(),r("div",{class:g(["mb-3",o.profileClass(d)])},[a("div",hi,c(d.field),1),a("div",null,c(d.value),1)],2))),256))])):h("",!0),n.focus_pins?(l(),r("div",mi,[(l(!0),r(v,null,y(i.entity.connections,d=>(l(),D(f,{entity:d},null,8,["entity"]))),256)),i.entity.connections.length===0?(l(),r("p",pi,c(i.entity.texts["no-connections"]),1)):h("",!0)])):h("",!0)])],64)}const _i=x(zt,[["render",gi]]),vi={directives:{clickOutside:we.directive},props:{api_lookup:String,api_recent:String,placeholder:String,keyboard_tooltip:String},components:{LookupEntity:Pe,EntityPreview:_i},data(){return{has_drawer:!1,term:null,show_loading:!1,show_recent:!1,show_preview:!1,show_results:!1,recent:[],results:[],cached:{},has_recent:!1,texts:{},timeout_id:null,preview_entity:null}},watch:{term(e,t){this.termChanged()}},methods:{termChanged(){this.term.trim().length<3||(this.timeout_id!==void 0&&clearTimeout(this.timeout_id),this.show_loading=!0,this.timeout_id=setTimeout(()=>this.lookup(),500))},lookup(){let e=this.term.trim(),t=e.toLowerCase().replace(/ /g,"-").replace(/ [^\w-]+/g,"");if(this.cached[t])return this.displayCached(t);axios.get(this.api_lookup,{params:{q:e,v2:!0}}).then(i=>{this.parseLookupResponse(i,t)})},focus(){this.api_recent&&(this.has_drawer=!0,this.fetch())},escape(){this.timeout_id!==void 0&&clearTimeout(this.timeout_id),this.close()},fetch(){if(this.has_recent){this.show_recent=!0;return}this.show_loading=!0,axios.get(this.api_recent).then(e=>{this.recent=e.data.recent,this.texts.recents=e.data.texts.recents,this.texts.results=e.data.texts.results,this.texts.hint=e.data.texts.hint,this.texts.keyboard=e.data.texts.keyboard,this.texts.empty_results=e.data.texts.empty_results,this.show_loading=!1,this.show_recent=!0,this.has_recent=!0}).catch(e=>{this.show_loading=!1,this.show_recent=!0,this.has_recent=!1})},parseLookupResponse(e,t){this.results=e.data.entities,this.cached[t]=e.data.entities,this.showResults()},displayCached(e){this.results=this.cached[e],this.showResults()},showResults(){this.timeout_id=null,this.show_preview=!1,this.show_loading=!1,this.show_results=!0},loadPreview(e){this.show_loading=!0,axios.get(e.preview).then(t=>{this.parsePreviewResponse(t)})},parsePreviewResponse(e){this.preview_entity=e.data,this.show_loading=!1,this.show_preview=!0,this.show_recent=!1},onClickOutside(e){this.close()},close(){this.show_recent=!1,this.show_loading=!1,this.show_preview=!1,this.$refs.searchField.blur()}},mounted(){this.emitter.on("preview",e=>{this.loadPreview(e)})}},bi={class:"flex grow mr-2"},wi={class:"relative grow"},$i=["placeholder"],yi={class:"form-control-feedback hidden-xs hidden-sm"},ki=["title"],xi={key:0,class:"search-drawer absolute top-0 left-0 mt-12 h-sidebar w-sidebar bg-navbar shadow-r overflow-y"},Ci={key:0,class:"text-center"},Di=a("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true","aria-label":"Loading"},null,-1),Si=[Di],Ti={key:1,class:"search-recent bg-lookup p-2 min-h-full shadow-r flex flex-col items-stretch"},Ii={key:0,class:"flex-0"},ji={class:"italic text-xs text-center"},Ei={class:"grow"},Mi={key:0,class:"search-results mb-2"},qi={class:"text-sm text-uppercase mb-2 my-2 mx-1"},Fi={key:0,class:"italic m-2"},Pi={key:1,class:"recent-searches"},Li={class:"text-sm text-uppercase my-2 mx-1"},Oi={key:1,class:"flex-0 text-xs text-center"},Ai=a("hr",null,null,-1),Hi=["innerHTML"],Ki={key:2,class:"search-preview bg-lookup min-h-screen shadow-r"};function Ni(e,t,i,s,n,o){const f=q("LookupEntity"),d=q("EntityPreview"),p=be("click-outside");return Y((l(),r("div",bi,[a("div",wi,[Y(a("input",{type:"text",class:"form-control",maxlength:"25",ref:"searchField",id:"entity-lookup","onUpdate:modelValue":t[0]||(t[0]=u=>n.term=u),onClick:t[1]||(t[1]=u=>o.focus()),onFocus:t[2]||(t[2]=u=>o.focus()),onKeydown:t[3]||(t[3]=He(u=>o.escape(),["esc"])),placeholder:i.placeholder},null,40,$i),[[Ke,n.term]]),a("span",yi,[a("span",{class:"flex-none keyboard-shortcut py-1",id:"lookup-kb-shortcut","data-toggle":"tooltip",title:i.keyboard_tooltip,"data-html":"true","data-placement":"bottom"},"K",8,ki)])]),n.show_recent||n.show_loading||n.show_preview?(l(),r("aside",xi,[n.show_loading?(l(),r("div",Ci,Si)):h("",!0),n.show_recent?(l(),r("div",Ti,[n.show_results?h("",!0):(l(),r("div",Ii,[a("p",ji,c(n.texts.hint),1)])),a("div",Ei,[n.show_results?(l(),r("div",Mi,[a("div",qi,c(n.texts.results),1),n.results.length===0?(l(),r("div",Fi,c(n.texts.empty_results),1)):(l(!0),r(v,{key:1},y(n.results,u=>(l(),D(f,{entity:u},null,8,["entity"]))),256))])):h("",!0),n.recent.length>0?(l(),r("div",Pi,[a("div",Li,c(n.texts.recents),1),(l(!0),r(v,null,y(n.recent,u=>(l(),D(f,{entity:u},null,8,["entity"]))),256))])):h("",!0)]),n.show_loading?h("",!0):(l(),r("div",Oi,[Ai,a("p",{class:"italic text-xs text-center",innerHTML:n.texts.keyboard},null,8,Hi)]))])):h("",!0),n.show_preview?(l(),r("div",Ki,[Ne(d,{entity:n.preview_entity},null,8,["entity"])])):h("",!0)])):h("",!0)])),[[p,o.onClickOutside]])}const Bi=x(vi,[["render",Ni]]),Ri={props:["campaign"],methods:{backgroundImage:function(e){return e.image?"url("+e.image+")":""},campaignClass:function(e){return"campaign flex items-end bordered border-solid rounded-lg cover-background relative h-24 overflow-hidden text-break"+(e.is_boosted?" boosted":"")}}},Ui=["href","title"],zi=["innerHTML"];function Vi(e,t,i,s,n,o){return l(),r("a",{class:g(o.campaignClass(i.campaign)),href:i.campaign.url,style:M({backgroundImage:o.backgroundImage(i.campaign)}),title:i.campaign.name},[a("div",{class:"flex items-end justify-center name w-full text-xs p-2 pt-6 text-center",innerHTML:i.campaign.name},null,8,zi)],14,Ui)}const Wi=x(Ri,[["render",Vi]]),Yi={props:["notification"],data(){return{is_dismissed:!1,is_loading:!1}},methods:{backgroundClass:function(e){let t="notification background-accent flex justify-center items-center mb-2 px-2 py-2 rounded-md";return e.is_read?t:t+" unread"},iconClass:function(e){return"fa-solid fa-"+e.icon},dismiss:function(e){this.is_loading=!0,axios.post(e.dismiss).then(()=>{this.is_dismissed=!0,this.emitter.emit("read_notification",e)})}}},Ji=["href","data-id"],Xi={class:"flex-none p-2"},Gi=["innerHTML"],Qi=["title"],Zi=a("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),en=[Zi],tn={key:1,class:"flex-none p-2"},nn=a("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1),an=[nn],sn=["data-id"],on={class:"flex-none p-2"},ln=["innerHTML"],rn=["title"],cn=a("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),dn=[cn],un={key:1,class:"flex-none p-2"},fn=a("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1),hn=[fn];function mn(e,t,i,s,n,o){return i.notification.url&&!n.is_dismissed?(l(),r("a",{key:0,class:g(o.backgroundClass(i.notification)),href:i.notification.url,"data-id":i.notification.id},[a("div",Xi,[a("i",{class:g(o.iconClass(i.notification)),"aria-hidden":"true"},null,2)]),a("div",{class:"flex-grow p-2",innerHTML:i.notification.text},null,8,Gi),this.is_loading?(l(),r("div",tn,an)):(l(),r("div",{key:0,class:"flex-none p-2 cursor-pointer dismissable",onClick:t[0]||(t[0]=f=>o.dismiss(i.notification)),title:i.notification.dismiss_text},en,8,Qi))],10,Ji)):n.is_dismissed?h("",!0):(l(),r("div",{key:1,class:g(o.backgroundClass(i.notification)),"data-id":i.notification.id},[a("div",on,[a("i",{class:g(o.iconClass(i.notification)),"aria-hidden":"true"},null,2)]),a("div",{class:"flex-grow p-2",innerHTML:i.notification.text},null,8,ln),this.is_loading?(l(),r("div",un,hn)):(l(),r("div",{key:0,class:"flex-none p-2 cursor-pointer dismissable",onClick:t[1]||(t[1]=f=>o.dismiss(i.notification)),title:i.notification.dismiss_text},dn,8,rn))],10,sn))}const pn=x(Yi,[["render",mn]]),gn={props:["release"],data(){return{is_dismissed:!1,is_loading:!1}},methods:{backgroundClass:function(e){return"release background-accent flex justify-center items-center mb-2 px-2 py-2  rounded-md"},dismiss:function(e){this.is_loading=!0,axios.post(e.dismiss).then(()=>{this.is_dismissed=!0,this.emitter.emit("read_release",e)})}}},_n=["data-id"],vn={class:"flex-grow p-2"},bn=["innerHTML","href"],wn=["innerHTML"],$n=["title"],yn=a("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),kn=[yn],xn={key:1,class:"flex-none p-2"},Cn=a("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1),Dn=[Cn];function Sn(e,t,i,s,n,o){return n.is_dismissed?h("",!0):(l(),r("div",{key:0,class:g(o.backgroundClass(i.release)),"data-id":i.release.id},[a("div",vn,[a("a",{innerHTML:i.release.title,class:"font-bold cursor-pointer block w-full",href:i.release.url,target:"_blank"},null,8,bn),a("p",{innerHTML:i.release.text},null,8,wn)]),this.is_loading?(l(),r("div",xn,Dn)):(l(),r("div",{key:0,class:"flex-none p-2 cursor-pointer dismissable",onClick:t[0]||(t[0]=f=>o.dismiss(i.release)),title:i.release.dismiss_text},kn,8,$n))],10,_n))}const Tn=x(gn,[["render",Sn]]),In={directives:{clickOutside:we.directive},props:{user_id:{type:String},api:{type:String},fetch:{type:String},initials:{type:String},avatar:{type:String},campaign_id:void 0,has_alerts:{type:Boolean},pro:{type:Boolean}},components:{Campaign:Wi,Notification:pn,Release:Tn},data(){return{alert_delta:60*1e3,is_loading:!1,is_expanded:!1,has_data:!1,view_campaigns:!1,view_profile:!1,profile:{},campaigns:{},notifications:{},marketplace:{},releases:{},show_alerts:!1,is_loaded:!1}},methods:{openCampaigns:function(){this.view_campaigns=!0,this.view_profile=!1,this.loadData()},openProfile:function(){this.view_profile=!0,this.view_campaigns=!1,this.loadData()},loadData:function(){this.is_expanded=!0,!this.has_data&&(this.is_loading=!0,axios.get(this.api).then(e=>{this.profile=e.data.profile,this.campaigns=e.data.campaigns,this.notifications=e.data.notifications,this.marketplace=e.data.marketplace,this.releases=e.data.releases,this.show_alerts=e.data.has_unread,this.has_data=!0,this.is_loading=!1,this.is_loaded=!0}))},blockClass:function(e){return e?"block p-4 flex-grow items-center focus:box-shadow":"block p-4  items-center inactive cursor-pointer flex-none focus:box-shadow"},logout:function(){document.getElementById("logout-form").submit()},onClickOutside(e){this.is_expanded=!1},readRelease:function(e){let t=this.releases.releases.findIndex(i=>i.id===e.id);this.releases.releases.slice(t,1),this.updateUnread()},readNotification:function(e){let t=this.notifications.messages.findIndex(i=>i.id==e.id);this.notifications.messages.slice(t,1),this.updateUnread()},updateUnread:function(){this.notifications.messages.length===0&&this.releases.releases.length===0&&(this.show_alerts=!1)},updateAlerts:function(){let e=localStorage.getItem("last_notification-"+this.user_id),i=new Date().getTime()-60*5e3;if(!e||e<i)this.fetchAlerts();else if(this.show_alerts=localStorage.getItem("notification-has-alerts-"+this.user_id)==="true",this.queueFetch(),!this.is_loaded)return},fetchAlerts:function(){let e=new Date().getTime();localStorage.setItem("last_notification-"+this.user_id,e),axios.get(this.fetch).then(t=>{localStorage.setItem("notification-has-alerts-"+this.user_id,t.data.has_alerts),this.updateAlerts()})},queueFetch:function(){let e=this;setTimeout(function(){e.updateAlerts()}.bind(this),this.alert_delta)},showInitials:function(){return this.avatar.startsWith("/images/")},profilePictureUrl:function(){return"url("+this.avatar+")"},campaignIcon:function(){return this.pro?"fa-solid fa-grid":"fa-solid fa-grip"}},mounted(){this.emitter.on("read_release",e=>{this.readRelease(e)}),this.emitter.on("read_notification",e=>{this.readNotification(e)}),this.show_alerts=this.has_alerts,this.queueFetch()}},jn={class:"nav-switcher flex items-center justify-center h-12"},En=a("span",{class:"sr-only"},"Campaigns",-1),Mn={class:"indicator"},qn={key:0,class:"notification-badge"},Fn={key:1,class:"profile-box rounded-lg p-2 text-center font-bold"},Pn={key:0,class:"navigation-drawer h-full overflow-y fixed top-0 right-0 rounded-l-2xl shadow-lg"},Ln={key:0,class:"temporary p-8 text-center"},On=a("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1),An=[On],Hn={key:1,class:""},Kn={class:"header flex"},Nn={key:0,class:"full flex items-center"},Bn={class:"flex-none mr-4 text-2xl"},Rn={class:"flex-grow"},Un={class:"font-bold"},zn=["title"],Vn={key:0,class:"full flex items-center"},Wn={key:0,class:"flex-none mr-4 profile-box rounded-lg p-2 text-center text-uppercase font-bold"},Yn={class:"flex-grow"},Jn={class:"font-bold"},Xn=["title"],Gn={key:0,class:"flex-none profile-box rounded-lg p-2 text-center text-uppercase font-bold"},Qn={key:0,class:"profile p-5"},Zn={key:0,class:"notifications mb-5"},ea={class:"flex w-full py-2"},ta={class:"flex-grow text-uppercase font-bold"},ia={class:"flex-grow text-right"},na=["href"],aa={key:0,class:"no-notifications help-block italic"},sa={key:1,class:"releases mb-5"},oa={class:"flex w-full py-2"},la={class:"flex-grow text-uppercase font-bold"},ra={key:2,class:"marketplace mb-5"},ca={class:"flex w-full py-2"},da={class:"flex-grow text-uppercase font-bold"},ua={class:"flex-grow text-right"},fa=["href"],ha={class:"grid grid-cols-3 gap-2"},ma=["href"],pa=a("div",{class:"icon rounded-full w-14 h-14 mb-1 text-3xl inline-block aspect-square"},[a("i",{class:"fa-solid fa-palette mt-3","aria-hidden":"true"})],-1),ga={class:"text-muted text-xs"},_a=["href"],va=a("div",{class:"icon rounded-full w-14 h-14 mb-1 text-3xl inline-block aspect-square"},[a("i",{class:"fa-solid fa-columns mt-3","aria-hidden":"true"})],-1),ba={class:"text-muted text-xs"},wa=["href"],$a=a("div",{class:"icon rounded-full w-14 h-14 mb-1 text-3xl inline-block aspect-square"},[a("i",{class:"fa-solid fa-dice-d20 mt-3","aria-hidden":"true"})],-1),ya={class:"text-muted text-xs"},ka={key:3,class:"subscription mb-5"},xa={class:"text-uppercase font-bold py-2"},Ca=["href"],Da={class:"flex-none p-2"},Sa=["src","alt"],Ta={class:"flex-grow p-2"},Ia={class:"font-bold text-lg"},ja={key:0,class:"more"},Ea=a("br",null,null,-1),Ma={key:1,class:"more"},qa={class:"link"},Fa={key:4,class:"m-0 p-0 list-none"},Pa=["href"],La=a("i",{class:"fa-solid fa-cog mr-3","aria-hidden":"true"},null,-1),Oa=["href"],Aa=a("i",{class:"fa-solid fa-user mr-3","aria-hidden":"true"},null,-1),Ha=["href"],Ka=a("i",{class:"fa-solid fa-question-circle mr-3","aria-hidden":"true"},null,-1),Na=a("i",{class:"fa-solid fa-sign-out mr-3","aria-hidden":"true"},null,-1),Ba={key:5,class:"m-0 p-0 list-none"},Ra=["href"],Ua=a("i",{class:"fa-solid fa-sign-out-alt mr-3","aria-hidden":"true"},null,-1),za={key:1,class:"campaigns p-5"},Va={key:0},Wa={class:"flex w-full py-2"},Ya={class:"flex-grow text-uppercase font-bold"},Ja={key:0,class:"flex-grow text-right"},Xa=["href"],Ga={class:"grid grid-cols-2 md:grid-cols-3 gap-5"},Qa=["href"],Za={class:"text-xs text-break text-uppercase"},es=a("i",{class:"fa-solid fa-plus","aria-hidden":"true",style:{display:"none"}},null,-1),ts={key:0,class:"following"},is=a("hr",null,null,-1),ns={class:"text-uppercase"},as={class:"grid grid-cols-2 md:grid-cols-3 gap-5"},ss=["href"],os={class:"text-xs text-uppercase text-break"};function ls(e,t,i,s,n,o){const f=q("Notification"),d=q("Release"),p=q("Campaign"),u=be("click-outside");return l(),r(v,null,[a("div",jn,[a("div",{class:"campaigns inline cursor-pointer text-center px-3 text-2xl",onClick:t[0]||(t[0]=m=>o.openCampaigns()),"aria-label":"Switch campaigns",tabindex:"0",role:"button"},[a("i",{class:g(o.campaignIcon()),"aria-hidden":"true"},null,2),En]),a("div",{class:"profile inline cursor-pointer text-center text-uppercase pt-1",onClick:t[1]||(t[1]=m=>o.openProfile()),"aria-label":"Profile settings",tabindex:"0",role:"button"},[a("div",Mn,[n.show_alerts?(l(),r("span",qn)):h("",!0),o.showInitials()?(l(),r("div",Fn,c(i.initials),1)):(l(),r("div",{key:2,class:"w-9 h-9 rounded-lg cover-background",style:M({backgroundImage:o.profilePictureUrl()})},null,4))])])]),n.is_expanded?Y((l(),r("div",Pn,[n.is_loading?(l(),r("div",Ln,An)):(l(),r("div",Hn,[a("div",Kn,[a("div",{class:g(o.blockClass(n.view_campaigns)),onClick:t[2]||(t[2]=m=>o.openCampaigns()),tabindex:"0",role:"button","aria-label":"Campaign list"},[n.view_campaigns?(l(),r("div",Nn,[a("div",Bn,[a("i",{class:g(o.campaignIcon()),"aria-hidden":"true"},null,2)]),a("div",Rn,[a("div",Un,c(n.campaigns.texts.campaigns),1),a("div",null,c(n.campaigns.texts.count),1)])])):(l(),r("div",{key:1,class:"flex items-center justify-center h-full text-2xl",title:n.campaigns.texts.campaigns},[a("i",{class:g(o.campaignIcon()),"aria-hidden":"true"},null,2)],8,zn))],2),a("div",{class:g(o.blockClass(n.view_profile)),onClick:t[3]||(t[3]=m=>o.openProfile()),tabindex:"0",role:"button","aria-label":"Profile pane"},[n.view_profile?(l(),r("div",Vn,[o.showInitials()?(l(),r("div",Wn,c(i.initials),1)):(l(),r("div",{key:1,class:"flex-none mr-4 w-9 h-9 rounded-lg cover-background",style:M({backgroundImage:o.profilePictureUrl()})},null,4)),a("div",Yn,[a("div",Jn,c(n.profile.name),1),a("div",null,c(n.profile.created),1)])])):(l(),r("div",{key:1,class:"",title:n.profile.your_profile},[o.showInitials()?(l(),r("div",Gn,c(i.initials),1)):(l(),r("div",{key:1,class:"flex-none w-9 h-9 rounded-lg cover-background",style:M({backgroundImage:o.profilePictureUrl()})},null,4))],8,Xn))],2)]),n.view_profile?(l(),r("div",Qn,[n.notifications.title?(l(),r("div",Zn,[a("div",ea,[a("div",ta,c(n.notifications.title),1),a("div",ia,[a("a",{href:n.notifications.all.url},c(n.notifications.all.text),9,na)])]),(l(!0),r(v,null,y(n.notifications.messages,m=>(l(),D(f,{notification:m},null,8,["notification"]))),256)),n.notifications.messages.length===0?(l(),r("div",aa,c(n.notifications.none),1)):h("",!0)])):h("",!0),n.releases.title&&n.releases.releases.length>0?(l(),r("div",sa,[a("div",oa,[a("div",la,c(n.releases.title),1)]),(l(!0),r(v,null,y(n.releases.releases,m=>(l(),D(d,{release:m},null,8,["release"]))),256))])):h("",!0),!n.profile.is_impersonating&&n.marketplace.title?(l(),r("div",ra,[a("div",ca,[a("div",da,c(n.marketplace.title),1),a("div",ua,[a("a",{href:n.marketplace.explore.url,target:"_blank"},c(n.marketplace.explore.text),9,fa)])]),a("div",ha,[a("a",{href:n.marketplace.themes.url,class:"bordered border-solid py-2 text-center justify-center rounded-md hover:drop-shadow",target:"_blank"},[pa,a("div",null,c(n.marketplace.themes.title),1),a("div",ga,c(n.marketplace.themes.number),1)],8,ma),a("a",{href:n.marketplace.sheets.url,class:"bordered border-solid py-2 text-center justify-center rounded-md hover:drop-shadow",target:"_blank"},[va,a("div",null,c(n.marketplace.sheets.title),1),a("div",ba,c(n.marketplace.sheets.number),1)],8,_a),a("a",{href:n.marketplace.content.url,class:"bordered border-solid py-2 text-center justify-center rounded-md hover:drop-shadow",target:"_blank"},[$a,a("div",null,c(n.marketplace.content.title),1),a("div",ya,c(n.marketplace.content.number),1)],8,wa)])])):h("",!0),n.profile.is_impersonating?h("",!0):(l(),r("div",ka,[a("div",xa,c(n.profile.subscription.title),1),a("a",{class:"bordered border-solid rounded-lg flex justify-center items-center hover:drop-shadow",href:n.profile.urls.subscription},[a("div",Da,[a("img",{class:"w-16 h-16",src:n.profile.subscription.image,alt:n.profile.subscription.tier},null,8,Sa)]),a("div",Ta,[a("div",Ia,c(n.profile.subscription.tier),1),n.profile.subscription.tier!=="Kobold"?(l(),r("div",ja,[w(c(n.profile.subscription.created),1),Ea,w(" "+c(n.profile.subscription.boosters),1)])):(l(),r("div",Ma,[w(c(n.profile.subscription.call_to_action)+" ",1),a("div",qa,c(n.profile.subscription.call_to_action_2),1)]))])],8,Ca)])),n.profile.is_impersonating?(l(),r("ul",Ba,[a("li",null,[a("a",{href:n.profile.return.url,class:"p-2 mb-2"},[Ua,w(" "+c(n.profile.return.name),1)],8,Ra)])])):(l(),r("ul",Fa,[a("li",null,[a("a",{href:n.profile.urls.settings.url,class:"p-2 mb-2 block"},[La,w(" "+c(n.profile.urls.settings.name),1)],8,Pa)]),a("li",null,[a("a",{href:n.profile.urls.profile.url,class:"p-2 mb-2 block"},[Aa,w(" "+c(n.profile.urls.profile.name),1)],8,Oa)]),a("li",null,[a("a",{href:n.profile.urls.help.url,class:"p-2 mb-2 block",target:"_blank"},[Ka,w(" "+c(n.profile.urls.help.name),1)],8,Ha)]),a("li",null,[a("a",{href:"#",onClick:t[4]||(t[4]=m=>o.logout()),class:"p-2 mb-2 block"},[Na,w(" "+c(n.profile.urls.logout.name),1)])])]))])):(l(),r("div",za,[n.profile.is_impersonating?h("",!0):(l(),r("div",Va,[a("div",Wa,[a("div",Ya,c(n.campaigns.texts.campaigns),1),n.campaigns.member.length>0?(l(),r("div",Ja,[a("a",{href:n.campaigns.urls.reorder},c(n.campaigns.texts.reorder),9,Xa)])):h("",!0)]),a("div",Ga,[(l(!0),r(v,null,y(n.campaigns.member,m=>(l(),D(p,{campaign:m},null,8,["campaign"]))),256)),a("a",{href:n.campaigns.urls.new,class:"new-campaign flex items-center text-center border-dashed bordered rounded-lg h-24 p-2 overflow-hidden"},[a("span",Za,[es,w(" "+c(n.campaigns.texts.new),1)])],8,Qa)]),n.profile.is_impersonating?h("",!0):(l(),r("div",ts,[is,a("p",ns,c(n.campaigns.texts.followed),1),a("div",as,[(l(!0),r(v,null,y(n.campaigns.following,m=>(l(),D(p,{campaign:m},null,8,["campaign"]))),256)),a("a",{href:n.campaigns.urls.follow,class:"new-campaign flex items-center text-center border-dashed bordered rounded-lg h-24 p-2 overflow-hidden"},[a("span",os,c(n.campaigns.texts.follow),1)],8,ss)])]))]))]))]))])),[[u,o.onClickOutside]]):h("",!0)],64)}const rs=x(In,[["render",ls]]),cs=Re(),A=Be({});A.config.globalProperties.emitter=cs;A.component("nav-toggler",Lt);A.component("nav-search",Bi);A.component("nav-switcher",rs);A.mount("#header");$(document).ready(function(){window.kankaIsMobile=window.matchMedia("only screen and (max-width: 760px)"),window.kankaIsMobile.matches||me(),ms(),window.initForeignSelect(),he(),fs();let e=$("#delete-confirm-form");e.length>0&&e.on("keyup keypress",function(t){var i=t.keyCode||t.which;if(i===13)return t.preventDefault(),!1}),ds(),us(),le(),Oe(),ae(),ge(),pe(),hs(),gs(),$(document).on("shown.bs.modal shown.bs.popover",function(){window.initForeignSelect(),window.initTags(),ae(),me(),he(),ge(),pe(),le()})});function he(){$.isFunction($.fn.spectrum)&&$.each($(".spectrum"),function(){$(this).spectrum({preferredFormat:"hex",showInput:!0,showPalette:!0,allowEmpty:!0,appendTo:$(this).data("append-to")??null})})}function me(){$('[data-toggle="tooltip"]').tooltip(),window.ajaxTooltip()}function ds(){let e=$(".list-treeview");if(e.length===0)return;let t=e.data("url");$.each($(".table-nested > tbody > tr"),function(){let i=$(this).data("children");parseInt(i)>0&&($(this).addClass("tr-hover cursor-pointer"),$(this).on("click",function(s){let n=$(s.target);s.target.type!=="checkbox"&&n.data("tree")!=="escape"&&(window.location=t+"?parent_id="+$(this).data("id"))}))})}function us(){let e=$(".nav-tabs li a");e.click(function(i){i.preventDefault(),$(this).data("url")||$(this).tab("show")}),e.on("shown.bs.tab",function(i){i.preventDefault();let s=$(i.target).attr("href").substr(1),n=$(i.target).attr("ajax-modal"),o=$(i.target).data("nohash");if(n&&n==="ajax-modal"||o)return!0;window.location.hash="tab_"+s});let t=window.location.hash.replace("tab_","");$('ul.nav-tabs > li > a[href="'+t+'"]').tab("show")}function pe(){$.each($(".img-delete"),function(){$(this).unbind("click").click(function(e){e.preventDefault(),$("input[name="+$(this).data("target")+"]")[0].value=1,$(this).parent().parent().hide()})})}function ae(){$(".pagination-ajax-links a").on("click",function(e){e.preventDefault();var t=$(".pagination-ajax-body");return t.find(".loading").show(),t.find(".pagination-ajax-content").hide(),$.ajax($(this).attr("href")).done(function(i){t.parent().html(i),ae()}),!1})}function ge(){$(".btn-dynamic-delete").popover({html:!0,placement:"top",sanitize:!1}),$('a[data-toggle="delete-form"]').unbind("click").click(function(e){e.preventDefault();let t=$(this).data("target");$(t).submit()}),$(".btn-popover").popover({html:!0,placement:"bottom",sanitize:!1,trigger:"focus"})}function fs(){$(".submenu-switcher").change(function(e){e.preventDefault();let t=$(this).find(":selected");window.location.href=t.data("route")})}function hs(){$('[data-toggle="dialog"]').click(function(e){e.preventDefault();let t=$(this).data("target");t=document.getElementById(t),t.showModal(),t.addEventListener("click",function(i){let s=t.getBoundingClientRect();!(s.top<=i.clientY&&i.clientY<=s.top+s.height&&s.left<=i.clientX&&i.clientX<=s.left+s.width)&&i.target.tagName==="DIALOG"&&t.close()})}),$('[data-toggle="dialog-ajax"]').click(function(e){e.preventDefault();let t=$(this).data("target"),i=$(this).data("url");t=document.getElementById(t),t.showModal(),t.addEventListener("click",function(s){let n=t.getBoundingClientRect();!(n.top<=s.clientY&&s.clientY<=n.top+n.height&&n.left<=s.clientX&&s.clientX<=n.left+n.width)&&s.target.tagName==="DIALOG"&&t.close()}),$.ajax({url:i}).done(function(s){$(t).html(s).show(),$(".btn-manage-perm").click(function(n){n.preventDefault(),t.close();let o=$(this).data("target");$(o).click()}),$("#quick-privacy-select").change(function(){let n=$(this).data("url");$.ajax({url:n,type:"POST"}).done(function(o){window.showToast(o.toast),o.status?$("body").removeClass("kanka-entity-private"):$("body").addClass("kanka-entity-private")})})})})}function ms(){let e=0;const t={window:$(window).height(),header:$("header").length>0?$("header").outerHeight():0,footer:$(".main-footer").length>0?$(".main-footer").outerHeight():0,sidebar:$(".main-sidebar .sidebar").length>0?$(".main-sidebar .sidebar").height():0,controlSidebar:e};let i=ps(t),s=$(".content-wrapper");i===t.controlSidebar?s.css("min-height",i):i===t.window?s.css("min-height",i-t.header-t.footer):s.css("min-height",i-t.header)}function ps(e){let t=0;return Object.keys(e).forEach(i=>{e[i]>t&&(t=e[i])}),t}function gs(){$('.campaign-head[data-toggle="popover"]').popover()}
