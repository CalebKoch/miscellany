var t;$(document).ready(function(){a(),$(document).on("shown.bs.modal shown.bs.popover",function(){a()})});function a(){let e=$(".ajax-subform");e.length!==0&&(e.off("submit"),e.on("submit",function(f){if($(this).attr("is-valid"))return!0;window.entityFormHasUnsavedChanges=!1,f.preventDefault(),t=$(this),t.find(".submit-group").hide(),t.find(".submit-animation").show();let u=new FormData(this);$.ajax({url:$(this).attr("action"),method:$(this).attr("method"),data:u,cache:!1,contentType:!1,processData:!1,async:!1}).done(function(){t.attr("is-valid",!0),t.off("submit"),t.submit()}).fail(function(r){if(t.find(".input-error").removeClass("input-error"),t.find(".text-error").remove(),r.status===503){window.showToast(r.responseJSON.message,"toast-error"),n(t);return}r.status===403&&($("#entity-form-403-error").show(),n(t));let o=r.responseJSON.errors;Object.keys(o).forEach(function(s){$('[name="'+s+'"]').length>0&&t.find('[name="'+s+'"]').addClass("input-error").parent().append('<div class="text-error">'+o[s][0]+"</div>")});let m=Object.keys(o)[0],i=t.find('[name="'+m+'"]');i.length>0&&i.focus(),n(t)})}))}function n(e){e.find(".submit-group").show(),e.find(".submit-animation").hide()}
