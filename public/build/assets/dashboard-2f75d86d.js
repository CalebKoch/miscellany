import{S as l}from"./sortable.esm-0d19b1d3.js";var d=new IntersectionObserver(function(t){t.forEach(e=>{e.isIntersecting&&f(t[0].target)})},{threshold:[0]});$(document).ready(function(){$("[data-render]").length>0&&document.querySelectorAll("[data-render]").forEach(t=>{t&&d.observe(t)}),$(".preview-switch").click(function(t){t.preventDefault();let e=$("#widget-preview-body-"+$(this).data("widget"));e.hasClass("max-h-52")?(e.removeClass("max-h-52"),$(this).html('<i class="fa-solid fa-chevron-up"></i>'),$(this).parent().find(".gradient-to-base-100").hide()):(e.addClass("max-h-52"),$(this).html('<i class="fa-solid fa-chevron-down"></i>'),$(this).parent().find(".gradient-to-base-100").show())}),$(".campaign-dashboard-widgets").length===1&&r(),s(),a(),h(),u(),m()});const r=()=>{let t=document.getElementById("widgets");new l(t,{handle:".handle",onEnd:function(e){$.post({url:$("#widgets").data("url"),dataType:"json",data:$('input[name="widgets[]"]').serialize()}).done(function(n){n.success&&n.message&&window.showToast(n.message)})}}),$(document).on("shown.bs.modal",function(){$("#summernote-config").length>0&&window.initSummernote(),$.each($('[data-img="delete"]'),function(){$(this).click(function(n){n.preventDefault(),$("input[name="+$(this).data("target")+"]")[0].value=1,$(this).parent().parent().hide()})})})},s=()=>{document.querySelectorAll(".widget-recent-more").forEach(e=>{e.addEventListener("click",c)})};function c(t){t.preventDefault(),$(this).find(".spinner").show(),$(this).find("span").hide(),$.ajax({url:$(this).data("url"),context:this}).done(function(e){$(this).closest(".widget-recent-list").append(e),$(this).remove(),s(),window.ajaxTooltip()})}const a=()=>{$(".widget-calendar-switch").unbind("click").click(function(t){t.preventDefault();let e=$(this).data("url"),n=$(this).data("widget");$("#widget-body-"+n).hide(),$("#widget-loading-"+n).show(),$.ajax({url:e,method:"POST",context:this}).done(function(i){if(!i)return;let o=$(this).data("widget");$("#widget-loading-"+o).hide(),$("#widget-body-"+o).html(i).show(),$(document).trigger("shown.bs.modal"),a()})})},h=()=>{const t=$("#campaign-follow"),e=$("#campaign-follow-text");if(t.length!==1)return;t.data("following")?e.html(t.data("unfollow")):e.html(t.data("follow")),t.show(),t.click(function(i){i.preventDefault(),$.post({url:$(this).data("url"),method:"POST"}).done(function(o){o.following?e.html(t.data("unfollow")):e.html(t.data("follow"))})})},u=()=>{$.each($('[data-toggle="preview"]'),function(){$(this).height()===parseInt($(this).css("max-height"))?$(this).next().removeClass("hidden"):$(this).removeClass("pinned-entity preview")})};function f(t){t=$(t),$.ajax({url:t.data("render"),context:this}).done(function(e){let n=t.data("id");$("#widget-loading-"+n).hide(),$("#widget-body-"+n).html(e).show(),$(document).trigger("shown.bs.modal"),a()})}function m(){document.querySelectorAll("[data-pulse]").forEach(t=>{t.addEventListener("click",w)})}function w(t){t.preventDefault();let e=document.querySelector(this.dataset.pulse),n=this.dataset.content;window.showTooltip(e,{content:n,theme:"kanka",placement:"bottom",allowHTML:!0,arrow:!0,interactive:!0,trigger:"manual"})}
