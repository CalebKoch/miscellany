import{d as nr}from"./mention-6dbb4e38.js";import{S as si}from"./sortable.esm-be94e56d.js";import{_ as $e,c as m,a as c,t as y,o as h,n as Qe,w as Gt,b as T,F as U,r as te,d as ee,e as H,f as Oe,g as Ae,h as Jt,i as ir,v as rr,j as St,k as li,l as or}from"./_plugin-vue_export-helper-c420bb3b.js";import{m as ar}from"./mitt-f7ef348c.js";import{v as ci}from"./v-click-outside.umd-d5c5f7b0.js";import"./_commonjsHelpers-725317a4.js";$(document).ready(function(){window.initTags=function(){$.each($(".form-tags"),function(){$(this).hasClass("select2-hidden-accessible")||$(this).select2({tags:$(this).data("allow-new"),allowClear:$(this).data("allow-clear"),dropdownParent:$(this).data("dropdown-parent")||"",minimumInputLength:0,ajax:{quietMillis:500,delay:500,url:$(this).data("url"),dataType:"json",data:function(e){return{q:$.trim(e.term)}},processResults:function(e){return{results:e}},cache:!0},createTag:function(e){var t=$.trim(e.term);return t===""?null:{id:t,text:t,newTag:!0}},templateResult:function(e){var t=$("<span class='block grow text-left'>"+e.text+"</span>");return e.colour&&(t=$("<span class='flex gap-2 items-center text-left'><span class='rounded-full flex-none w-6 h-6 "+e.colour+"' /></span><span class='grow'>"+e.text+"</span></span>")),t},templateSelection:function(e,t){if(e.newTag)return $('<span class="new-tag" title="'+$("#tags").data("new-tag")+'">'+e.text+' <i class="fa-solid fa-plus-circle" aria-hidden="true"></i></span>');let n=$(e.element);return e.colour?$(t).addClass(e.colour):n.data("colour")&&$(t).addClass(n.data("colour")),$(t).addClass("text-left"),e.text}})})},window.initTags()});/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/ca",[],function(){return{errorLoading:function(){return"La càrrega ha fallat"},inputTooLong:function(t){var n=t.input.length-t.maximum,r="Si us plau, elimina "+n+" car";return r+=n==1?"àcter":"àcters"},inputTooShort:function(t){var n=t.minimum-t.input.length,r="Si us plau, introdueix "+n+" car";return r+=n==1?"àcter":"àcters"},loadingMore:function(){return"Carregant més resultats…"},maximumSelected:function(t){var n="Només es pot seleccionar "+t.maximum+" element";return t.maximum!=1&&(n+="s"),n},noResults:function(){return"No s'han trobat resultats"},searching:function(){return"Cercant…"},removeAllItems:function(){return"Treu tots els elements"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/de",[],function(){return{errorLoading:function(){return"Die Ergebnisse konnten nicht geladen werden."},inputTooLong:function(t){return"Bitte "+(t.input.length-t.maximum)+" Zeichen weniger eingeben"},inputTooShort:function(t){return"Bitte "+(t.minimum-t.input.length)+" Zeichen mehr eingeben"},loadingMore:function(){return"Lade mehr Ergebnisse…"},maximumSelected:function(t){var n="Sie können nur "+t.maximum+" Element";return t.maximum!=1&&(n+="e"),n+=" auswählen"},noResults:function(){return"Keine Übereinstimmungen gefunden"},searching:function(){return"Suche…"},removeAllItems:function(){return"Entferne alle Elemente"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var n=t.input.length-t.maximum,r="Please delete "+n+" character";return n!=1&&(r+="s"),r},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(t){var n="You can only select "+t.maximum+" item";return t.maximum!=1&&(n+="s"),n},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/es",[],function(){return{errorLoading:function(){return"No se pudieron cargar los resultados"},inputTooLong:function(t){var n=t.input.length-t.maximum,r="Por favor, elimine "+n+" car";return r+=n==1?"ácter":"acteres"},inputTooShort:function(t){var n=t.minimum-t.input.length,r="Por favor, introduzca "+n+" car";return r+=n==1?"ácter":"acteres"},loadingMore:function(){return"Cargando más resultados…"},maximumSelected:function(t){var n="Sólo puede seleccionar "+t.maximum+" elemento";return t.maximum!=1&&(n+="s"),n},noResults:function(){return"No se encontraron resultados"},searching:function(){return"Buscando…"},removeAllItems:function(){return"Eliminar todos los elementos"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/fr",[],function(){return{errorLoading:function(){return"Les résultats ne peuvent pas être chargés."},inputTooLong:function(t){var n=t.input.length-t.maximum;return"Supprimez "+n+" caractère"+(n>1?"s":"")},inputTooShort:function(t){var n=t.minimum-t.input.length;return"Saisissez au moins "+n+" caractère"+(n>1?"s":"")},loadingMore:function(){return"Chargement de résultats supplémentaires…"},maximumSelected:function(t){return"Vous pouvez seulement sélectionner "+t.maximum+" élément"+(t.maximum>1?"s":"")},noResults:function(){return"Aucun résultat trouvé"},searching:function(){return"Recherche en cours…"},removeAllItems:function(){return"Supprimer tous les éléments"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/hu",[],function(){return{errorLoading:function(){return"Az eredmények betöltése nem sikerült."},inputTooLong:function(t){return"Túl hosszú. "+(t.input.length-t.maximum)+" karakterrel több, mint kellene."},inputTooShort:function(t){return"Túl rövid. Még "+(t.minimum-t.input.length)+" karakter hiányzik."},loadingMore:function(){return"Töltés…"},maximumSelected:function(t){return"Csak "+t.maximum+" elemet lehet kiválasztani."},noResults:function(){return"Nincs találat."},searching:function(){return"Keresés…"},removeAllItems:function(){return"Távolítson el minden elemet"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/it",[],function(){return{errorLoading:function(){return"I risultati non possono essere caricati."},inputTooLong:function(t){var n=t.input.length-t.maximum,r="Per favore cancella "+n+" caratter";return r+=n!==1?"i":"e"},inputTooShort:function(t){return"Per favore inserisci "+(t.minimum-t.input.length)+" o più caratteri"},loadingMore:function(){return"Caricando più risultati…"},maximumSelected:function(t){var n="Puoi selezionare solo "+t.maximum+" element";return t.maximum!==1?n+="i":n+="o",n},noResults:function(){return"Nessun risultato trovato"},searching:function(){return"Sto cercando…"},removeAllItems:function(){return"Rimuovi tutti gli oggetti"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/nl",[],function(){return{errorLoading:function(){return"De resultaten konden niet worden geladen."},inputTooLong:function(t){return"Gelieve "+(t.input.length-t.maximum)+" karakters te verwijderen"},inputTooShort:function(t){return"Gelieve "+(t.minimum-t.input.length)+" of meer karakters in te voeren"},loadingMore:function(){return"Meer resultaten laden…"},maximumSelected:function(t){var n=t.maximum==1?"kan":"kunnen",r="Er "+n+" maar "+t.maximum+" item";return t.maximum!=1&&(r+="s"),r+=" worden geselecteerd"},noResults:function(){return"Geen resultaten gevonden…"},searching:function(){return"Zoeken…"},removeAllItems:function(){return"Verwijder alle items"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/pl",[],function(){var t=["znak","znaki","znaków"],n=["element","elementy","elementów"],r=function(i,o){return i===1?o[0]:i>1&&i<=4?o[1]:i>=5?o[2]:void 0};return{errorLoading:function(){return"Nie można załadować wyników."},inputTooLong:function(i){var o=i.input.length-i.maximum;return"Usuń "+o+" "+r(o,t)},inputTooShort:function(i){var o=i.minimum-i.input.length;return"Podaj przynajmniej "+o+" "+r(o,t)},loadingMore:function(){return"Trwa ładowanie…"},maximumSelected:function(i){return"Możesz zaznaczyć tylko "+i.maximum+" "+r(i.maximum,n)},noResults:function(){return"Brak wyników"},searching:function(){return"Trwa wyszukiwanie…"},removeAllItems:function(){return"Usuń wszystkie przedmioty"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/pt-BR",[],function(){return{errorLoading:function(){return"Os resultados não puderam ser carregados."},inputTooLong:function(t){var n=t.input.length-t.maximum,r="Apague "+n+" caracter";return n!=1&&(r+="es"),r},inputTooShort:function(t){return"Digite "+(t.minimum-t.input.length)+" ou mais caracteres"},loadingMore:function(){return"Carregando mais resultados…"},maximumSelected:function(t){var n="Você só pode selecionar "+t.maximum+" ite";return t.maximum==1?n+="m":n+="ns",n},noResults:function(){return"Nenhum resultado encontrado"},searching:function(){return"Buscando…"},removeAllItems:function(){return"Remover todos os itens"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/ru",[],function(){function t(n,r,i,o){return n%10<5&&n%10>0&&n%100<5||n%100>20?n%10>1?i:r:o}return{errorLoading:function(){return"Невозможно загрузить результаты"},inputTooLong:function(n){var r=n.input.length-n.maximum,i="Пожалуйста, введите на "+r+" символ";return i+=t(r,"","a","ов"),i+=" меньше"},inputTooShort:function(n){var r=n.minimum-n.input.length,i="Пожалуйста, введите ещё хотя бы "+r+" символ";return i+=t(r,"","a","ов")},loadingMore:function(){return"Загрузка данных…"},maximumSelected:function(n){var r="Вы можете выбрать не более "+n.maximum+" элемент";return r+=t(n.maximum,"","a","ов")},noResults:function(){return"Совпадений не найдено"},searching:function(){return"Поиск…"},removeAllItems:function(){return"Удалить все элементы"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/sk",[],function(){var t={2:function(n){return n?"dva":"dve"},3:function(){return"tri"},4:function(){return"štyri"}};return{errorLoading:function(){return"Výsledky sa nepodarilo načítať."},inputTooLong:function(n){var r=n.input.length-n.maximum;return r==1?"Prosím, zadajte o jeden znak menej":r>=2&&r<=4?"Prosím, zadajte o "+t[r](!0)+" znaky menej":"Prosím, zadajte o "+r+" znakov menej"},inputTooShort:function(n){var r=n.minimum-n.input.length;return r==1?"Prosím, zadajte ešte jeden znak":r<=4?"Prosím, zadajte ešte ďalšie "+t[r](!0)+" znaky":"Prosím, zadajte ešte ďalších "+r+" znakov"},loadingMore:function(){return"Načítanie ďalších výsledkov…"},maximumSelected:function(n){return n.maximum==1?"Môžete zvoliť len jednu položku":n.maximum>=2&&n.maximum<=4?"Môžete zvoliť najviac "+t[n.maximum](!1)+" položky":"Môžete zvoliť najviac "+n.maximum+" položiek"},noResults:function(){return"Nenašli sa žiadne položky"},searching:function(){return"Vyhľadávanie…"},removeAllItems:function(){return"Odstráňte všetky položky"}}}),e.define,e.require})();$(document).ready(function(){window.initForeignSelect=function(){$("select.select2").length!==0&&($.each($("select.select2"),function(e){if($(this).hasClass("select2-hidden-accessible"))return;if($(this).hasClass("campaign-genres")){$(this).select2({tags:!1,allowClear:!0,dropdownParent:"",width:"100%",maximumSelectionLength:3});return}let t=$(this).data("allow-clear"),n=$(this).data("dropdown-parent");$(this).select2({tags:!1,placeholder:$(this).data("placeholder"),allowClear:t||!0,language:$(this).data("language"),minimumInputLength:0,dropdownParent:n||"",width:"100%",ajax:{delay:500,quietMillis:500,url:$(this).data("url"),dataType:"json",data:function(r){return{q:$.trim(r.term)}},processResults:function(r){return{results:r}},error:function(r){return console.log("error",r),r.status===503&&window.showToast(r.responseJSON.message,"error"),{results:[]}},cache:!0},templateResult:function(r){var i="";return r.image?i=$("<span class='flex gap-2 items-center text-left'><img src='"+r.image+"' class='rounded-full flex-none w-6 h-6'/><span class='grow'>"+r.text+"</span></span>"):i=$("<span>"+r.text+"</span>"),i},createTag:function(r){return null}})}),$("select.select2-local").select2({placeholder:$(this).data("placeholder"),language:$(this).data("language"),allowClear:!0}),$("select.select2-colour").select2({allowClear:!1,templateResult:Sn,templateSelection:Sn}))}});function Sn(e){return e.id==="none"?e.text:$('<span><div class="badge label bg-'+e.id+'"> </div>'+e.text+"</span>")}$(document).ready(function(){$.each($("form"),function(){$(this).data("shortcut")&&lr(this)}),sr(),En(),$(document).on("shown.bs.modal",()=>{En()})});function sr(){$(document).bind("keydown",function(e){let t=$(e.target),n=$("#entity-modal"),r=$(".quick-creator-button"),i=$('[data-keyboard="edit"]');if(e.key==="]"){if(kt(t))return;$(".sidebar-toggle").click().blur()}else{if(e.key==="k")return kt(t)?void 0:($("#entity-lookup").focus(),!1);if(e.key==="n"&&!(e.ctrlKey||e.metaKey)&&!e.altKey&&r.length>0){if(kt(t)||(n.data("bs.modal")||{}).isShown)return;r[0].click()}else if(e.key==="e"&&!(e.ctrlKey||e.metaKey)&&i.length===1){if(kt(t)||(n.data("bs.modal")||{}).isShown)return;i[0].click()}else e.key==="Escape"&&n.has(".qq-modal-selection").length===1&&n.modal("hide")}})}function kt(e){return e.length===0?!1:e.is("input")||e.is("select")||e.is("textarea")||e.attr("contentEditable")==="true"||e.hasClass("CodeMirror")}function lr(e){$(document).bind("keydown",function(t){if((t.ctrlKey||t.metaKey)&&t.key.toLowerCase()==="s")return window.entityFormHasUnsavedChanges=!1,t.shiftKey?Nt("submit-update"):t.altKey&&Nt("submit-new"),$(e).submit(),!1;if((t.ctrlKey||t.metaKey)&&t.altKey&&t.key==="c")return window.entityFormHasUnsavedChanges=!1,Nt("submit-copy"),$(e).submit(),!1})}function Nt(e){let t=$("#form-submit-main");t&&(t.attr("name",e),$("#submit-mode").attr("name",e))}const En=()=>{$('input[data-paste="fontawesome"]').on("paste",function(e){e.preventDefault();let t;if(e.clipboardData||e.originalEvent.clipboardData?t=(e.originalEvent||e).clipboardData.getData("text/plain"):window.clipboardData&&(t=window.clipboardData.getData("Text")),t.startsWith('<i class="fa')||t.startsWith('<i class="ra')){let n=$(t).attr("class");if(n){$(this).val(n);return}}$(this).val(t)})};function Et(){$('[data-toggle="ajax-modal"]').unbind("click").click(function(e){return e.preventDefault(),Et=$(this),$.ajax({url:$(this).data("url")}).done(function(t,n,r){if(t){let i={},o=$(Et).data("target"),s=$(Et).data("backdrop");s&&(i.backdrop=s),$(o).find(".modal-content").html(t),$(o).modal(i)}}).fail(function(t,n,r){}),!1})}var rt,ze,Zt,G,_e,xe,se,nt,Dt,je,Ot;$(document).ready(function(){yr(),Et(),ui(),pr(),Ot=$('#form-entry input[name="name"]'),Ot.length===1&&ur(),dr(),fr(),fi(),di(),cr(),hr(),pi(),hi(),gr(),br()});function cr(){$(document).on("shown.bs.modal shown.bs.popover",function(){di(),ui(),fi()}),$("#campaign-delete-confirm").on("shown.bs.modal",function(){$("#campaign-delete-form").focus()})}function ur(){Ot.data("live-disabled")||Ot.focusout(function(){if(!$(this).val())return;let e=$(this).data("duplicate"),t=$(e),n=$(this).data("live")+"?q="+encodeURIComponent($(this).val())+"&type="+$(this).data("type")+"&exclude="+$(this).data("id");t.hide();const r=t.find(".duplicates");fetch(n).then(i=>i.json()).then(i=>{r.innerHTML="",i.forEach(o=>{let s=document.createElement("a");s.href=o.url,s.text=o.name,r.append(s)}),i.length>0&&t.show()})})}function ui(){if(rt=$(".form-submit-actions"),rt.length===0)return;let e=$("#form-submit-main"),t=$("#submit-mode");if(t===void 0)throw new Error("No submit mode hidden input found");$.each(rt,function(){$(this).data("loaded")!==1&&($(this).data("loaded",1),$(this).unbind("click").on("click",function(){return t.attr("name",$(this).data("action")),e.trigger("click"),!1}))})}function dr(){$.each($("form"),function(){$(this).on("submit",function(){window.entityFormHasUnsavedChanges=!1;var e=$(this).find(".btn-primary");return e.length>0&&($.each(e,function(){$(this).parent().hasClass("dropdown")||$(this).hasClass("quick-creator-subform")?$(this).prop("disabled",!0):$(this).prop("disabled",!0).addClass("loading")}),$(this).append('<input type="hidden" name="'+$("#form-submit-main").attr("name")+'" />')),!0})})}function fr(){ze=$("#entity-calendar-form-add"),G=$('[name="calendar_id"]'),$(".entity-calendar-modal-form"),je=$(".entity-calendar-subform"),nt=$("#entity-calendar-form-cancel"),Zt=$(".entity-calendar-form"),xe=$('input[name="calendar_year"]'),_e=$('select[name="calendar_month"]'),se=$('select[name="calendar_day"]'),Dt=$(".entity-calendar-loading"),ze.length===1&&(ze.on("click",function(e){e.preventDefault(),ze.hide(),Zt.show();let t=$(this).data("default-calendar");return t&&(G.val(t),nt.show(),je.show(),At(t)),!1}),nt.on("click",function(e){e.preventDefault(),G.val(null),nt.hide(),en()})),G.length===1&&G.on("change",function(){if(je.hide(),!$(this).val()){en();return}xe=$('input[name="calendar_year"]'),_e=$('select[name="calendar_month"]'),se=$('select[name="calendar_day"]'),xe.length===0&&$('input[name="year"]').length===1&&(xe=$('input[name="year"]'),_e=$('select[name="month"]'),se=$('input[name="day"]')),At(G.val())}),wr()}function di(){$("#entity-calendar-modal-add").length!==0&&(ze=$("input[name=calendar-data-url]"),G=$('select[name="calendar_id"]'),xe=$('input[name="year"]'),_e=$('select[name="month"]'),se=$('input[name="day"]'),Dt=$(".entity-calendar-loading"),je=$(".entity-calendar-subform"),G.on("change",function(){if(je.hide(),!G.val()){en();return}At(G.val())}),G.val()&&(nt.show(),je.show(),At(G.val())),$('.entity-calendar-subform input[name="length"]').focusout(function(){if(!$(this).val())return;let e=$(this).data("url").replace("/0/","/"+G.val()+"/"),t={day:se.val(),month:_e.val(),year:xe.val(),length:$(this).val()};$.ajax(e,{data:t}).done(function(n){n.overflow==!0?$(".length-warning").show():$(".length-warning").hide()})}))}const At=e=>{Dt.show(),e=parseInt(e);var t=$('input[name="calendar-data-url"]').data("url").replace("/0/","/"+e+"/");fetch(t).then(n=>n.json()).then(n=>{let r=se.val();xe.html(""),_e.html(""),se.html("");let i=1,o=1;r||(r=n.current.day);let s=parseInt(n.current.month);$.each(n.months,function(l){let u=n.months[l],f=i===s?' selected="selected"':"";_e.append('<option value="'+i+'" data-length="'+u.length+'" '+f+">"+this.name+"</option>"),i===s&&(o=u.length),i++});for(let l=1;l<o;l++){let u=l==r?' selected="selected"':"";se.append('<option value="'+l+'" '+u+">"+l+"</option>")}Dt.hide(),je.show(),xe.val(n.current.year),$("select.reminder-periodicity option").remove(),$.each(n.recurring,function(l,u){$("select.reminder-periodicity").append('<option value="'+l+'">'+u+"</option>")}),$('input[name="length"]').val(1),n.length===1&&_e.val(n[0].id),mr()})};function en(){Zt.hide(),ze.show(),$('input[name="calendar_day"]').val(null),$('input[name="calendar_month"]').val(null),$('input[name="calendar_year"]').val(null),$('input[name="calendar_id"]').val(null)}function pr(){if(rt=$('form[data-unload="1"]'),rt.length===0)return;let e=$("#form-submit-main");$(document).on("change",":input",function(){$(this).data("skip-unsaved")||(window.entityFormHasUnsavedChanges=!0)}),e.length===1&&$(window).bind("beforeunload",function(t){if(window.entityFormHasUnsavedChanges)return"Unsaved data warning"})}function fi(){$('form[data-maintenance="1"]').each(function(){$(this).data("with-maintenance")!==!0&&($(this).data("with-maintenance",!0),$(this).submit(function(e){if($(this).data("checked-maintenance")===!0)return!0;e.preventDefault();let t={url:$(this).attr("action"),method:$(this).attr("method"),data:$(this).serialize(),context:this};if($(this).find('input[type="file"]').not(".note-image-input").length>0){let n=new FormData(this);t={url:$(this).attr("action"),method:$(this).attr("method"),data:n,cache:!1,contentType:!1,processData:!1,context:this}}$.ajax(t).done(function(){$(this).data("checked-maintenance",!0).submit()}).fail(function(n){window.formErrorHandler(n,this)})}))})}function hr(){$(".permission-toggle").change(function(){let t="input[data-action="+$(this).data("action")+"]";$(this).prop("checked")?$(t).prop("checked",!0):$(t).prop("checked",!1)})}function mr(){$.isFunction($.fn.spectrum)&&$(".spectrum").spectrum({preferredFormat:"hex",showInput:!0,showPalette:!0,allowEmpty:!0})}function pi(){$(".entity-story-block .collapse"),$(".entity-story-block .element-toggle"),$(".btn-post-collapse").unbind("click").click(function(){return document.querySelectorAll(".element-toggle").forEach(t=>{t.classList.add("animate-collapsed"),document.querySelector(t.dataset.target).classList.add("h-0")}),!1}),$(".btn-post-expand").unbind("click").click(function(){return document.querySelectorAll(".element-toggle").forEach(t=>{t.classList.remove("animate-collapsed"),document.querySelector(t.dataset.target).classList.remove("h-0")}),!1})}function hi(){$(".story-load-more").click(function(e){e.preventDefault();let t=$(this);return $(this).addClass("loading"),vr($(this).data("url")).then(n=>{t.parent().remove(),$(".entity-posts").append(n),hi(),pi(),$(document).trigger("shown.bs.modal")}).catch(()=>{t.removeClass("loading")}),!1})}async function vr(e){return await(await fetch(e)).text()}function gr(){$(".domain-trust").click(function(){let e="kanka_trusted_domains",t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");t=t?t[2]:"";let n=$(this).data("domain");t.includes(n)||(t&&(t+="|"),t+=n);let r=new Date;r.setTime(r.getTime()+30*24*60*60*1e3),document.cookie=e+"="+t+";expires="+r.toUTCString()+";sameSite=Strict"})}function yr(){$(".dynamic-row-add").on("click",function(e){e.preventDefault();let t=$(this).data("target"),n=$(this).data("template");return $("."+t).append('<div class="">'+$("#"+n).html()+"</div>"),Ln(),$(document).trigger("shown.bs.modal"),!1}),Ln()}function Ln(){$.each($(".dynamic-row-delete"),function(){$(this).data("init")!==1&&$(this).data("init",1).on("click",function(e){e.preventDefault(),$(this).closest(".parent-delete-row").remove()}).on("keydown",function(e){e.key==="Enter"&&$(this).click()})})}function br(){$('input[data-toggle="entity-privacy"]').change(function(){let e=$("#entity-is-private");$(this).prop("checked")?e.show():e.hide()})}function wr(){$('select[name="calendar_month"]').change(function(){let e=$(this).find(":selected").data("length");xr(e)})}function xr(e){let t=se.val();t>e&&(t=e),se.html("");for(let n=1;n<=e;n++){let r=n==t?' selected="selected"':"";se.append('<option value="'+n+'" '+r+">"+n+"</option>")}}var tn;$(document).ready(function(){Dn(),$(document).on("shown.bs.modal shown.bs.popover",function(){Dn()}),tn=$(".post-perm-add"),tn.length!==0&&(_r(),mi())});function _r(){tn.on("click",function(e){e.preventDefault();let t=$(this).data("type"),n=$('select[name="'+t+'"]');if(!n||!n.val())return!1;let r=n.find(":selected")[0],i=$("#post-perm-"+t+"-template").clone().removeClass("hidden").removeAttr("id"),o=i.html().replace(/\$SELECTEDID\$/g,n.val()).replace(/\$SELECTEDNAME\$/g,r.text);return i.html(o).insertBefore($("#post-perm-target")),document.getElementById("post-new-"+t).close(),mi(),n.val("").trigger("change"),!1})}function mi(){$.each($(".post-delete-perm"),function(){$(this).unbind("click"),$(this).on("click",function(){$(this).closest(".grid").remove()})})}const Dn=()=>{$("form.post-visibility").on("submit",function(e){return e.preventDefault(),$.post({url:$(this).attr("action"),data:{visibility_id:$(this).find('[name="visibility_id"]').val()}}).done(function(t){document.getElementById("primary-dialog").close(),$("#visibility-icon-"+t.post_id).html(t.icon),window.showToast(t.toast)}),!1})};var On;$(document).ready(function(){On=$("#calendar-year-switcher"),On.length===1&&($("#calendar-year-switcher-field"),$("#add-calendar-event"),$r()),$(document).on("shown.bs.modal",function(){An()}),$('select[name="recurring_periodicity"]').length===1&&An(),kr()});function $r(){$(".calendar-event-block").each(function(){$(this).data("toggle")!=="dialog"&&$(this).data("url")&&$(this).click(function(){window.location=$(this).data("url")})})}function An(){$('select[name="recurring_periodicity"]').change(function(){this.value?$(".field-recurring-until").show():$(".field-recurring-until").hide()}),$("#calendar-action-existing").click(function(e){e.preventDefault(),$("#calendar-event-first").hide(),$(".calendar-new-event-field").hide(),$("#calendar-event-subform").fadeToggle(),$("#calendar-event-submit").toggle()}),$("#calendar-action-new").click(function(e){e.preventDefault(),$("#calendar-event-first").hide(),$(".calendar-existing-event-field").hide(),$("#calendar-event-subform").fadeToggle(),$("#calendar-event-submit").toggle()}),$("#calendar-event-switch").click(function(e){e.preventDefault(),$("#calendar-event-subform").hide(),$("#calendar-event-first").fadeToggle(),$(".calendar-existing-event-field").show(),$(".calendar-new-event-field").show(),$("#calendar-event-submit").toggle()})}function kr(){$('[data-shortcut="previous"]').length!==0&&$(document).bind("keydown",function(e){(e.ctrlKey||e.metaKey)&&e.which===37?$('[data-shortcut="previous"]').addClass("loading")[0].click():(e.ctrlKey||e.metaKey)&&e.which===39&&$('[data-shortcut="next"]').addClass("loading")[0].click()})}const vi=document.querySelector("dialog#edit-warning"),nn=300*1e3;let gi,rn=!0;$(document).ready(function(){if(!vi)return;let e=document.querySelector('input[name="edit-warning"]');window.openDialog("edit-warning",e.dataset.url),$(document).on("shown.bs.modal",function(){Cr()}),Tr()});function Cr(){rn=!1,$("#entity-edit-warning-ignore").click(function(e){e.preventDefault(),rn=!0,$.ajax({url:$(this).data("url"),type:"POST",context:this}).done(function(){vi.close()})})}function Tr(){let e=$("#editing-keep-alive");e.length!==0&&(gi=e.data("url"),setTimeout(on,nn))}function on(){if(!rn){setTimeout(on,nn);return}$.ajax({url:gi,type:"POST"}).done(function(){setTimeout(on,nn)})}var et;let an,jn,jt;$(document).ready(function(){$(document).on("shown.bs.modal shown.bs.popover",function(){It()}),$(".quick-creator-subform").click(function(){$(document).on("shown.bs.modal",function(){mn()}),window.openDialog("primary-dialog",$(this).data("url"))})});function It(){an=$("#qq-modal-loading"),jn=$("#qq-modal-selection"),jt=$("#qq-modal-form"),$('[data-toggle="entity-creator"]').unbind("click").click(function(e){return e.preventDefault(),$(this).data("type")==="inline"?($(".quick-creator-body").hide(),$(".quick-creator-footer").hide(),$(".quick-creator-loading").show()):bi(),$.ajax({url:$(this).data("url"),context:this}).done(function(n){an.hide(),jn.hide(),jt.show().html(n),mn(),vn(),$(document).trigger("shown.bs.modal")}),!1})}function yi(){$("#qq-name-field").unbind("focusout").focusout(function(){$(this).val()&&($(this).parent().parent().find(".duplicate-entity-warning").hide(),$.ajax({url:$(this).data("live")+"?q="+$(this).val()+"&type="+$(this).data("type"),context:this}).done(function(e){if(e.length>0){let t=Object.keys(e).map(function(n){return'<a href="'+e[n].url+'">'+e[n].name+"</a>"}).join(", ");$(this).parent().parent().find(".duplicate-entities").html(t),$(this).parent().parent().find(".duplicate-entity-warning").show()}else $(this).parent().parent().find(".duplicate-entity-warning").hide()}))})}function bi(){$("#qq-modal-form").hide(),$("#qq-modal-selection").hide(),$("#qq-modal-loading").show()}function mn(){et=$(".quick-creator-submit"),et.length!==0&&(yi(),wi(),vn(),et.on("click",function(e){let t=$(this).data("action");return t&&$('#entity-creator-form [name="action"]').val(t),!0}),$("#entity-creator-form").submit(function(e){e.preventDefault(),et.prop("disabled",!0).find("span").hide().parent().find("i.fa-spin").show(),$("div.text-error").remove(),$.post({url:$(this).attr("action"),data:$(this).serialize(),context:this}).done(function(t){if(typeof t=="object"){if(t.redirect){window.location.replace(t.redirect);return}let r=new Option(t._name,t._id),i=$("#"+t._target);if(t._multi){let s=i.val();s.push(t._id),i.append(r).val(s)}else i.children().remove().end().append(r).val(t._id);i.trigger("change"),$("#qq-modal-form").html("").show(),$("#qq-modal-loading").hide(),$("#qq-modal-selection").show(),document.getElementById("primary-dialog").close(),sn();return}let n=document.getElementById("primary-dialog");n.innerHTML=t,It(),sn()}).fail(function(t){if(t.responseJSON.errors){let n=t.responseJSON.errors;Object.keys(n).forEach(function(s){let l=$('#entity-creator-form [name="'+s+'"]');l.length>0&&l.addClass("input-error").parent().append('<div class="text-error">'+n[s][0]+"</div>")});let i=Object.keys(n)[0],o=$('#entity-creator-form input[name="'+i+'"]');if(o[0]){o[0].scrollIntoView({behavior:"smooth"}),$(".tab-content .active").removeClass("active"),$(".nav-tabs li.active").removeClass("active");let s=$('[name="'+i+'"').closest(".tab-pane");s.addClass("active"),$('a[href="#'+s.attr("id")+'"]').closest("li").addClass("active")}}et.prop("disabled",!1).find("i.fa-spin").hide().parent().find("span").show(),$('#entity-creator-form [name="action"]').val("")})}))}function wi(){$("#entity-creator-back").click(function(e){e.preventDefault(),bi(),$.ajax({url:$(this).data("url"),context:this}).done(function(t){$(this).data("target"),jt.html(t).show(),an.hide(),It()})})}function vn(){$(".qq-mode-toggle").unbind("click").on("click",function(e){e.preventDefault(),!$(this).hasClass("active")&&($(".qq-mode-toggle").removeClass("active"),$(this).addClass("active"),$(".quick-creator-body").hide(),$(".quick-creator-footer").hide(),$(".quick-creator-loading").show(),$.ajax({url:$(this).data("url")}).done(function(t){jt.html(t).show(),sn(),$(document).trigger("shown.bs.modal")}))}),$(".qq-action-more").unbind("click").on("click",function(e){e.preventDefault(),$(this).hide(),$(".qq-more-fields").show()}),It()}function sn(){vn(),yi(),wi(),mn()}var He,it,Sr=new IntersectionObserver(function(e){e[0].isIntersecting===!0&&cn($(".datagrid-onload"))},{threshold:[0]});$(document).ready(function(){xi(),ln(),Mt(),Lr(),$(document).on("shown.bs.modal",function(){ln(),gn()})});function ln(){$("[data-bulk-action]").unbind("click").on("click",function(){Er($(this).data("bulk-action"))}),$(".bulk-print").unbind("click").on("click",function(e){e.preventDefault();let t=$(this).closest("form");t.find(),t.submit()})}function xi(){var e=$("#datagrid-select-all");e.length>0&&e.unbind("click").click(function(){$(this).prop("checked")?$.each($("input[name='model[]']"),function(){$(this).prop("checked",!0)}):$.each($("input[name='model[]']"),function(){$(this).prop("checked",!1)}),Mt()}),$.each($("input[name='model[]']"),function(){$(this).change(function(t){Mt(),t.preventDefault()})})}function Er(e){var t=[];$.each($("input[name='model[]']"),function(){$(this).prop("checked")&&t.push($(this).val())}),e==="ajax"?$(document).on("shown.bs.modal",function(){$("#primary-dialog").find('input[name="models"]').val(t.toString())}):$("#datagrid-bulk-"+e+"-models").val(t.toString())}function Mt(){var e=!0;$.each($("input[name='model[]']"),function(){$(this).prop("checked")&&(e=!1)}),e?$(".datagrid-bulk-actions .btn2").prop("disabled",!0).addClass("btn-disabled"):$(".datagrid-bulk-actions .btn2").prop("disabled",!1).removeClass("btn-disabled").removeClass("disabled")}function Lr(){gn(),_i(),Dr(),Mt()}function gn(){$(".datagrid-bulk").unbind("click").click(function(e){e.preventDefault(),He=$(this).closest("form");let t=[];$.each($("input[name='model[]']"),function(){$(this).prop("checked")&&t.push($(this).val())}),$.ajax({url:He.attr("action")+"?action=edit",method:"POST",data:{model:t}}).done(function(n){let r=document.getElementById("primary-dialog");r.innerHTML=n,r.show()})}),$(".datagrid-submit").click(function(e){if(e.preventDefault(),He=$(this).closest("form"),He.find('input[name="action"]').val($(this).data("action")),$(this).data("action")==="delete")return window.openDialog("datagrid-bulk-delete"),!1;$(".datagrid-bulk-actions").hide(),$(".datagrid-spinner").show(),He.submit()}),$("#datagrid-action-confirm").click(function(){window.closeDialog("datagrid-bulk-delete"),He.submit()})}function _i(){$.each($('table[data-render="datagrid2"]'),function(){it=$(this),$(this).find("thead a").click(function(e){e.preventDefault(),cn($(this))}),$(this).closest("#datagrid-parent").find('nav[role="navigation"] a').click(function(e){e.preventDefault(),cn($(this))})}),xi(),ln(),gn()}function Dr(){$(".datagrid-onload").length!=0&&Sr.observe(document.querySelector(".datagrid-onload"))}function cn(e){it.find("thead").hide(),it.find("tbody").hide(),it.find("tfoot").show();let t=e.attr("href"),n=e.data("url");t==="#"&&n&&(t=n);let r=e.data("target")??"#datagrid-parent";$.ajax(t).done(function(i){i.html&&$(r).html(i.html),i.deletes&&$("#datagrid-delete-forms").html(i.deletes),i.url&&window.history.pushState({},"",i.url),_i(),$(document).trigger("shown.bs.modal")}).fail(function(i){console.error("datagrid2",i),it.find("tfoot").addClass("bg-danger")})}const $i=()=>{document.querySelectorAll('[data-animate="collapse"]').forEach(t=>{t.addEventListener("click",Or)})};function Or(e){let t=this.dataset.target;t||(t=this.hash);let n=document.querySelector(t);this.classList.toggle("animate-collapsed"),n.classList.toggle("hidden")}$(document).on("shown.bs.modal",function(){$i()});$i();$(document).ready(function(){Ar(),jr()});function Ar(){let e=$("#bookmark-selector");if(e.length===0)return!1;e.change(function(t){t.preventDefault();let n=$(this).find(":selected");$(".bookmark-subform").addClass("hidden");let r=n.data("target");$(r).removeClass("hidden")})}function jr(){let e=$("#entity-selector");if(e.length===0)return!1;e.val()!=""&&$("#filter-subform").show(),e.change(function(){e.val()==""?($("#filter-subform").hide(),console.log(e.val())):$("#filter-subform").show()})}$(document).ready(function(){Mr()});function Mr(){let e=$("#post-layout-selector");e.length!==0&&e.change(function(t){t.preventDefault(),$(this).find(":selected").val()===""?($("#field-entry").show(),$("#field-location").show(),$("#field-display").show(),$("#post-layout-subform").hide()):($("#field-entry").hide(),$("#field-location").hide(),$("#field-display").hide(),$("#post-layout-subform").show())})}$(document).ready(function(){$(document).on("shown.bs.modal shown.bs.popover",function(){Mn()}),$(".form-members").count!==0&&Mn()});function Mn(){$.each($(".form-members"),function(){let e=$(this);if(e.data("loaded")===1)return;e.data("loaded",1);let t=e.data("allow-clear");e.select2({tags:!0,allowClear:t||!0,minimumInputLength:0,ajax:{quietMillis:500,delay:500,url:e.data("url"),dataType:"json",data:function(n){return{q:$.trim(n.term)}},processResults:function(n){return{results:n}},cache:!0},createTag:function(){}})})}$(document).ready(function(){qr(),Pr(),Ir(),Fr(),Hr(),Nr(),Rr(),Qr(),Vr()});function qr(){$.each($(".form-rpg-systems"),function(){$(this).select2({multiple:!0,allowClear:!0,minimumInputLength:0})})}function Pr(){$("#campaign-modules").length!==0&&$('input[name="enabled"]').change(function(e){e.preventDefault();let t=$(this).closest(".box-module").find("h3");t.hasClass("loading")||(t.addClass("loading"),axios.post($(this).data("url")).then(n=>{let r=$(this);r.closest(".box-module").find("h3").removeClass("loading"),n.data.success&&(n.data.status?r.closest(".box-module").addClass("module-enabled"):r.closest(".box-module").removeClass("module-enabled"),window.showToast(n.data.toast))}))})}function Ir(){$(".btn-user-roles").popover({html:!0,sanitize:!1,trigger:"focus"})}function Rr(){document.querySelectorAll(".public-permission").forEach(t=>{t.addEventListener("click",Br)})}function Br(e){e.preventDefault(),this.classList.add("loading"),axios.post(this.dataset.url).then(t=>{this.classList.remove("loading"),t.data.success&&(t.data.status?$(this).addClass("enabled"):$(this).removeClass("enabled"),window.showToast(t.data.toast))})}function Fr(){$.each($(".codemirror"),function(){let e=$(this).attr("id");CodeMirror.fromTextArea(document.getElementById(e),{extraKeys:{"Ctrl-Space":"autocomplete"},lineNumbers:!0,lineWrapping:!0,theme:"dracula"})})}function Hr(){let e=[].slice.call(document.querySelectorAll(".nested-sortable"));for(let t=0;t<e.length;t++)new si(e[t],{group:"nested",handle:".dnd-handle",animation:150,fallbackOnBody:!0,swapThreshold:.65,onMove:function(n,r){let i=n.dragged,o=n.related,s=$(o).parents(".fixed-position").length>0;return!(i.classList.contains("fixed-position")&&s)}})}const Nr=()=>{document.querySelectorAll(".campaign-export-btn").forEach(t=>{t.addEventListener("click",zr)})};function zr(e){e.preventDefault(),this.classList.add("loading"),axios.post(this.dataset.url).then(t=>{console.log(this),this.classList.remove("loading"),this.classList.add("btn-disabled"),t.data.error?window.showToast(t.data.error,"error"):window.showToast(t.data.success)}).catch(t=>{this.classList.add("loading"),console.error("campaign export call",t.data)})}function Qr(){let e=$("form#campaign-style");e.length!==0&&e.on("submit",function(t){let n=$($(this).data("error"));return $('textarea[name="content"]').val().length<$(this).data("max-content")?(n.hide(),!0):(n.show(),$("form .submit-group .btn").prop("disabled",!1),!1)})}function Vr(){$('input[name="vanity"]').focusout(function(e){let t=$(this).val(),n=$("#vanity-error"),r=$("#vanity-success"),i=$("#vanity-loading");if(n.html("").hide(),r.hide(),!t)return;i.show();let o={};o.vanity=t,$.post({url:$(this).data("url"),method:"POST",context:this,data:o}).done(function(s){$(this).val(s.vanity),r.find("code").html(s.vanity),r.show(),n.hide(),i.hide()}).fail(function(s){let l="";s.responseJSON.errors.vanity.forEach(u=>l+=u+" "),n.html(l).show(),r.hide(),i.hide()})})}const ki=()=>{document.querySelectorAll("[data-clipboard]").forEach(t=>{t.addEventListener("click",Ur,!1)})};function Ur(e){e.preventDefault(),Wr(this.dataset.clipboard,this);let t=this.dataset.toast;return t&&window.showToast(t),!1}async function Wr(e,t){if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(e);else{const n=document.createElement("textarea");n.value=e,n.style.position="absolute",n.style.left="-999999px",t.append(n),n.select();try{document.execCommand("copy")}catch(r){console.error(r)}finally{n.remove()}}}ki();$(document).on("shown.bs.modal",function(e){ki()});$(document).ready(function(){Ci()});function Ci(){$('.toast-container [data-toggle="dismiss"]').unbind("click").on("click",function(e){e.preventDefault();let t=$(this).closest(".toast-message");t.removeClass("opacity-100").addClass("opacity-0"),setTimeout(function(){t.remove()},150)})}window.showToast=function(e,t){t=t||"bg-success text-success-content",t==="error"&&(t="bg-error text-error-content");let n=$('<div class="'+t+' opacity-100 duration-150 transition-opacity rounded">');n.html('<div class="toast-message p-2 flex gap-2 items-center"><span class="grow"> '+e+'</span><span class="flex-none"><i class="fa-regular fa-circle-xmark cursor-pointer " data-toggle="dismiss"></i></span></div'),$(".toast-container").append(n),setTimeout(function(){n.removeClass("opacity-100").addClass("opacity-0"),setTimeout(function(){n.remove()},150)},3e3),Ci()};+function(e){var t="lte.pushmenu",n={collapseScreenSize:767,expandOnHover:!1,expandTransitionDelay:200},r={collapsed:".sidebar-collapse",open:".sidebar-open",mainSidebar:".main-sidebar",contentWrapper:".content-wrapper",searchInput:".sidebar-form .form-control",button:'[data-toggle="push-menu"]',mini:".sidebar-mini",expanded:".sidebar-expanded-on-hover",layoutFixed:".fixed"},i={collapsed:"sidebar-collapse",open:"sidebar-open",mini:"sidebar-mini",expanded:"sidebar-expanded-on-hover",expandFeature:"sidebar-mini-expand-feature",layoutFixed:"fixed"},o={expanded:"expanded.pushMenu",collapsed:"collapsed.pushMenu"},s=function(f){this.options=f,this.init()};s.prototype.init=function(){(this.options.expandOnHover||e("body").is(r.mini+r.layoutFixed))&&(this.expandOnHover(),e("body").addClass(i.expandFeature)),e(r.contentWrapper).click(function(){e(window).width()<=this.options.collapseScreenSize&&e("body").hasClass(i.open)&&this.close()}.bind(this)),e(r.searchInput).click(function(f){f.stopPropagation()})},s.prototype.toggle=function(){var f=e(window).width(),p=!e("body").hasClass(i.collapsed);f<=this.options.collapseScreenSize&&(p=e("body").hasClass(i.open)),p?this.close():this.open()},s.prototype.open=function(){var f=e(window).width();f>this.options.collapseScreenSize?e("body").removeClass(i.collapsed).trigger(e.Event(o.expanded)):e("body").addClass(i.open).trigger(e.Event(o.expanded))},s.prototype.close=function(){var f=e(window).width();f>this.options.collapseScreenSize?e("body").addClass(i.collapsed).trigger(e.Event(o.collapsed)):e("body").removeClass(i.open+" "+i.collapsed).trigger(e.Event(o.collapsed))},s.prototype.expandOnHover=function(){e(r.mainSidebar).hover(function(){e("body").is(r.mini+r.collapsed)&&e(window).width()>this.options.collapseScreenSize&&this.expand()}.bind(this),function(){e("body").is(r.expanded)&&this.collapse()}.bind(this))},s.prototype.expand=function(){setTimeout(function(){e("body").removeClass(i.collapsed).addClass(i.expanded)},this.options.expandTransitionDelay)},s.prototype.collapse=function(){setTimeout(function(){e("body").removeClass(i.expanded).addClass(i.collapsed)},this.options.expandTransitionDelay)};function l(f){return this.each(function(){var p=e(this),b=p.data(t);if(!b){var S=e.extend({},n,p.data(),typeof f=="object"&&f);p.data(t,b=new s(S))}f==="toggle"&&b.toggle()})}var u=window.$.fn.pushMenu;window.$.fn.pushMenu=l,window.$.fn.pushMenu.Constructor=s,window.$.fn.pushMenu.noConflict=function(){return window.$.fn.pushMenu=u,this},window.$(document).on("click",r.button,function(f){f.preventDefault(),l.call(window.$(this),"toggle")}),window.$(window).on("load",function(){l.call(window.$(r.button))})}(jQuery);const Kr=()=>{document.querySelectorAll(".banner-notification-dismiss").forEach(e=>{e.addEventListener("click",Yr,!1)}),document.querySelectorAll('[data-dismiss="tutorial"]').forEach(e=>{e.addEventListener("click",Xr,!1)})};function Yr(e){e.preventDefault();let t=this.dataset.dismiss;axios.post(this.dataset.url).then(()=>{if(!t)return;let n=document.querySelector(t);n&&n.classList.add("hidden")})}function Xr(e){e.preventDefault();let t=this.dataset.target;axios.post(this.dataset.url).then(()=>{if(!t)return;let n=document.querySelector(t);n&&n.classList.add("hidden")})}Kr();let Ti;$(document).ready(function(){Gr()});function Gr(){let e=$("#element-era-id");e.length!==0&&(Ti=e.val(),e.length===1&&e.on("change",function(){Jr(e.val())}))}function Jr(e){e=parseInt(e);let t=$('input[name="era-data-url"]').data("url").replace("/0/","/"+e+"/"),n=$('input[name="oldPosition"]').data("url");$.ajax(t).done(function(r){let i=$('select[name="position"]');i.html("");let o=1;$.each(r.positions,function(s){let l=r.positions[s],u=' selected="selected"';n&&!s&&Ti==e&&i.append('<option value="" data-length="'+l.length+'" '+u+">"+l+"</option>"),s&&i.append('<option value="'+o+'" data-length="'+l.length+'" '+u+">"+l+"</option>"),o++})})}window.initSortable=function(){let e=document.querySelectorAll(".sortable-elements");e.length!==0&&e.forEach(t=>{let n={},r=t.dataset.handle;r&&(n.handle=r),si.create(t,n)})};window.initSortable();window.formErrorHandler=function(e,t){if($(".input-error").removeClass("input-error"),$(".text-error").remove(),$(t).find(".btn-primary").prop("disabled",!1).removeClass("loading"),e.status===503){window.showToast(e.responseJSON.message,"error");return}if(e.status===403){$("#entity-form-403-error").show();return}let n=e.responseJSON.errors,r=[],i=Object.keys(n),o=!0;if(i.forEach(function(f){let p=$('[name="'+f+'"]');p.length>0?p.addClass("input-error").parent().append('<div class="text-error">'+n[f][0]+"</div>"):(o=!1,r.push(n[f][0])),window.showToast(n[f][0],"error")}),!o){let f=$("#entity-form-generic-error .error-logs");f.html(""),r.forEach(function(p){let b=p+"<br />";f.append(b)}),$("#entity-form-generic-error").show()}if($(t).find(".tab-content").length===0)return;let s=Object.keys(n)[0],l=document.getElementsByName(s);if(!l[0])return;$(".tab-content .active").removeClass("active"),$(".nav-tabs li.active").removeClass("active");let u=$('[name="'+s+'"').closest(".tab-pane");u.addClass("active"),$('a[href="#'+u.attr("id")+'"]').closest("li").addClass("active"),l[0].scrollIntoView({behavior:"smooth"})};const zt=document.getElementById("dialog-backdrop");let Qt;const Zr=()=>{document.querySelectorAll('[data-toggle="dialog"]').forEach(e=>{e.addEventListener("click",qn)}),document.querySelectorAll('[data-toggle="dialog-ajax"]').forEach(e=>{e.addEventListener("click",qn)})};function qn(e){e.preventDefault();let t=this.dataset.target;if(!t)return;let n=this.dataset.url;Si(t,n)}const Si=(e,t)=>{e=document.getElementById(e),e.removeAttribute("open"),e.show(),zt.classList.remove("hidden"),e.dataset.dismissible!=="false"&&zt.addEventListener("click",function(n){e.close()}),e.addEventListener("click",function(n){let r=e.getBoundingClientRect();!(r.top<=n.clientY&&n.clientY<=r.top+r.height&&r.left<=n.clientX&&n.clientX<=r.left+r.width)&&n.target.tagName==="DIALOG"&&e.close()}),e.addEventListener("close",function(n){zt.classList.add("hidden")}),t&&eo(t,e)},eo=(e,t)=>{Qt?t.innerHTML=Qt:Qt=t.innerHTML,fetch(e,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(n=>n.text()).then(n=>{t.innerHTML=n,t.show(),$(document).trigger("shown.bs.modal"),$(".btn-manage-perm").click(function(r){r.preventDefault(),t.close();let i=$(this).data("target");$(i).click()})})},to=e=>{document.getElementById(e).close()};window.initDialogs=Zr;window.openDialog=Si;window.closeDialog=to;const no={props:{text:String,title:String}},io={class:"mx-5"},ro=["data-title"],oo=c("i",{class:"fa-solid fa-chevrons-left","aria-hidden":"true","data-sidebar":"collapse"},null,-1),ao=c("i",{class:"fa-solid fa-chevrons-right","aria-hidden":"true","data-sidebar":"expand"},null,-1),so={class:"sr-only"};function lo(e,t,n,r,i,o){return h(),m("div",io,[c("span",{role:"button",class:"sidebar-toggle text-center cursor-pointer","data-toggle":"tooltip","data-title":n.title,"data-placement":"right","data-html":"true",tabindex:"3"},[oo,ao,c("span",so,y(n.text),1)],8,ro)])}const co=$e(no,[["render",lo]]),uo={props:["entity"],methods:{backgroundImage:function(e){return"url('"+e.image+"')"},preview:function(e){this.emitter.emit("preview",e)}}},fo=["data-id"],po={class:"flex-none"},ho=["href","title"],mo={class:"flex-grow truncate pl-1"},vo=["title"],go={class:"entity-type text-xs"};function yo(e,t,n,r,i,o){return h(),m("div",{class:"flex justify-center gap-1 cursor-pointer hover:bg-base-200 rounded w-full","data-id":n.entity.id,onClick:t[1]||(t[1]=s=>o.preview(n.entity))},[c("div",po,[c("a",{href:n.entity.link,style:Qe({backgroundImage:o.backgroundImage(n.entity)}),onClick:t[0]||(t[0]=Gt(()=>{},["stop"])),title:n.entity.name,class:"rounded cover-background block h-16 w-16"},null,12,ho)]),c("div",mo,[c("div",{class:"font-extrabold entity-name truncate",title:n.entity.name},y(n.entity.name),9,vo),c("div",go,y(n.entity.type),1)])],8,fo)}const Ei=$e(uo,[["render",yo]]),bo={props:["entity"],components:{LookupEntity:Ei},data(){return{focus_profile:!0,focus_pins:!1,focus_access:!1}},methods:{hasTitle(){return this.entity.title},tagClass(e){let t="inline-block rounded-xl px-3 py-1 bg-base-100 text-base-content text-xs";return e.colour&&(t+=" bg-"+e.colour,e.colour==="black"&&(t+=" text-white")),t},backgroundImage:function(){return"url('"+this.entity.image+"')"},tabClass:function(e){let t="p-1 px-1 mx-1 pt-2 select-none text-center truncate border-b-2 border-solid border-r-0 border-t-0 border-l-0";return e==="profile"&&this.focus_profile||e==="links"&&this.focus_pins||e==="access"&&this.focus_access?t+=" font-black border-slate-600":t+=" cursor-pointer border-base-100",t},switchTab:function(e){this.focus_profile=!1,this.focus_pins=!1,this.focus_access=!1,e==="profile"?this.focus_profile=!0:e==="links"?this.focus_pins=!0:e==="access"&&(this.focus_access=!0)},profileClass:function(e){return"entity-profile-"+e.slug}}},wo={class:"entity-header p-3 bg-entity-focus"},xo={class:"w-full flex items-center"},_o=["href","title"],$o={key:0,class:"fa-solid fa-skull mx-2","aria-hidden":"true"},ko=["href"],Co=c("i",{class:"fa-solid fa-external-link","aria-hidden":"true","aria-label":"Open in a new window"},null,-1),To=[Co],So={key:0,class:"block w-full"},Eo={key:1,class:"my-1 w-full flex flex-wrap gap-1"},Lo=["href"],Do=["href","data-tag"],Oo=c("i",{class:"fa-duotone circle-location-arrow","aria-hidden":"true","aria-label":"Location"},null,-1),Ao=["href","title"],jo={class:"entity-sections"},Mo={class:"tabs flex my-2 justify-center items-center border-solid border-slate-600 border-b-2 border-r-0 border-t-0 border-l-0"},qo={key:0,class:"tab-profile p-5 flex flex-col gap-5"},Po={key:0,class:"entity-pinned-attributes flex flex-col gap-3"},Io=["data-attribute","data-target"],Ro={class:"inline-block uppercase font-extrabold mr-1"},Bo=["innerHTML"],Fo={key:1},Ho={class:"flex flex-col gap-3"},No={class:"uppercase font-extrabold truncate"},zo={key:1,class:"tab-links p-3"},Qo={key:0,class:"text-center italic"};function Vo(e,t,n,r,i,o){const s=Ae("LookupEntity");return h(),m(U,null,[c("div",wo,[c("div",xo,[c("a",{class:"text-2xl font-extrabold entity-name",href:n.entity.link,title:n.entity.name},y(n.entity.name),9,_o),n.entity.is_dead?(h(),m("i",$o)):T("",!0),c("a",{class:"ml-2 text-xs",target:"_blank",href:n.entity.link},To,8,ko)]),o.hasTitle()?(h(),m("div",So,y(n.entity.title),1)):T("",!0),n.entity.tags.length>0?(h(),m("div",Eo,[(h(!0),m(U,null,te(n.entity.tags,l=>(h(),m("a",{class:H(o.tagClass(l)),href:l.link},y(l.name),11,Lo))),256))])):T("",!0),n.entity.location?(h(),m("a",{key:2,class:"block w-full cursor-pointer my-2",href:n.entity.location.link,"data-tag":n.entity.id},[Oo,ee(" "+y(n.entity.location.name),1)],8,Do)):T("",!0),n.entity.image?(h(),m("a",{key:3,href:n.entity.link,style:Qe({backgroundImage:o.backgroundImage()}),title:n.entity.name,class:"rounded cover-background block w-full aspect-square"},null,12,Ao)):T("",!0)]),c("div",jo,[c("div",Mo,[c("div",{class:H(o.tabClass("profile")),onClick:t[0]||(t[0]=l=>o.switchTab("profile"))},y(n.entity.texts.profile),3),c("div",{class:H(o.tabClass("links")),onClick:t[1]||(t[1]=l=>o.switchTab("links"))},y(n.entity.texts.connections),3),c("div",{class:H(o.tabClass("access")),onClick:t[2]||(t[2]=l=>o.switchTab("access"))},null,2)]),i.focus_profile?(h(),m("div",qo,[n.entity.attributes.length>0?(h(),m("div",Po,[(h(!0),m(U,null,te(n.entity.attributes,l=>(h(),m("div",{class:"","data-attribute":l.name,"data-target":l.id},[c("span",Ro,y(l.name),1),c("span",{innerHTML:l.value},null,8,Bo)],8,Io))),256))])):T("",!0),n.entity.attributes.length>0?(h(),m("hr",Fo)):T("",!0),c("div",Ho,[(h(!0),m(U,null,te(n.entity.profile,l=>(h(),m("div",{class:H(["",o.profileClass(l)])},[c("div",No,y(l.field),1),c("div",null,y(l.value),1)],2))),256))])])):T("",!0),i.focus_pins?(h(),m("div",zo,[(h(!0),m(U,null,te(n.entity.connections,l=>(h(),Oe(s,{entity:l},null,8,["entity"]))),256)),n.entity.connections.length===0?(h(),m("p",Qo,y(n.entity.texts["no-connections"]),1)):T("",!0)])):T("",!0)])],64)}const Uo=$e(bo,[["render",Vo]]),Wo={directives:{clickOutside:ci.directive},props:{api_lookup:String,api_recent:String,placeholder:String,keyboard_tooltip:String},components:{LookupEntity:Ei,EntityPreview:Uo},data(){return{has_drawer:!1,term:null,show_loading:!1,show_recent:!1,show_preview:!1,show_results:!1,show_bookmarks:!1,recent:[],bookmarks:[],indexes:[],results:[],cached:{},has_recent:!1,texts:{},timeout_id:null,preview_entity:null}},watch:{term(e,t){this.termChanged()}},methods:{termChanged(){this.term.trim().length<3||(this.timeout_id!==void 0&&clearTimeout(this.timeout_id),this.show_loading=!0,this.timeout_id=setTimeout(()=>this.lookup(),500))},lookup(){let e=this.term.trim(),t=e.toLowerCase().replace(/ /g,"-").replace(/ [^\w-]+/g,"");if(this.cached[t])return this.displayCached(t);fetch(this.api_lookup+"?"+new URLSearchParams({q:e,v2:!0})).then(n=>n.json()).then(n=>this.parseLookupResponse(n,t))},focus(){this.api_recent&&(this.show_preview=!1,this.has_drawer=!0,this.fetch())},escape(){this.timeout_id!==void 0&&clearTimeout(this.timeout_id),this.close()},fetch(){if(this.has_recent){this.show_recent=!0;return}this.show_loading=!0,fetch(this.api_recent).then(e=>e.json()).then(e=>{this.recent=e.recent,this.bookmarks=e.bookmarks,this.indexes=e.indexes,this.texts.recents=e.texts.recents,this.texts.results=e.texts.results,this.texts.hint=e.texts.hint,this.texts.bookmarks=e.texts.bookmarks,this.texts.index=e.texts.index,this.texts.keyboard=e.texts.keyboard,this.texts.empty_results=e.texts.empty_results,this.show_loading=!1,this.show_recent=!0,this.has_recent=!0,this.bookmarks.length>0?this.show_bookmarks=!0:this.show_bookmarks=!1}).catch(e=>{this.show_loading=!1,this.show_recent=!0,this.has_recent=!1})},parseLookupResponse(e,t){this.results=e.entities,this.cached[t]=e.entities,this.showResults()},displayCached(e){this.results=this.cached[e],this.showResults()},showResults(){this.timeout_id=null,this.show_preview=!1,this.show_loading=!1,this.show_results=!0},loadPreview(e){this.show_loading=!0,fetch(e.preview).then(t=>t.json()).then(t=>this.parsePreviewResponse(t))},parsePreviewResponse(e){this.preview_entity=e,this.show_loading=!1,this.show_preview=!0,this.show_recent=!1},onClickOutside(e){this.close()},close(){this.show_recent=!1,this.show_loading=!1,this.show_preview=!1,this.$refs.searchField.blur()},showBookmarks(){this.show_bookmarks=!0},showIndexes(){this.show_bookmarks=!1},modeClass(e){return e&&this.show_bookmarks||!e&&!this.show_bookmarks?" underline":""}},mounted(){this.emitter.on("preview",e=>{this.loadPreview(e)})}},Ko={class:"flex grow mr-2"},Yo={class:"relative grow field flex items-center"},Xo=["placeholder"],Go={class:"absolute right-1 hidden md:inline"},Jo=["data-title"],Zo={key:0,class:"search-drawer absolute top-0 left-0 mt-12 h-sidebar w-sidebar bg-navbar bg-base-100 shadow-r overflow-y-auto"},ea={key:0,class:"text-center"},ta=c("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true","aria-label":"Loading"},null,-1),na=[ta],ia={key:1,class:"search-recent bg-lookup p-2 min-h-full shadow-r flex flex-col items-stretch"},ra={key:0,class:"flex-none"},oa={class:"italic text-xs text-center"},aa={class:"grow flex flex-col gap-5 p-2"},sa={key:0,class:"search-results flex flex-col gap-2"},la={class:"text-sm uppercase"},ca={key:0,class:"text-neutral-content text-sm"},ua={key:1,class:"recent-searches flex flex-col gap-2"},da={class:"text-sm uppercase"},fa={key:2,class:"flex gap-5 justify-center"},pa={key:3,class:"flex flex-col gap-4"},ha=["href","title"],ma={key:4,class:"flex flex-col gap-4"},va=["href","title"],ga={key:1,class:"flex-none text-xs text-center"},ya=c("hr",null,null,-1),ba=["innerHTML"],wa={key:2,class:"search-preview bg-lookup min-h-full shadow-r"};function xa(e,t,n,r,i,o){const s=Ae("LookupEntity"),l=Ae("EntityPreview"),u=li("click-outside");return Jt((h(),m("div",Ko,[c("div",Yo,[Jt(c("input",{type:"text",class:"leading-4 w-20 md:w-full",maxlength:"25",ref:"searchField",id:"entity-lookup","onUpdate:modelValue":t[0]||(t[0]=f=>i.term=f),onClick:t[1]||(t[1]=f=>o.focus()),onFocus:t[2]||(t[2]=f=>o.focus()),onKeydown:t[3]||(t[3]=ir(f=>o.escape(),["esc"])),placeholder:n.placeholder},null,40,Xo),[[rr,i.term]]),c("span",Go,[c("span",{class:"flex-none keyboard-shortcut py-1",id:"lookup-kb-shortcut","data-toggle":"tooltip","data-title":n.keyboard_tooltip,"data-html":"true","data-placement":"bottom"}," K ",8,Jo)])]),i.show_recent||i.show_loading||i.show_preview?(h(),m("aside",Zo,[i.show_loading?(h(),m("div",ea,na)):T("",!0),i.show_recent?(h(),m("div",ia,[i.show_results?T("",!0):(h(),m("div",ra,[c("p",oa,y(i.texts.hint),1)])),c("div",aa,[i.show_results?(h(),m("div",sa,[c("div",la,y(i.texts.results),1),i.results.length===0?(h(),m("div",ca,y(i.texts.empty_results),1)):(h(!0),m(U,{key:1},te(i.results,f=>(h(),Oe(s,{entity:f},null,8,["entity"]))),256))])):T("",!0),i.recent.length>0?(h(),m("div",ua,[c("div",da,y(i.texts.recents),1),(h(!0),m(U,null,te(i.recent,f=>(h(),Oe(s,{entity:f},null,8,["entity"]))),256))])):T("",!0),i.bookmarks.length>0?(h(),m("div",fa,[i.bookmarks.length>0?(h(),m("button",{key:0,class:H(["grow text-sm uppercase hover:underline",this.modeClass(!0)]),onClick:t[4]||(t[4]=f=>o.showBookmarks())},y(i.texts.bookmarks),3)):T("",!0),c("button",{class:H(["grow text-sm uppercase hover:underline",this.modeClass(!1)]),onClick:t[5]||(t[5]=f=>o.showIndexes())},y(i.texts.index),3)])):T("",!0),i.show_bookmarks?(h(),m("div",pa,[(h(!0),m(U,null,te(i.bookmarks,f=>(h(),m("a",{href:f.url,onClick:t[6]||(t[6]=Gt(()=>{},["stop"])),title:f.text,class:"flex gap-2 items-center"},[c("i",{class:H(["w-4",f.icon]),"aria-hidden":"true"},null,2),ee(" "+y(f.text),1)],8,ha))),256))])):(h(),m("div",ma,[(h(!0),m(U,null,te(i.indexes,f=>(h(),m("a",{href:f.url,onClick:t[7]||(t[7]=Gt(()=>{},["stop"])),title:f.name,class:"flex gap-2 items-center"},[c("i",{class:H(["w-4 text-center",f.icon]),"aria-hidden":"true"},null,2),ee(" "+y(f.name),1)],8,va))),256))]))]),i.show_loading?T("",!0):(h(),m("div",ga,[ya,c("p",{class:"italic text-xs text-center",innerHTML:i.texts.keyboard},null,8,ba)]))])):T("",!0),i.show_preview?(h(),m("div",wa,[St(l,{entity:i.preview_entity},null,8,["entity"])])):T("",!0)])):T("",!0)])),[[u,o.onClickOutside]])}const _a=$e(Wo,[["render",xa]]),$a={props:["campaign"],methods:{backgroundImage:function(e){return e.image?"url("+e.image+")":""},campaignClass:function(e){return"campaign flex items-end border border-solid rounded-lg cover-background relative h-24 overflow-hidden text-break shadow-xs hover:shadow-md border-0"+(e.is_boosted?" boosted":"")}}},ka=["href","title"],Ca=["innerHTML"];function Ta(e,t,n,r,i,o){return h(),m("a",{class:H(o.campaignClass(n.campaign)),href:n.campaign.url,style:Qe({backgroundImage:o.backgroundImage(n.campaign)}),title:n.campaign.name},[c("div",{class:"flex items-end justify-center name w-full text-xs p-2 pt-6 text-center",innerHTML:n.campaign.name},null,8,Ca)],14,ka)}const Sa=$e($a,[["render",Ta]]),Ea={props:["notification"],data(){return{is_dismissed:!1,is_loading:!1}},methods:{backgroundClass:function(e){let t="notification bg-base-200 flex justify-center items-center p-2 rounded-md";return e.is_read?t:t+" unread"},iconClass:function(e){return"fa-solid fa-"+e.icon},dismiss:function(e){this.is_loading=!0,axios.post(e.dismiss).then(()=>{this.is_dismissed=!0,this.emitter.emit("read_notification",e)})}}},La=["data-id"],Da={class:"flex-none p-2"},Oa=["innerHTML","href"],Aa=["title"],ja=c("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),Ma=[ja],qa={key:1,class:"flex-none p-2"},Pa=c("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1),Ia=[Pa],Ra=["data-id"],Ba={class:"flex-none p-2"},Fa=["innerHTML"],Ha=["title"],Na=c("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),za=[Na],Qa={key:1,class:"flex-none p-2"},Va=c("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1),Ua=[Va];function Wa(e,t,n,r,i,o){return n.notification.url&&!i.is_dismissed?(h(),m("div",{key:0,class:H(o.backgroundClass(n.notification)),"data-id":n.notification.id},[c("div",Da,[c("i",{class:H(o.iconClass(n.notification)),"aria-hidden":"true"},null,2)]),c("a",{class:"flex-grow p-2 break-all",innerHTML:n.notification.text,href:n.notification.url},null,8,Oa),this.is_loading?(h(),m("div",qa,Ia)):(h(),m("div",{key:0,class:"flex-none p-2 cursor-pointer dismissable",onClick:t[0]||(t[0]=s=>o.dismiss(n.notification)),title:n.notification.dismiss_text},Ma,8,Aa))],10,La)):i.is_dismissed?T("",!0):(h(),m("div",{key:1,class:H(o.backgroundClass(n.notification)),"data-id":n.notification.id},[c("div",Ba,[c("i",{class:H(o.iconClass(n.notification)),"aria-hidden":"true"},null,2)]),c("div",{class:"flex-grow p-2",innerHTML:n.notification.text},null,8,Fa),this.is_loading?(h(),m("div",Qa,Ua)):(h(),m("div",{key:0,class:"flex-none p-2 cursor-pointer dismissable",onClick:t[1]||(t[1]=s=>o.dismiss(n.notification)),title:n.notification.dismiss_text},za,8,Ha))],10,Ra))}const Ka=$e(Ea,[["render",Wa]]),Ya={props:["release"],data(){return{is_dismissed:!1,is_loading:!1}},methods:{backgroundClass:function(e){return"release bg-base-200 flex justify-center items-center p-2  rounded-md"},dismiss:function(e){this.is_loading=!0,axios.post(e.dismiss).then(()=>{this.is_dismissed=!0,this.emitter.emit("read_release",e)})}}},Xa=["data-id"],Ga={class:"flex-grow p-2"},Ja=["innerHTML","href"],Za=["innerHTML"],es=["title"],ts=c("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),ns=[ts],is={key:1,class:"flex-none p-2"},rs=c("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1),os=[rs];function as(e,t,n,r,i,o){return i.is_dismissed?T("",!0):(h(),m("div",{key:0,class:H(o.backgroundClass(n.release)),"data-id":n.release.id},[c("div",Ga,[c("a",{innerHTML:n.release.title,class:"font-bold cursor-pointer block w-full",href:n.release.url,target:"_blank"},null,8,Ja),c("p",{innerHTML:n.release.text},null,8,Za)]),this.is_loading?(h(),m("div",is,os)):(h(),m("div",{key:0,class:"flex-none p-2 cursor-pointer dismissable",onClick:t[0]||(t[0]=s=>o.dismiss(n.release)),title:n.release.dismiss_text},ns,8,es))],10,Xa))}const ss=$e(Ya,[["render",as]]),ls=c("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[c("g",{transform:"translate(-219.000000, -200.000000)",fill:"currentcolor"},[c("g",{id:"icons",transform:"translate(56.000000, 160.000000)"},[c("path",{d:"M181.9,54 L179.8,54 C178.63975,54 177.7,54.895 177.7,56 L177.7,58 C177.7,59.105 178.63975,60 179.8,60 L181.9,60 C183.06025,60 184,59.105 184,58 L184,56 C184,54.895 183.06025,54 181.9,54 M174.55,54 L172.45,54 C171.28975,54 170.35,54.895 170.35,56 L170.35,58 C170.35,59.105 171.28975,60 172.45,60 L174.55,60 C175.71025,60 176.65,59.105 176.65,58 L176.65,56 C176.65,54.895 175.71025,54 174.55,54 M167.2,54 L165.1,54 C163.93975,54 163,54.895 163,56 L163,58 C163,59.105 163.93975,60 165.1,60 L167.2,60 C168.36025,60 169.3,59.105 169.3,58 L169.3,56 C169.3,54.895 168.36025,54 167.2,54 M181.9,47 L179.8,47 C178.63975,47 177.7,47.895 177.7,49 L177.7,51 C177.7,52.105 178.63975,53 179.8,53 L181.9,53 C183.06025,53 184,52.105 184,51 L184,49 C184,47.895 183.06025,47 181.9,47 M174.55,47 L172.45,47 C171.28975,47 170.35,47.895 170.35,49 L170.35,51 C170.35,52.105 171.28975,53 172.45,53 L174.55,53 C175.71025,53 176.65,52.105 176.65,51 L176.65,49 C176.65,47.895 175.71025,47 174.55,47 M167.2,47 L165.1,47 C163.93975,47 163,47.895 163,49 L163,51 C163,52.105 163.93975,53 165.1,53 L167.2,53 C168.36025,53 169.3,52.105 169.3,51 L169.3,49 C169.3,47.895 168.36025,47 167.2,47 M181.9,40 L179.8,40 C178.63975,40 177.7,40.895 177.7,42 L177.7,44 C177.7,45.105 178.63975,46 179.8,46 L181.9,46 C183.06025,46 184,45.105 184,44 L184,42 C184,40.895 183.06025,40 181.9,40 M174.55,40 L172.45,40 C171.28975,40 170.35,40.895 170.35,42 L170.35,44 C170.35,45.105 171.28975,46 172.45,46 L174.55,46 C175.71025,46 176.65,45.105 176.65,44 L176.65,42 C176.65,40.895 175.71025,40 174.55,40 M169.3,42 L169.3,44 C169.3,45.105 168.36025,46 167.2,46 L165.1,46 C163.93975,46 163,45.105 163,44 L163,42 C163,40.895 163.93975,40 165.1,40 L167.2,40 C168.36025,40 169.3,40.895 169.3,42"})])])],-1),cs=[ls],us={__name:"GridSvg",props:{size:Number},setup(e){const t=e;function n(){return"w-"+t.size+" h-"+t.size}return(r,i)=>(h(),m("svg",{class:H(n()),viewBox:"0 -0.5 21 21",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true"},cs,2))}},ds={directives:{clickOutside:ci.directive},props:{user_id:{type:String},api:{type:String},fetch:{type:String},initials:{type:String},avatar:{type:String},campaign_id:void 0,has_alerts:{type:Boolean}},components:{GridSvg:us,Campaign:Sa,Notification:Ka,Release:ss},data(){return{alert_delta:60*1e3,is_loading:!1,is_expanded:!1,has_data:!1,view_campaigns:!1,view_profile:!1,profile:{},campaigns:{},notifications:{},marketplace:{},releases:{},show_alerts:!1,is_loaded:!1}},methods:{openCampaigns:function(){this.view_campaigns=!0,this.view_profile=!1,this.loadData()},openProfile:function(){this.view_profile=!0,this.view_campaigns=!1,this.loadData()},loadData:function(){this.is_expanded=!0,!this.has_data&&(this.is_loading=!0,fetch(this.api).then(e=>e.json()).then(e=>{this.profile=e.profile,this.campaigns=e.campaigns,this.notifications=e.notifications,this.marketplace=e.marketplace,this.releases=e.releases,this.show_alerts=e.has_unread,this.has_data=!0,this.is_loading=!1,this.is_loaded=!0}))},blockClass:function(e){return e?"block p-4 flex-grow items-center focus:box-shadow":"block p-4  items-center bg-base-200 cursor-pointer flex-none focus:box-shadow"},logout:function(){document.getElementById("logout-form").submit()},onClickOutside(e){this.is_expanded=!1},readRelease:function(e){let t=this.releases.releases.findIndex(n=>n.id===e.id);this.releases.releases.slice(t,1),this.updateUnread()},readNotification:function(e){let t=this.notifications.messages.findIndex(n=>n.id==e.id);this.notifications.messages.slice(t,1),this.updateUnread()},updateUnread:function(){this.notifications.messages.length===0&&this.releases.releases.length===0&&(this.show_alerts=!1)},updateAlerts:function(){let e=localStorage.getItem("last_notification-"+this.user_id),n=new Date().getTime()-60*5e3;if(!e||e<n)this.fetchAlerts();else if(this.show_alerts=localStorage.getItem("notification-has-alerts-"+this.user_id)==="true",this.queueFetch(),!this.is_loaded)return},fetchAlerts:function(){let e=new Date().getTime();localStorage.setItem("last_notification-"+this.user_id,e),fetch(this.fetch).then(t=>t.json()).then(t=>{localStorage.setItem("notification-has-alerts-"+this.user_id,t.has_alerts),this.updateAlerts()})},queueFetch:function(){let e=this;setTimeout(function(){e.updateAlerts()}.bind(this),this.alert_delta)},showInitials:function(){return this.avatar.startsWith("/images/")},profilePictureUrl:function(){return"url("+this.avatar+")"}},mounted(){this.emitter.on("read_release",e=>{this.readRelease(e)}),this.emitter.on("read_notification",e=>{this.readNotification(e)}),this.show_alerts=this.has_alerts,this.queueFetch()}},fs={class:"nav-switcher flex items-center justify-center h-12"},ps=c("span",{class:"sr-only"},"Campaigns",-1),hs={class:"indicator relative inline-flex w-max"},ms={key:0,class:"notification-badge left-auto top-auto w-fit inline-flex absolute content-center items-center z-10"},vs={key:1,class:"profile-box rounded-lg p-2 text-center font-bold"},gs={key:0,class:"navigation-drawer bg-base-100 h-full overflow-y-auto safsdf fixed top-0 right-0 rounded-l-2xl shadow-lg"},ys={key:0,class:"temporary p-8 text-center"},bs=c("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1),ws=[bs],xs={key:1,class:""},_s={class:"header flex"},$s={key:0,class:"full flex items-center gap-4"},ks={class:"flex-none"},Cs={class:"flex-grow"},Ts={class:"font-bold"},Ss=["title"],Es={key:0,class:"full flex items-center gap-4"},Ls={key:0,class:"flex-none profile-box rounded-lg p-2 text-center uppercase font-bold"},Ds={class:"flex-grow"},Os={class:"font-bold"},As=["title"],js={key:0,class:"flex-none profile-box rounded-lg p-2 text-center uppercase font-bold"},Ms={key:0,class:"profile p-5 flex flex-col gap-5"},qs={key:0,class:"notifications"},Ps={class:"flex w-full py-2"},Is={class:"flex-grow uppercase font-bold"},Rs={class:"flex-grow text-right"},Bs=["href"],Fs={class:"flex flex-col gap-2"},Hs={key:0,class:"no-notifications help-block text-neutral-content italic"},Ns={key:1,class:"releases"},zs={class:"flex w-full py-2"},Qs={class:"flex-grow uppercase font-bold"},Vs={class:"flex flex-col gap-2"},Us={key:2,class:"marketplace"},Ws={class:"flex w-full py-2"},Ks={class:"flex-grow uppercase font-bold"},Ys={class:"flex-grow text-right"},Xs=["href"],Gs={class:"grid grid-cols-3 gap-2"},Js=["href"],Zs=c("div",{class:"icon bg-base-200 rounded-full w-14 h-14 text-3xl aspect-square flex justify-center items-center"},[c("i",{class:"fa-solid fa-palette","aria-hidden":"true"})],-1),el={class:"text-muted text-xs"},tl=["href"],nl=c("div",{class:"icon bg-base-200 rounded-full w-14 h-14 text-3xl aspect-square flex justify-center items-center"},[c("i",{class:"fa-solid fa-columns","aria-hidden":"true"})],-1),il={class:"text-muted text-xs"},rl=["href"],ol=c("div",{class:"icon bg-base-200 rounded-full w-14 h-14 text-3xl aspect-square flex justify-center items-center"},[c("i",{class:"fa-solid fa-dice-d20","aria-hidden":"true"})],-1),al={class:"text-muted text-xs"},sl={key:3,class:"subscription"},ll={class:"uppercase font-bold py-2"},cl=["href"],ul={class:"flex-none p-2"},dl=["src","alt"],fl={class:"flex-grow p-2"},pl={class:"font-bold text-lg"},hl={key:0,class:"more"},ml=c("br",null,null,-1),vl={key:1,class:"more"},gl={class:"link"},yl={key:4,class:"m-0 p-0 list-none flex flex-col gap-2"},bl=["href"],wl=c("i",{class:"fa-solid fa-cog mr-3","aria-hidden":"true"},null,-1),xl=["href"],_l=c("i",{class:"fa-solid fa-user mr-3","aria-hidden":"true"},null,-1),$l=["href"],kl=c("i",{class:"fa-solid fa-question-circle mr-3","aria-hidden":"true"},null,-1),Cl=c("i",{class:"fa-solid fa-sign-out mr-3","aria-hidden":"true"},null,-1),Tl={key:5,class:"m-0 p-0 list-none flex flex-col gap-2"},Sl=["href"],El=c("i",{class:"fa-solid fa-sign-out-alt mr-3","aria-hidden":"true"},null,-1),Ll={key:1,class:"campaigns p-5"},Dl={key:0,class:"campaigns flex flex-col gap-5"},Ol={class:"flex flex-col gap-2"},Al={class:"flex w-full"},jl={class:"flex-grow uppercase font-bold"},Ml={key:0,class:"flex-grow text-right"},ql=["href"],Pl={class:"grid grid-cols-2 md:grid-cols-3 gap-5"},Il=["href"],Rl={class:"text-xs text-break uppercase"},Bl=c("i",{class:"fa-solid fa-plus","aria-hidden":"true",style:{display:"none"}},null,-1),Fl={key:0},Hl={class:"flex flex-col gap-2"},Nl={key:0,class:"uppercase"},zl={key:1,class:"grid grid-cols-2 md:grid-cols-3 gap-5 following"},Ql=["href"],Vl={class:"text-xs uppercase text-break"};function Ul(e,t,n,r,i,o){const s=Ae("GridSvg"),l=Ae("Notification"),u=Ae("Release"),f=Ae("Campaign"),p=li("click-outside");return h(),m(U,null,[c("div",fs,[c("div",{class:"campaigns inline cursor-pointer text-center px-3 text-2xl",onClick:t[0]||(t[0]=b=>o.openCampaigns()),"aria-label":"Switch campaigns",tabindex:"0",role:"button"},[St(s,{size:7}),ps]),c("div",{class:"profile inline cursor-pointer text-center uppercase pt-1",onClick:t[1]||(t[1]=b=>o.openProfile()),"aria-label":"Profile settings",tabindex:"0",role:"button"},[c("div",hs,[i.show_alerts?(h(),m("span",ms)):T("",!0),o.showInitials()?(h(),m("div",vs,y(n.initials),1)):(h(),m("div",{key:2,class:"w-9 h-9 rounded-lg cover-background",style:Qe({backgroundImage:o.profilePictureUrl()})},null,4))])])]),i.is_expanded?Jt((h(),m("div",gs,[i.is_loading?(h(),m("div",ys,ws)):(h(),m("div",xs,[c("div",_s,[c("div",{class:H(o.blockClass(i.view_campaigns)),onClick:t[2]||(t[2]=b=>o.openCampaigns()),tabindex:"0",role:"button","aria-label":"Campaign list"},[i.view_campaigns?(h(),m("div",$s,[c("div",ks,[St(s,{size:6})]),c("div",Cs,[c("div",Ts,y(i.campaigns.texts.campaigns),1),c("div",null,y(i.campaigns.texts.count),1)])])):(h(),m("div",{key:1,class:"flex items-center justify-center h-full",title:i.campaigns.texts.campaigns},[St(s,{size:6})],8,Ss))],2),c("div",{class:H(o.blockClass(i.view_profile)),onClick:t[3]||(t[3]=b=>o.openProfile()),tabindex:"0",role:"button","aria-label":"Profile pane"},[i.view_profile?(h(),m("div",Es,[o.showInitials()?(h(),m("div",Ls,y(n.initials),1)):(h(),m("div",{key:1,class:"flex-none w-9 h-9 rounded-lg cover-background",style:Qe({backgroundImage:o.profilePictureUrl()})},null,4)),c("div",Ds,[c("div",Os,y(i.profile.name),1),c("div",null,y(i.profile.created),1)])])):(h(),m("div",{key:1,class:"",title:i.profile.your_profile},[o.showInitials()?(h(),m("div",js,y(n.initials),1)):(h(),m("div",{key:1,class:"flex-none w-9 h-9 rounded-lg cover-background",style:Qe({backgroundImage:o.profilePictureUrl()})},null,4))],8,As))],2)]),i.view_profile?(h(),m("div",Ms,[i.notifications.title?(h(),m("div",qs,[c("div",Ps,[c("div",Is,y(i.notifications.title),1),c("div",Rs,[c("a",{href:i.notifications.all.url},y(i.notifications.all.text),9,Bs)])]),c("div",Fs,[(h(!0),m(U,null,te(i.notifications.messages,b=>(h(),Oe(l,{notification:b},null,8,["notification"]))),256))]),i.notifications.messages.length===0?(h(),m("div",Hs,y(i.notifications.none),1)):T("",!0)])):T("",!0),i.releases.title&&i.releases.releases.length>0?(h(),m("div",Ns,[c("div",zs,[c("div",Qs,y(i.releases.title),1)]),c("div",Vs,[(h(!0),m(U,null,te(i.releases.releases,b=>(h(),Oe(u,{release:b},null,8,["release"]))),256))])])):T("",!0),!i.profile.is_impersonating&&i.marketplace.title?(h(),m("div",Us,[c("div",Ws,[c("div",Ks,y(i.marketplace.title),1),c("div",Ys,[c("a",{href:i.marketplace.explore.url,target:"_blank"},y(i.marketplace.explore.text),9,Xs)])]),c("div",Gs,[c("a",{href:i.marketplace.themes.url,class:"border py-2 items-center justify-center rounded-md hover:shadow-md flex flex-col gap-1",target:"_blank"},[Zs,c("div",null,y(i.marketplace.themes.title),1),c("div",el,y(i.marketplace.themes.number),1)],8,Js),c("a",{href:i.marketplace.sheets.url,class:"border py-2 items-center justify-center rounded-md hover:shadow-md flex flex-col gap-1",target:"_blank"},[nl,c("div",null,y(i.marketplace.sheets.title),1),c("div",il,y(i.marketplace.sheets.number),1)],8,tl),c("a",{href:i.marketplace.content.url,class:"border py-2 items-center justify-center rounded-md hover:shadow-md flex flex-col gap-1",target:"_blank"},[ol,c("div",null,y(i.marketplace.content.title),1),c("div",al,y(i.marketplace.content.number),1)],8,rl)])])):T("",!0),i.profile.is_impersonating?T("",!0):(h(),m("div",sl,[c("div",ll,y(i.profile.subscription.title),1),c("a",{class:"border rounded-lg flex justify-center items-center hover:shadow-md",href:i.profile.urls.subscription},[c("div",ul,[c("img",{class:"w-16 h-16",src:i.profile.subscription.image,alt:i.profile.subscription.tier},null,8,dl)]),c("div",fl,[c("div",pl,y(i.profile.subscription.tier),1),i.profile.subscription.tier!=="Kobold"?(h(),m("div",hl,[ee(y(i.profile.subscription.created),1),ml,ee(" "+y(i.profile.subscription.boosters),1)])):(h(),m("div",vl,[ee(y(i.profile.subscription.call_to_action)+" ",1),c("div",gl,y(i.profile.subscription.call_to_action_2),1)]))])],8,cl)])),i.profile.is_impersonating?(h(),m("ul",Tl,[c("li",null,[c("a",{href:i.profile.return.url,class:""},[El,ee(" "+y(i.profile.return.name),1)],8,Sl)])])):(h(),m("ul",yl,[c("li",null,[c("a",{href:i.profile.urls.settings.url,class:"p-2 block"},[wl,ee(" "+y(i.profile.urls.settings.name),1)],8,bl)]),c("li",null,[c("a",{href:i.profile.urls.profile.url,class:"p-2 block"},[_l,ee(" "+y(i.profile.urls.profile.name),1)],8,xl)]),c("li",null,[c("a",{href:i.profile.urls.help.url,class:"p-2 block",target:"_blank"},[kl,ee(" "+y(i.profile.urls.help.name),1)],8,$l)]),c("li",null,[c("a",{href:"#",onClick:t[4]||(t[4]=b=>o.logout()),class:"p-2 block"},[Cl,ee(" "+y(i.profile.urls.logout.name),1)])])]))])):(h(),m("div",Ll,[i.profile.is_impersonating?T("",!0):(h(),m("div",Dl,[c("div",Ol,[c("div",Al,[c("div",jl,y(i.campaigns.texts.campaigns),1),i.campaigns.member.length>0?(h(),m("div",Ml,[c("a",{href:i.campaigns.urls.reorder},y(i.campaigns.texts.reorder),9,ql)])):T("",!0)]),c("div",Pl,[(h(!0),m(U,null,te(i.campaigns.member,b=>(h(),Oe(f,{campaign:b},null,8,["campaign"]))),256)),c("a",{href:i.campaigns.urls.new,class:"new-campaign flex items-center text-center border-dashed border rounded-lg h-24 p-2 overflow-hidden"},[c("span",Rl,[Bl,ee(" "+y(i.campaigns.texts.new),1)])],8,Il)])]),i.profile.is_impersonating?T("",!0):(h(),m("hr",Fl)),c("div",Hl,[i.profile.is_impersonating?T("",!0):(h(),m("p",Nl,y(i.campaigns.texts.followed),1)),i.profile.is_impersonating?T("",!0):(h(),m("div",zl,[(h(!0),m(U,null,te(i.campaigns.following,b=>(h(),Oe(f,{campaign:b},null,8,["campaign"]))),256)),c("a",{href:i.campaigns.urls.follow,class:"new-campaign flex items-center text-center border-dashed border rounded-lg h-24 p-2 overflow-hidden"},[c("span",Vl,y(i.campaigns.texts.follow),1)],8,Ql)]))])]))]))]))])),[[p,o.onClickOutside]]):T("",!0)],64)}const Wl=$e(ds,[["render",Ul]]),Kl=ar(),ut=or({});ut.config.globalProperties.emitter=Kl;ut.component("nav-toggler",co);ut.component("nav-search",_a);ut.component("nav-switcher",Wl);ut.mount("#header");var W="top",ie="bottom",re="right",K="left",yn="auto",dt=[W,ie,re,K],Ve="start",lt="end",Yl="clippingParents",Li="viewport",tt="popper",Xl="reference",Pn=dt.reduce(function(e,t){return e.concat([t+"-"+Ve,t+"-"+lt])},[]),Di=[].concat(dt,[yn]).reduce(function(e,t){return e.concat([t,t+"-"+Ve,t+"-"+lt])},[]),Gl="beforeRead",Jl="read",Zl="afterRead",ec="beforeMain",tc="main",nc="afterMain",ic="beforeWrite",rc="write",oc="afterWrite",ac=[Gl,Jl,Zl,ec,tc,nc,ic,rc,oc];function pe(e){return e?(e.nodeName||"").toLowerCase():null}function J(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function qe(e){var t=J(e).Element;return e instanceof t||e instanceof Element}function ne(e){var t=J(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function bn(e){if(typeof ShadowRoot>"u")return!1;var t=J(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function sc(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},o=t.elements[n];!ne(o)||!pe(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var l=i[s];l===!1?o.removeAttribute(s):o.setAttribute(s,l===!0?"":l)}))})}function lc(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],o=t.attributes[r]||{},s=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),l=s.reduce(function(u,f){return u[f]="",u},{});!ne(i)||!pe(i)||(Object.assign(i.style,l),Object.keys(o).forEach(function(u){i.removeAttribute(u)}))})}}const Oi={name:"applyStyles",enabled:!0,phase:"write",fn:sc,effect:lc,requires:["computeStyles"]};function fe(e){return e.split("-")[0]}var Me=Math.max,qt=Math.min,Ue=Math.round;function un(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Ai(){return!/^((?!chrome|android).)*safari/i.test(un())}function We(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&ne(e)&&(i=e.offsetWidth>0&&Ue(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Ue(r.height)/e.offsetHeight||1);var s=qe(e)?J(e):window,l=s.visualViewport,u=!Ai()&&n,f=(r.left+(u&&l?l.offsetLeft:0))/i,p=(r.top+(u&&l?l.offsetTop:0))/o,b=r.width/i,S=r.height/o;return{width:b,height:S,top:p,right:f+b,bottom:p+S,left:f,x:f,y:p}}function wn(e){var t=We(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function ji(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&bn(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ye(e){return J(e).getComputedStyle(e)}function cc(e){return["table","td","th"].indexOf(pe(e))>=0}function ke(e){return((qe(e)?e.ownerDocument:e.document)||window.document).documentElement}function Rt(e){return pe(e)==="html"?e:e.assignedSlot||e.parentNode||(bn(e)?e.host:null)||ke(e)}function In(e){return!ne(e)||ye(e).position==="fixed"?null:e.offsetParent}function uc(e){var t=/firefox/i.test(un()),n=/Trident/i.test(un());if(n&&ne(e)){var r=ye(e);if(r.position==="fixed")return null}var i=Rt(e);for(bn(i)&&(i=i.host);ne(i)&&["html","body"].indexOf(pe(i))<0;){var o=ye(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function ft(e){for(var t=J(e),n=In(e);n&&cc(n)&&ye(n).position==="static";)n=In(n);return n&&(pe(n)==="html"||pe(n)==="body"&&ye(n).position==="static")?t:n||uc(e)||t}function xn(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ot(e,t,n){return Me(e,qt(t,n))}function dc(e,t,n){var r=ot(e,t,n);return r>n?n:r}function Mi(){return{top:0,right:0,bottom:0,left:0}}function qi(e){return Object.assign({},Mi(),e)}function Pi(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var fc=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,qi(typeof t!="number"?t:Pi(t,dt))};function pc(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,l=fe(n.placement),u=xn(l),f=[K,re].indexOf(l)>=0,p=f?"height":"width";if(!(!o||!s)){var b=fc(i.padding,n),S=wn(o),x=u==="y"?W:K,C=u==="y"?ie:re,_=n.rects.reference[p]+n.rects.reference[u]-s[u]-n.rects.popper[p],k=s[u]-n.rects.reference[u],D=ft(o),A=D?u==="y"?D.clientHeight||0:D.clientWidth||0:0,M=_/2-k/2,a=b[x],L=A-S[p]-b[C],g=A/2-S[p]/2+M,j=ot(a,g,L),B=u;n.modifiersData[r]=(t={},t[B]=j,t.centerOffset=j-g,t)}}function hc(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||ji(t.elements.popper,i)&&(t.elements.arrow=i))}const mc={name:"arrow",enabled:!0,phase:"main",fn:pc,effect:hc,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ke(e){return e.split("-")[1]}var vc={top:"auto",right:"auto",bottom:"auto",left:"auto"};function gc(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:Ue(n*i)/i||0,y:Ue(r*i)/i||0}}function Rn(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,l=e.position,u=e.gpuAcceleration,f=e.adaptive,p=e.roundOffsets,b=e.isFixed,S=s.x,x=S===void 0?0:S,C=s.y,_=C===void 0?0:C,k=typeof p=="function"?p({x,y:_}):{x,y:_};x=k.x,_=k.y;var D=s.hasOwnProperty("x"),A=s.hasOwnProperty("y"),M=K,a=W,L=window;if(f){var g=ft(n),j="clientHeight",B="clientWidth";if(g===J(n)&&(g=ke(n),ye(g).position!=="static"&&l==="absolute"&&(j="scrollHeight",B="scrollWidth")),g=g,i===W||(i===K||i===re)&&o===lt){a=ie;var R=b&&g===L&&L.visualViewport?L.visualViewport.height:g[j];_-=R-r.height,_*=u?1:-1}if(i===K||(i===W||i===ie)&&o===lt){M=re;var P=b&&g===L&&L.visualViewport?L.visualViewport.width:g[B];x-=P-r.width,x*=u?1:-1}}var F=Object.assign({position:l},f&&vc),I=p===!0?gc({x,y:_},J(n)):{x,y:_};if(x=I.x,_=I.y,u){var q;return Object.assign({},F,(q={},q[a]=A?"0":"",q[M]=D?"0":"",q.transform=(L.devicePixelRatio||1)<=1?"translate("+x+"px, "+_+"px)":"translate3d("+x+"px, "+_+"px, 0)",q))}return Object.assign({},F,(t={},t[a]=A?_+"px":"",t[M]=D?x+"px":"",t.transform="",t))}function yc(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,l=n.roundOffsets,u=l===void 0?!0:l,f={placement:fe(t.placement),variation:Ke(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Rn(Object.assign({},f,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:u})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Rn(Object.assign({},f,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const bc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:yc,data:{}};var Ct={passive:!0};function wc(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,l=s===void 0?!0:s,u=J(t.elements.popper),f=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&f.forEach(function(p){p.addEventListener("scroll",n.update,Ct)}),l&&u.addEventListener("resize",n.update,Ct),function(){o&&f.forEach(function(p){p.removeEventListener("scroll",n.update,Ct)}),l&&u.removeEventListener("resize",n.update,Ct)}}const xc={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:wc,data:{}};var _c={left:"right",right:"left",bottom:"top",top:"bottom"};function Lt(e){return e.replace(/left|right|bottom|top/g,function(t){return _c[t]})}var $c={start:"end",end:"start"};function Bn(e){return e.replace(/start|end/g,function(t){return $c[t]})}function _n(e){var t=J(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function $n(e){return We(ke(e)).left+_n(e).scrollLeft}function kc(e,t){var n=J(e),r=ke(e),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,l=0,u=0;if(i){o=i.width,s=i.height;var f=Ai();(f||!f&&t==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:o,height:s,x:l+$n(e),y:u}}function Cc(e){var t,n=ke(e),r=_n(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=Me(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Me(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-r.scrollLeft+$n(e),u=-r.scrollTop;return ye(i||n).direction==="rtl"&&(l+=Me(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:l,y:u}}function kn(e){var t=ye(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Ii(e){return["html","body","#document"].indexOf(pe(e))>=0?e.ownerDocument.body:ne(e)&&kn(e)?e:Ii(Rt(e))}function at(e,t){var n;t===void 0&&(t=[]);var r=Ii(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),o=J(r),s=i?[o].concat(o.visualViewport||[],kn(r)?r:[]):r,l=t.concat(s);return i?l:l.concat(at(Rt(s)))}function dn(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Tc(e,t){var n=We(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Fn(e,t,n){return t===Li?dn(kc(e,n)):qe(t)?Tc(t,n):dn(Cc(ke(e)))}function Sc(e){var t=at(Rt(e)),n=["absolute","fixed"].indexOf(ye(e).position)>=0,r=n&&ne(e)?ft(e):e;return qe(r)?t.filter(function(i){return qe(i)&&ji(i,r)&&pe(i)!=="body"}):[]}function Ec(e,t,n,r){var i=t==="clippingParents"?Sc(e):[].concat(t),o=[].concat(i,[n]),s=o[0],l=o.reduce(function(u,f){var p=Fn(e,f,r);return u.top=Me(p.top,u.top),u.right=qt(p.right,u.right),u.bottom=qt(p.bottom,u.bottom),u.left=Me(p.left,u.left),u},Fn(e,s,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Ri(e){var t=e.reference,n=e.element,r=e.placement,i=r?fe(r):null,o=r?Ke(r):null,s=t.x+t.width/2-n.width/2,l=t.y+t.height/2-n.height/2,u;switch(i){case W:u={x:s,y:t.y-n.height};break;case ie:u={x:s,y:t.y+t.height};break;case re:u={x:t.x+t.width,y:l};break;case K:u={x:t.x-n.width,y:l};break;default:u={x:t.x,y:t.y}}var f=i?xn(i):null;if(f!=null){var p=f==="y"?"height":"width";switch(o){case Ve:u[f]=u[f]-(t[p]/2-n[p]/2);break;case lt:u[f]=u[f]+(t[p]/2-n[p]/2);break}}return u}function ct(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,o=n.strategy,s=o===void 0?e.strategy:o,l=n.boundary,u=l===void 0?Yl:l,f=n.rootBoundary,p=f===void 0?Li:f,b=n.elementContext,S=b===void 0?tt:b,x=n.altBoundary,C=x===void 0?!1:x,_=n.padding,k=_===void 0?0:_,D=qi(typeof k!="number"?k:Pi(k,dt)),A=S===tt?Xl:tt,M=e.rects.popper,a=e.elements[C?A:S],L=Ec(qe(a)?a:a.contextElement||ke(e.elements.popper),u,p,s),g=We(e.elements.reference),j=Ri({reference:g,element:M,strategy:"absolute",placement:i}),B=dn(Object.assign({},M,j)),R=S===tt?B:g,P={top:L.top-R.top+D.top,bottom:R.bottom-L.bottom+D.bottom,left:L.left-R.left+D.left,right:R.right-L.right+D.right},F=e.modifiersData.offset;if(S===tt&&F){var I=F[i];Object.keys(P).forEach(function(q){var Y=[re,ie].indexOf(q)>=0?1:-1,X=[W,ie].indexOf(q)>=0?"y":"x";P[q]+=I[X]*Y})}return P}function Lc(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,l=n.flipVariations,u=n.allowedAutoPlacements,f=u===void 0?Di:u,p=Ke(r),b=p?l?Pn:Pn.filter(function(C){return Ke(C)===p}):dt,S=b.filter(function(C){return f.indexOf(C)>=0});S.length===0&&(S=b);var x=S.reduce(function(C,_){return C[_]=ct(e,{placement:_,boundary:i,rootBoundary:o,padding:s})[fe(_)],C},{});return Object.keys(x).sort(function(C,_){return x[C]-x[_]})}function Dc(e){if(fe(e)===yn)return[];var t=Lt(e);return[Bn(e),t,Bn(t)]}function Oc(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,l=s===void 0?!0:s,u=n.fallbackPlacements,f=n.padding,p=n.boundary,b=n.rootBoundary,S=n.altBoundary,x=n.flipVariations,C=x===void 0?!0:x,_=n.allowedAutoPlacements,k=t.options.placement,D=fe(k),A=D===k,M=u||(A||!C?[Lt(k)]:Dc(k)),a=[k].concat(M).reduce(function(he,oe){return he.concat(fe(oe)===yn?Lc(t,{placement:oe,boundary:p,rootBoundary:b,padding:f,flipVariations:C,allowedAutoPlacements:_}):oe)},[]),L=t.rects.reference,g=t.rects.popper,j=new Map,B=!0,R=a[0],P=0;P<a.length;P++){var F=a[P],I=fe(F),q=Ke(F)===Ve,Y=[W,ie].indexOf(I)>=0,X=Y?"width":"height",z=ct(t,{placement:F,boundary:p,rootBoundary:b,altBoundary:S,padding:f}),Q=Y?q?re:K:q?ie:W;L[X]>g[X]&&(Q=Lt(Q));var N=Lt(Q),le=[];if(o&&le.push(z[I]<=0),l&&le.push(z[Q]<=0,z[N]<=0),le.every(function(he){return he})){R=F,B=!1;break}j.set(F,le)}if(B)for(var ce=C?3:1,Te=function(oe){var me=a.find(function(Pe){var ve=j.get(Pe);if(ve)return ve.slice(0,oe).every(function(Ie){return Ie})});if(me)return R=me,"break"},ue=ce;ue>0;ue--){var Se=Te(ue);if(Se==="break")break}t.placement!==R&&(t.modifiersData[r]._skip=!0,t.placement=R,t.reset=!0)}}const Ac={name:"flip",enabled:!0,phase:"main",fn:Oc,requiresIfExists:["offset"],data:{_skip:!1}};function Hn(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Nn(e){return[W,re,ie,K].some(function(t){return e[t]>=0})}function jc(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=ct(t,{elementContext:"reference"}),l=ct(t,{altBoundary:!0}),u=Hn(s,r),f=Hn(l,i,o),p=Nn(u),b=Nn(f);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:f,isReferenceHidden:p,hasPopperEscaped:b},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":b})}const Mc={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:jc};function qc(e,t,n){var r=fe(e),i=[K,W].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,s=o[0],l=o[1];return s=s||0,l=(l||0)*i,[K,re].indexOf(r)>=0?{x:l,y:s}:{x:s,y:l}}function Pc(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=i===void 0?[0,0]:i,s=Di.reduce(function(p,b){return p[b]=qc(b,t.rects,o),p},{}),l=s[t.placement],u=l.x,f=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=f),t.modifiersData[r]=s}const Ic={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Pc};function Rc(e){var t=e.state,n=e.name;t.modifiersData[n]=Ri({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Bc={name:"popperOffsets",enabled:!0,phase:"read",fn:Rc,data:{}};function Fc(e){return e==="x"?"y":"x"}function Hc(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,l=s===void 0?!1:s,u=n.boundary,f=n.rootBoundary,p=n.altBoundary,b=n.padding,S=n.tether,x=S===void 0?!0:S,C=n.tetherOffset,_=C===void 0?0:C,k=ct(t,{boundary:u,rootBoundary:f,padding:b,altBoundary:p}),D=fe(t.placement),A=Ke(t.placement),M=!A,a=xn(D),L=Fc(a),g=t.modifiersData.popperOffsets,j=t.rects.reference,B=t.rects.popper,R=typeof _=="function"?_(Object.assign({},t.rects,{placement:t.placement})):_,P=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(g){if(o){var q,Y=a==="y"?W:K,X=a==="y"?ie:re,z=a==="y"?"height":"width",Q=g[a],N=Q+k[Y],le=Q-k[X],ce=x?-B[z]/2:0,Te=A===Ve?j[z]:B[z],ue=A===Ve?-B[z]:-j[z],Se=t.elements.arrow,he=x&&Se?wn(Se):{width:0,height:0},oe=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Mi(),me=oe[Y],Pe=oe[X],ve=ot(0,j[z],he[z]),Ie=M?j[z]/2-ce-ve-me-P.mainAxis:Te-ve-me-P.mainAxis,be=M?-j[z]/2+ce+ve+Pe+P.mainAxis:ue+ve+Pe+P.mainAxis,Re=t.elements.arrow&&ft(t.elements.arrow),pt=Re?a==="y"?Re.clientTop||0:Re.clientLeft||0:0,Ye=(q=F==null?void 0:F[a])!=null?q:0,ht=Q+Ie-Ye-pt,mt=Q+be-Ye,Xe=ot(x?qt(N,ht):N,Q,x?Me(le,mt):le);g[a]=Xe,I[a]=Xe-Q}if(l){var Ge,vt=a==="x"?W:K,gt=a==="x"?ie:re,ge=g[L],we=L==="y"?"height":"width",Je=ge+k[vt],Ee=ge-k[gt],Ze=[W,K].indexOf(D)!==-1,yt=(Ge=F==null?void 0:F[L])!=null?Ge:0,bt=Ze?Je:ge-j[we]-B[we]-yt+P.altAxis,wt=Ze?ge+j[we]+B[we]-yt-P.altAxis:Ee,xt=x&&Ze?dc(bt,ge,wt):ot(x?bt:Je,ge,x?wt:Ee);g[L]=xt,I[L]=xt-ge}t.modifiersData[r]=I}}const Nc={name:"preventOverflow",enabled:!0,phase:"main",fn:Hc,requiresIfExists:["offset"]};function zc(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Qc(e){return e===J(e)||!ne(e)?_n(e):zc(e)}function Vc(e){var t=e.getBoundingClientRect(),n=Ue(t.width)/e.offsetWidth||1,r=Ue(t.height)/e.offsetHeight||1;return n!==1||r!==1}function Uc(e,t,n){n===void 0&&(n=!1);var r=ne(t),i=ne(t)&&Vc(t),o=ke(t),s=We(e,i,n),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((pe(t)!=="body"||kn(o))&&(l=Qc(t)),ne(t)?(u=We(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop):o&&(u.x=$n(o))),{x:s.left+l.scrollLeft-u.x,y:s.top+l.scrollTop-u.y,width:s.width,height:s.height}}function Wc(e){var t=new Map,n=new Set,r=[];e.forEach(function(o){t.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(l){if(!n.has(l)){var u=t.get(l);u&&i(u)}}),r.push(o)}return e.forEach(function(o){n.has(o.name)||i(o)}),r}function Kc(e){var t=Wc(e);return ac.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function Yc(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Xc(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var zn={placement:"bottom",modifiers:[],strategy:"absolute"};function Qn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Gc(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,o=i===void 0?zn:i;return function(l,u,f){f===void 0&&(f=o);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},zn,o),modifiersData:{},elements:{reference:l,popper:u},attributes:{},styles:{}},b=[],S=!1,x={state:p,setOptions:function(D){var A=typeof D=="function"?D(p.options):D;_(),p.options=Object.assign({},o,p.options,A),p.scrollParents={reference:qe(l)?at(l):l.contextElement?at(l.contextElement):[],popper:at(u)};var M=Kc(Xc([].concat(r,p.options.modifiers)));return p.orderedModifiers=M.filter(function(a){return a.enabled}),C(),x.update()},forceUpdate:function(){if(!S){var D=p.elements,A=D.reference,M=D.popper;if(Qn(A,M)){p.rects={reference:Uc(A,ft(M),p.options.strategy==="fixed"),popper:wn(M)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(P){return p.modifiersData[P.name]=Object.assign({},P.data)});for(var a=0;a<p.orderedModifiers.length;a++){if(p.reset===!0){p.reset=!1,a=-1;continue}var L=p.orderedModifiers[a],g=L.fn,j=L.options,B=j===void 0?{}:j,R=L.name;typeof g=="function"&&(p=g({state:p,options:B,name:R,instance:x})||p)}}}},update:Yc(function(){return new Promise(function(k){x.forceUpdate(),k(p)})}),destroy:function(){_(),S=!0}};if(!Qn(l,u))return x;x.setOptions(f).then(function(k){!S&&f.onFirstUpdate&&f.onFirstUpdate(k)});function C(){p.orderedModifiers.forEach(function(k){var D=k.name,A=k.options,M=A===void 0?{}:A,a=k.effect;if(typeof a=="function"){var L=a({state:p,name:D,instance:x,options:M}),g=function(){};b.push(L||g)}})}function _(){b.forEach(function(k){return k()}),b=[]}return x}}var Jc=[xc,Bc,bc,Oi,Ic,Ac,Nc,mc,Mc],Zc=Gc({defaultModifiers:Jc}),eu="tippy-box",Bi="tippy-content",tu="tippy-backdrop",Fi="tippy-arrow",Hi="tippy-svg-arrow",De={passive:!0,capture:!0},Ni=function(){return document.body};function Vt(e,t,n){if(Array.isArray(e)){var r=e[t];return r??(Array.isArray(n)?n[t]:n)}return e}function Cn(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function zi(e,t){return typeof e=="function"?e.apply(void 0,t):e}function Vn(e,t){if(t===0)return e;var n;return function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function nu(e){return e.split(/\s+/).filter(Boolean)}function Ne(e){return[].concat(e)}function Un(e,t){e.indexOf(t)===-1&&e.push(t)}function iu(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function ru(e){return e.split("-")[0]}function Pt(e){return[].slice.call(e)}function Wn(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function st(){return document.createElement("div")}function Bt(e){return["Element","Fragment"].some(function(t){return Cn(e,t)})}function ou(e){return Cn(e,"NodeList")}function au(e){return Cn(e,"MouseEvent")}function su(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function lu(e){return Bt(e)?[e]:ou(e)?Pt(e):Array.isArray(e)?e:Pt(document.querySelectorAll(e))}function Ut(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function Kn(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function cu(e){var t,n=Ne(e),r=n[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function uu(e,t){var n=t.clientX,r=t.clientY;return e.every(function(i){var o=i.popperRect,s=i.popperState,l=i.props,u=l.interactiveBorder,f=ru(s.placement),p=s.modifiersData.offset;if(!p)return!0;var b=f==="bottom"?p.top.y:0,S=f==="top"?p.bottom.y:0,x=f==="right"?p.left.x:0,C=f==="left"?p.right.x:0,_=o.top-r+b>u,k=r-o.bottom-S>u,D=o.left-n+x>u,A=n-o.right-C>u;return _||k||D||A})}function Wt(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){e[r](i,n)})}function Yn(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var de={isTouch:!1},Xn=0;function du(){de.isTouch||(de.isTouch=!0,window.performance&&document.addEventListener("mousemove",Qi))}function Qi(){var e=performance.now();e-Xn<20&&(de.isTouch=!1,document.removeEventListener("mousemove",Qi)),Xn=e}function fu(){var e=document.activeElement;if(su(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function pu(){document.addEventListener("touchstart",du,De),window.addEventListener("blur",fu)}var hu=typeof window<"u"&&typeof document<"u",mu=hu?!!window.msCrypto:!1,vu={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},gu={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ae=Object.assign({appendTo:Ni,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},vu,gu),yu=Object.keys(ae),bu=function(t){var n=Object.keys(t);n.forEach(function(r){ae[r]=t[r]})};function Vi(e){var t=e.plugins||[],n=t.reduce(function(r,i){var o=i.name,s=i.defaultValue;if(o){var l;r[o]=e[o]!==void 0?e[o]:(l=ae[o])!=null?l:s}return r},{});return Object.assign({},e,n)}function wu(e,t){var n=t?Object.keys(Vi(Object.assign({},ae,{plugins:t}))):yu,r=n.reduce(function(i,o){var s=(e.getAttribute("data-tippy-"+o)||"").trim();if(!s)return i;if(o==="content")i[o]=s;else try{i[o]=JSON.parse(s)}catch{i[o]=s}return i},{});return r}function Gn(e,t){var n=Object.assign({},t,{content:zi(t.content,[e])},t.ignoreAttributes?{}:wu(e,t.plugins));return n.aria=Object.assign({},ae.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var xu=function(){return"innerHTML"};function fn(e,t){e[xu()]=t}function Jn(e){var t=st();return e===!0?t.className=Fi:(t.className=Hi,Bt(e)?t.appendChild(e):fn(t,e)),t}function Zn(e,t){Bt(t.content)?(fn(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?fn(e,t.content):e.textContent=t.content)}function pn(e){var t=e.firstElementChild,n=Pt(t.children);return{box:t,content:n.find(function(r){return r.classList.contains(Bi)}),arrow:n.find(function(r){return r.classList.contains(Fi)||r.classList.contains(Hi)}),backdrop:n.find(function(r){return r.classList.contains(tu)})}}function Ui(e){var t=st(),n=st();n.className=eu,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=st();r.className=Bi,r.setAttribute("data-state","hidden"),Zn(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props);function i(o,s){var l=pn(t),u=l.box,f=l.content,p=l.arrow;s.theme?u.setAttribute("data-theme",s.theme):u.removeAttribute("data-theme"),typeof s.animation=="string"?u.setAttribute("data-animation",s.animation):u.removeAttribute("data-animation"),s.inertia?u.setAttribute("data-inertia",""):u.removeAttribute("data-inertia"),u.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?u.setAttribute("role",s.role):u.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&Zn(f,e.props),s.arrow?p?o.arrow!==s.arrow&&(u.removeChild(p),u.appendChild(Jn(s.arrow))):u.appendChild(Jn(s.arrow)):p&&u.removeChild(p)}return{popper:t,onUpdate:i}}Ui.$$tippy=!0;var _u=1,Tt=[],Kt=[];function $u(e,t){var n=Gn(e,Object.assign({},ae,Vi(Wn(t)))),r,i,o,s=!1,l=!1,u=!1,f=!1,p,b,S,x=[],C=Vn(ht,n.interactiveDebounce),_,k=_u++,D=null,A=iu(n.plugins),M={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},a={id:k,reference:e,popper:st(),popperInstance:D,props:n,state:M,plugins:A,clearDelayTimeouts:bt,setProps:wt,setContent:xt,show:Xi,hide:Gi,hideWithInteractivity:Ji,enable:Ze,disable:yt,unmount:Zi,destroy:er};if(!n.render)return a;var L=n.render(a),g=L.popper,j=L.onUpdate;g.setAttribute("data-tippy-root",""),g.id="tippy-"+a.id,a.popper=g,e._tippy=a,g._tippy=a;var B=A.map(function(d){return d.fn(a)}),R=e.hasAttribute("aria-expanded");return Re(),ce(),Q(),N("onCreate",[a]),n.showOnCreate&&Je(),g.addEventListener("mouseenter",function(){a.props.interactive&&a.state.isVisible&&a.clearDelayTimeouts()}),g.addEventListener("mouseleave",function(){a.props.interactive&&a.props.trigger.indexOf("mouseenter")>=0&&Y().addEventListener("mousemove",C)}),a;function P(){var d=a.props.touch;return Array.isArray(d)?d:[d,0]}function F(){return P()[0]==="hold"}function I(){var d;return!!((d=a.props.render)!=null&&d.$$tippy)}function q(){return _||e}function Y(){var d=q().parentNode;return d?cu(d):document}function X(){return pn(g)}function z(d){return a.state.isMounted&&!a.state.isVisible||de.isTouch||p&&p.type==="focus"?0:Vt(a.props.delay,d?0:1,ae.delay)}function Q(d){d===void 0&&(d=!1),g.style.pointerEvents=a.props.interactive&&!d?"":"none",g.style.zIndex=""+a.props.zIndex}function N(d,v,w){if(w===void 0&&(w=!0),B.forEach(function(E){E[d]&&E[d].apply(E,v)}),w){var O;(O=a.props)[d].apply(O,v)}}function le(){var d=a.props.aria;if(d.content){var v="aria-"+d.content,w=g.id,O=Ne(a.props.triggerTarget||e);O.forEach(function(E){var V=E.getAttribute(v);if(a.state.isVisible)E.setAttribute(v,V?V+" "+w:w);else{var Z=V&&V.replace(w,"").trim();Z?E.setAttribute(v,Z):E.removeAttribute(v)}})}}function ce(){if(!(R||!a.props.aria.expanded)){var d=Ne(a.props.triggerTarget||e);d.forEach(function(v){a.props.interactive?v.setAttribute("aria-expanded",a.state.isVisible&&v===q()?"true":"false"):v.removeAttribute("aria-expanded")})}}function Te(){Y().removeEventListener("mousemove",C),Tt=Tt.filter(function(d){return d!==C})}function ue(d){if(!(de.isTouch&&(u||d.type==="mousedown"))){var v=d.composedPath&&d.composedPath()[0]||d.target;if(!(a.props.interactive&&Yn(g,v))){if(Ne(a.props.triggerTarget||e).some(function(w){return Yn(w,v)})){if(de.isTouch||a.state.isVisible&&a.props.trigger.indexOf("click")>=0)return}else N("onClickOutside",[a,d]);a.props.hideOnClick===!0&&(a.clearDelayTimeouts(),a.hide(),l=!0,setTimeout(function(){l=!1}),a.state.isMounted||me())}}}function Se(){u=!0}function he(){u=!1}function oe(){var d=Y();d.addEventListener("mousedown",ue,!0),d.addEventListener("touchend",ue,De),d.addEventListener("touchstart",he,De),d.addEventListener("touchmove",Se,De)}function me(){var d=Y();d.removeEventListener("mousedown",ue,!0),d.removeEventListener("touchend",ue,De),d.removeEventListener("touchstart",he,De),d.removeEventListener("touchmove",Se,De)}function Pe(d,v){Ie(d,function(){!a.state.isVisible&&g.parentNode&&g.parentNode.contains(g)&&v()})}function ve(d,v){Ie(d,v)}function Ie(d,v){var w=X().box;function O(E){E.target===w&&(Wt(w,"remove",O),v())}if(d===0)return v();Wt(w,"remove",b),Wt(w,"add",O),b=O}function be(d,v,w){w===void 0&&(w=!1);var O=Ne(a.props.triggerTarget||e);O.forEach(function(E){E.addEventListener(d,v,w),x.push({node:E,eventType:d,handler:v,options:w})})}function Re(){F()&&(be("touchstart",Ye,{passive:!0}),be("touchend",mt,{passive:!0})),nu(a.props.trigger).forEach(function(d){if(d!=="manual")switch(be(d,Ye),d){case"mouseenter":be("mouseleave",mt);break;case"focus":be(mu?"focusout":"blur",Xe);break;case"focusin":be("focusout",Xe);break}})}function pt(){x.forEach(function(d){var v=d.node,w=d.eventType,O=d.handler,E=d.options;v.removeEventListener(w,O,E)}),x=[]}function Ye(d){var v,w=!1;if(!(!a.state.isEnabled||Ge(d)||l)){var O=((v=p)==null?void 0:v.type)==="focus";p=d,_=d.currentTarget,ce(),!a.state.isVisible&&au(d)&&Tt.forEach(function(E){return E(d)}),d.type==="click"&&(a.props.trigger.indexOf("mouseenter")<0||s)&&a.props.hideOnClick!==!1&&a.state.isVisible?w=!0:Je(d),d.type==="click"&&(s=!w),w&&!O&&Ee(d)}}function ht(d){var v=d.target,w=q().contains(v)||g.contains(v);if(!(d.type==="mousemove"&&w)){var O=we().concat(g).map(function(E){var V,Z=E._tippy,Be=(V=Z.popperInstance)==null?void 0:V.state;return Be?{popperRect:E.getBoundingClientRect(),popperState:Be,props:n}:null}).filter(Boolean);uu(O,d)&&(Te(),Ee(d))}}function mt(d){var v=Ge(d)||a.props.trigger.indexOf("click")>=0&&s;if(!v){if(a.props.interactive){a.hideWithInteractivity(d);return}Ee(d)}}function Xe(d){a.props.trigger.indexOf("focusin")<0&&d.target!==q()||a.props.interactive&&d.relatedTarget&&g.contains(d.relatedTarget)||Ee(d)}function Ge(d){return de.isTouch?F()!==d.type.indexOf("touch")>=0:!1}function vt(){gt();var d=a.props,v=d.popperOptions,w=d.placement,O=d.offset,E=d.getReferenceClientRect,V=d.moveTransition,Z=I()?pn(g).arrow:null,Be=E?{getBoundingClientRect:E,contextElement:E.contextElement||q()}:e,Tn={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(_t){var Fe=_t.state;if(I()){var tr=X(),Ht=tr.box;["placement","reference-hidden","escaped"].forEach(function($t){$t==="placement"?Ht.setAttribute("data-placement",Fe.placement):Fe.attributes.popper["data-popper-"+$t]?Ht.setAttribute("data-"+$t,""):Ht.removeAttribute("data-"+$t)}),Fe.attributes.popper={}}}},Le=[{name:"offset",options:{offset:O}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!V}},Tn];I()&&Z&&Le.push({name:"arrow",options:{element:Z,padding:3}}),Le.push.apply(Le,(v==null?void 0:v.modifiers)||[]),a.popperInstance=Zc(Be,g,Object.assign({},v,{placement:w,onFirstUpdate:S,modifiers:Le}))}function gt(){a.popperInstance&&(a.popperInstance.destroy(),a.popperInstance=null)}function ge(){var d=a.props.appendTo,v,w=q();a.props.interactive&&d===Ni||d==="parent"?v=w.parentNode:v=zi(d,[w]),v.contains(g)||v.appendChild(g),a.state.isMounted=!0,vt()}function we(){return Pt(g.querySelectorAll("[data-tippy-root]"))}function Je(d){a.clearDelayTimeouts(),d&&N("onTrigger",[a,d]),oe();var v=z(!0),w=P(),O=w[0],E=w[1];de.isTouch&&O==="hold"&&E&&(v=E),v?r=setTimeout(function(){a.show()},v):a.show()}function Ee(d){if(a.clearDelayTimeouts(),N("onUntrigger",[a,d]),!a.state.isVisible){me();return}if(!(a.props.trigger.indexOf("mouseenter")>=0&&a.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(d.type)>=0&&s)){var v=z(!1);v?i=setTimeout(function(){a.state.isVisible&&a.hide()},v):o=requestAnimationFrame(function(){a.hide()})}}function Ze(){a.state.isEnabled=!0}function yt(){a.hide(),a.state.isEnabled=!1}function bt(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function wt(d){if(!a.state.isDestroyed){N("onBeforeUpdate",[a,d]),pt();var v=a.props,w=Gn(e,Object.assign({},v,Wn(d),{ignoreAttributes:!0}));a.props=w,Re(),v.interactiveDebounce!==w.interactiveDebounce&&(Te(),C=Vn(ht,w.interactiveDebounce)),v.triggerTarget&&!w.triggerTarget?Ne(v.triggerTarget).forEach(function(O){O.removeAttribute("aria-expanded")}):w.triggerTarget&&e.removeAttribute("aria-expanded"),ce(),Q(),j&&j(v,w),a.popperInstance&&(vt(),we().forEach(function(O){requestAnimationFrame(O._tippy.popperInstance.forceUpdate)})),N("onAfterUpdate",[a,d])}}function xt(d){a.setProps({content:d})}function Xi(){var d=a.state.isVisible,v=a.state.isDestroyed,w=!a.state.isEnabled,O=de.isTouch&&!a.props.touch,E=Vt(a.props.duration,0,ae.duration);if(!(d||v||w||O)&&!q().hasAttribute("disabled")&&(N("onShow",[a],!1),a.props.onShow(a)!==!1)){if(a.state.isVisible=!0,I()&&(g.style.visibility="visible"),Q(),oe(),a.state.isMounted||(g.style.transition="none"),I()){var V=X(),Z=V.box,Be=V.content;Ut([Z,Be],0)}S=function(){var Le;if(!(!a.state.isVisible||f)){if(f=!0,g.offsetHeight,g.style.transition=a.props.moveTransition,I()&&a.props.animation){var Ft=X(),_t=Ft.box,Fe=Ft.content;Ut([_t,Fe],E),Kn([_t,Fe],"visible")}le(),ce(),Un(Kt,a),(Le=a.popperInstance)==null||Le.forceUpdate(),N("onMount",[a]),a.props.animation&&I()&&ve(E,function(){a.state.isShown=!0,N("onShown",[a])})}},ge()}}function Gi(){var d=!a.state.isVisible,v=a.state.isDestroyed,w=!a.state.isEnabled,O=Vt(a.props.duration,1,ae.duration);if(!(d||v||w)&&(N("onHide",[a],!1),a.props.onHide(a)!==!1)){if(a.state.isVisible=!1,a.state.isShown=!1,f=!1,s=!1,I()&&(g.style.visibility="hidden"),Te(),me(),Q(!0),I()){var E=X(),V=E.box,Z=E.content;a.props.animation&&(Ut([V,Z],O),Kn([V,Z],"hidden"))}le(),ce(),a.props.animation?I()&&Pe(O,a.unmount):a.unmount()}}function Ji(d){Y().addEventListener("mousemove",C),Un(Tt,C),C(d)}function Zi(){a.state.isVisible&&a.hide(),a.state.isMounted&&(gt(),we().forEach(function(d){d._tippy.unmount()}),g.parentNode&&g.parentNode.removeChild(g),Kt=Kt.filter(function(d){return d!==a}),a.state.isMounted=!1,N("onHidden",[a]))}function er(){a.state.isDestroyed||(a.clearDelayTimeouts(),a.unmount(),pt(),delete e._tippy,a.state.isDestroyed=!0,N("onDestroy",[a]))}}function Ce(e,t){t===void 0&&(t={});var n=ae.plugins.concat(t.plugins||[]);pu();var r=Object.assign({},t,{plugins:n}),i=lu(e),o=i.reduce(function(s,l){var u=l&&$u(l,r);return u&&s.push(u),s},[]);return Bt(e)?o[0]:o}Ce.defaultProps=ae;Ce.setDefaultProps=bu;Ce.currentInput=de;Object.assign({},Oi,{effect:function(t){var n=t.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});Ce.setDefaultProps({render:Ui});const Yt=Array(),Wi=()=>{document.querySelectorAll('[data-toggle="tooltip-ajax"]').forEach(t=>{t.dataset.loaded!=="1"&&(t.dataset.loaded="1",Ce(t,{theme:"kanka",placement:t.dataset.direction??"bottom",allowHTML:!0,interactive:!0,delay:500,appendTo:t.dataset.append??document.body,content:'<i class="fa-solid fa-spin fa-spinner" aria-hidden="true" aria-label="loading..." />',arrow:!0,onShow(n){let r=t.dataset.id;if(r&&r in Yt)return Yt[r];fetch(t.dataset.url).then(i=>i.json()).then(i=>{n.setContent(i[0]),Yt[r]=i[0]}).catch(i=>{n.setContent(`Failed loading tooltip. ${i}`)})}}))})},Ki=()=>{let e=document.querySelectorAll('[data-toggle="tooltip"]');e.forEach(t=>{ei(t)}),e=document.querySelectorAll("[data-tooltip]"),e.forEach(t=>{ei(t)})},ei=e=>{Ce(e,{content:e.dataset.title??e.title,theme:"kanka",delay:250,placement:e.dataset.direction??"bottom",allowHTML:e.dataset.html??!1,appendTo:e.dataset.append??document.body,arrow:!0})},Yi=()=>{document.querySelectorAll("[data-dropdown]").forEach(t=>{if(t.dataset.loaded==="1")return;let n=t.parentNode.querySelectorAll(".dropdown-menu")[0];t.dataset.loaded="1",Ce(t,{content:'<div class="dd-menu flex flex-col gap-1 max-w-2xl">'+n.innerHTML+"</div>",theme:"kanka-dropdown",placement:t.dataset.direction??"bottom",zIndex:890,allowHTML:!0,arrow:!0,interactive:!0,trigger:"click",onShown(r){$(document).trigger("shown.bs.modal")}})})},ku=(e,t)=>{Ce(e,t).show()};Ki();Wi();Yi();window.initTooltips=Ki;window.ajaxTooltip=Wi;window.showTooltip=ku;window.initDropdowns=Yi;$(document).ready(function(){ti(),$(document).on("shown.bs.modal shown.bs.popover",function(){ti()})});function ti(){let e=$(".ajax-subform");e.length!==0&&(e.off("submit"),e.on("submit",function(t){if($(this).attr("is-valid"))return!0;window.entityFormHasUnsavedChanges=!1,t.preventDefault(),Tu($(this));let r=new FormData(this);$.ajax({url:$(this).attr("action"),method:$(this).attr("method"),data:r,cache:!1,contentType:!1,processData:!1,context:this}).done(function(){$(this).attr("is-valid",!0),$(this).off("submit"),$(this).submit()}).fail(function(i){Cu($(this),i)})}))}const Cu=(e,t)=>{if(e.find(".input-error").removeClass("input-error"),e.find(".text-error").remove(),t.status===503){window.showToast(t.responseJSON.message,"error"),Xt(e);return}t.status===403&&($("#entity-form-403-error").show(),Xt(e));let n=t.responseJSON.errors,r=Object.keys(n),i=!0;r.forEach(function(l){$('[name="'+l+'"]').length>0?e.find('[name="'+l+'"]').addClass("input-error").parent().append('<div class="text-error">'+n[l][0]+"</div>"):i=!1});let o=Object.keys(n)[0],s=e.find('[name="'+o+'"]');s.length>0&&s.focus(),i||r.forEach(function(l){window.showToast(n[l][0],"error")}),Xt(e)},Tu=e=>{e.find(".submit-group").find(".btn2").addClass("btn-disabled"),e.find(".submit-group").find(".btn2:first").addClass("loading")},Xt=e=>{e.find(".submit-group").find(".btn2").removeClass("btn-disabled"),e.find(".submit-group").find(".btn2:first").removeClass("loading")};$(document).ready(function(){Du(),window.initForeignSelect(),window.initDialogs(),ni(),Lu(),Su(),Eu(),nr(),hn(),ri(),ii(),oi(),ai(),$(document).on("shown.bs.modal shown.bs.popover",function(){window.initForeignSelect(),window.initTags(),window.initDialogs(),window.initTooltips(),window.initDropdowns(),hn(),ni(),ri(),ii(),oi(),ai()})});function ni(){$.isFunction($.fn.spectrum)&&$.each($(".spectrum"),function(){$(this).spectrum({preferredFormat:"hex",showInput:!0,showPalette:!0,allowEmpty:!0,appendTo:$(this).data("append-to")??null})})}function Su(){let e=$(".list-treeview");if(e.length===0)return;let t=e.data("url");$.each($(".table-nested > tbody > tr"),function(){let n=$(this).data("children");parseInt(n)>0&&($(this).addClass("tr-hover cursor-pointer"),$(this).on("click",function(r){let i=$(r.target);r.target.type!=="checkbox"&&i.data("tree")!=="escape"&&(window.location=t+"?parent_id="+$(this).data("id")+"&m=table")}))})}function Eu(){let e=$(".nav-tabs li a");e.click(function(n){n.preventDefault(),$(this).data("url")||$(this).tab("show")}),e.on("shown.bs.tab",function(n){n.preventDefault();let r=$(n.target).attr("href").substr(1),i=$(n.target).attr("ajax-modal"),o=$(n.target).data("nohash");if(i&&i==="ajax-modal"||o)return!0;window.location.hash="tab_"+r});let t=window.location.hash.replace("tab_","");$('ul.nav-tabs > li > a[href="'+t+'"]').tab("show")}function ii(){$.each($('[data-img="delete"]'),function(){$(this).unbind("click").click(function(e){e.preventDefault(),$("input[name="+$(this).data("target")+"]")[0].value=1,$(this).closest(".preview").hide()})})}function hn(){$(".pagination-ajax-links a").on("click",function(e){e.preventDefault();let t=$(".pagination-ajax-body");return t.find(".modal-loading").show(),t.find(".pagination-ajax-content").hide(),fetch($(this).attr("href")).then(n=>n.text()).then(n=>{t.parent().html(n),hn(),$(document).trigger("shown.bs.modal")}),!1})}function ri(){$('[data-toggle="confirm-delete"]').unbind("click").on("click",function(e){if(e.preventDefault(),$(this).data("confirming")===1){$(this).addClass("loading"),$(this).html("");let t=$(this).data("target");$(t).length===0?console.error("Unknown target",t):$(t).submit();return}$(this).data("confirming",1),$(this).find("span").html($(this).data("confirm"))}),$('a[data-toggle="delete-form"]').unbind("click").click(function(e){e.preventDefault();let t=$(this).data("target");$(t).submit()})}function Lu(){$(".submenu-switcher").change(function(e){e.preventDefault();let t=$(this).find(":selected");window.location.href=t.data("route")})}function Du(){let e=0;const t={window:$(window).height(),header:$("header").length>0?$("header").outerHeight():0,footer:$(".main-footer").length>0?$(".main-footer").outerHeight():0,sidebar:$(".main-sidebar .sidebar").length>0?$(".main-sidebar .sidebar").height():0,controlSidebar:e};let n=Ou(t),r=$(".content-wrapper");n===t.controlSidebar?r.css("min-height",n):n===t.window?r.css("min-height",n-t.header-t.footer):r.css("min-height",n-t.header)}function Ou(e){let t=0;return Object.keys(e).forEach(n=>{e[n]>t&&(t=e[n])}),t}const oi=()=>{document.querySelectorAll(".btn-feedback").forEach(e=>{e.dataset.feedback||(e.dataset.feedback=1,e.addEventListener("click",n=>{n.target.classList.add("loading")},!1))}),$("#quick-privacy-select").change(function(){let e=$(this).data("url");axios.post(e).then(t=>{window.showToast(t.data.success.toast);let n=document.querySelector("body");t.data.success.status?n.classList.remove("kanka-entity-private"):n.classList.add("kanka-entity-private")})})},ai=()=>{document.querySelectorAll("[data-dismisses]").forEach(t=>{t.addEventListener("click",function(n){n.preventDefault();let r=document.querySelector(this.dataset.dismisses);r.classList.remove("opacity-100"),r.classList.add("opacity-0"),setTimeout(function(){r.remove()},150)})})};
