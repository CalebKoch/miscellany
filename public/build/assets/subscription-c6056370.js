let m,g,r,i,c,a,s,p,l;const f=document.getElementById("subscribe-confirm"),b=()=>{h(),S(),window.onEvent(function(){L()})},h=()=>{const e=document.getElementById("stripe-token");m=Stripe(e.value),g=m.elements()},L=()=>{var n;if(i=document.querySelector(".subscription-confirm-button"),document.getElementById("card-element")){if(!r){let o={base:{color:"#555555",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"14px","::placeholder":{color:"#777777"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}};r=g.create("card",{hidePostalCode:!0,style:o})}r.mount("#card-element")}(n=document.getElementById("subscription-confirm"))==null||n.addEventListener("submit",y),c=document.getElementById("coupon-check"),c&&(a=document.getElementById("coupon-success"),s=document.getElementById("coupon-invalid"),p=document.getElementById("coupon"),l=document.getElementById("coupon-validating"),c.addEventListener("change",v),c.addEventListener("focusout",v))},v=e=>{const n=e.target,o=n.value,d=n.dataset.url;o||(i.classList.remove("btn-disabled","loading"),i.disabled=!1),l.classList.remove("hidden"),fetch(d+"&coupon="+o).then(t=>t.json()).then(t=>{if(i.classList.remove("btn-disabled","loading"),i.disabled=!1,l.classList.add("hidden"),!t.valid){a.classList.add("hidden"),s.innerHTML=t.error,s.classList.remove("hidden"),p.value="",f.classList.remove("valid-coupon");return}document.getElementById("pricing-now").innerHTML=t.price,s.classList.add("hidden"),a.innerHTML=t.discount,a.classList.remove("hidden"),p.value=t.coupon,f.classList.add("valid-coupon")}).catch(t=>{l.classList.add("hidden"),t.responseJSON&&(s.innerHTML=t.responseJSON.message,s.classList.remove("hidden"))})},y=e=>{const n=e.target;e.preventDefault(),E(e);const o=document.querySelector('input[name="subscription-intent-token"]'),d=document.querySelector(".alert-error");d.classList.add("hidden");const t=document.querySelector('input[name="payment_id"]');if(t.value)return n.submit(),!1;m.confirmCardSetup(o.value,{payment_method:{card:r,billing_details:{name:document.querySelector('input[name="card-holder-name"]').value}}}).then((function(u){if(u.error)return i.classList.remove("disabled","loading"),i.disabled="",d.innerHTML=u.error.message,d.classList.remove("hidden"),!1;t.value=u.setupIntent.payment_method,n.submit()}).bind(globalThis))};function S(){const e=document.getElementById("pricing-overview"),n=document.querySelector('input[name="period"]');n.addEventListener("change",function(){this.checked?(e.classList.remove("period-month"),e.classList.add("period-year")):(e.classList.remove("period-year"),e.classList.add("period-month"))}),n.checked&&(e.classList.remove("period-month"),e.classList.add("period-year"))}const E=e=>{const o=e.target.querySelector(".subscription-confirm-button");return o.classList.add("disabled","loading"),o.disabled=!0,!0};b();
