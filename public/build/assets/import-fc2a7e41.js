import{a as d}from"./axios-47b9d439.js";$(document).ready(function(){c()});var n;const c=()=>{let o=document.getElementById("campaign-import-form");o&&(n=$(".progress"),o.onsubmit=i=>{i.preventDefault();let a=0,e=new FormData,t=document.getElementById("export-files");Array.from(t.files).forEach(s=>{s.name.endsWith(".zip")&&(a++,e.append("files[]",s))});let r=document.querySelector('input[name="campaign"]');e.append("campaign",r.value);let l=document.querySelector('input[name="token"]');if(e.append("token",l.value),a>0&&a<2)p(o,e);else return alert("Please select the campaign export zip files."),document.querySelector(".loading").classList.remove("loading"),!1})},p=(o,i)=>{o.classList.add("hidden");let a={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){let t=Math.round(e.loaded*100/e.total);$('[role="progressbar"]').css("width",t+"%"),t===100&&($(".progress-uploading").hide(),$(".progress-validating").show()),$(".progress-percent").show().html(t)}};n.show(),$(".progress-uploading").show(),$(".progress-validating").hide(),d.post(o.action,i,a).then(function(e){n.hide(),e.data.success&&window.location.reload()}).catch(function(e){if(o.classList.remove("hidden"),n.hide(),e.response&&e.response.data.message){fileError.text(e.response.data.message).fadeToggle();let r=e.response.data.errors;Object.keys(r).forEach(s=>{window.showToast(r[s],"error")})}document.querySelector(".loading").classList.remove("loading")})};
