import{a as c}from"./index-0b481a1e.js";import"./_commonjsHelpers-725317a4.js";$(document).ready(function(){d()});var r;const d=()=>{let t=document.getElementById("campaign-import-form");t&&(r=$(".progress"),t.onsubmit=n=>{n.preventDefault();let a=0,e=new FormData,o=document.getElementById("export-files");console.log("files",o.files),Array.from(o.files).forEach(l=>{l.name.endsWith(".zip")&&(a++,e.append("files[]",l))});let i=document.querySelector('input[name="campaign"]');e.append("campaign",i.value);let s=document.querySelector('input[name="token"]');if(e.append("token",s.value),a>0&&a<2)p(t,e);else return alert("Please select the campaign export zip files."),document.querySelector(".loading").classList.remove("loading"),!1})},p=(t,n)=>{console.log("start");let a={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){let o=Math.round(e.loaded*100/e.total);$('[role="progressbar"]').css("width",o+"%")}};r.show(),c.post(t.action,n,a).then(function(e){console.log("yo?"),r.hide(),e.data.success}).catch(function(e){if(alert("oops"),r.hide(),e.response&&e.response.data.message){fileError.text(e.response.data.message).fadeToggle();let o=e.response.data.errors;Object.keys(o).forEach(s=>{window.showToast(o[s],"error")})}})};
