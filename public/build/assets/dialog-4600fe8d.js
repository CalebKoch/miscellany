const l=document.getElementById("dialog-backdrop");let d;const a=()=>{document.querySelectorAll('[data-toggle="dialog"]').forEach(e=>{e.addEventListener("click",c)}),document.querySelectorAll('[data-toggle="dialog-ajax"]').forEach(e=>{e.addEventListener("click",c)})},u=new Event("dialog.loaded");function c(e){e.preventDefault();let n=this.dataset.target;if(!n)return;let i=this.dataset.url,t=this.dataset.focus;s(n,i,t)}const s=(e,n,i)=>{if(e=document.getElementById(e),e.removeAttribute("open"),e.show(),l.classList.remove("hidden"),e.dataset.dismissible!=="false"&&l.addEventListener("click",function(t){e.close()}),e.addEventListener("click",function(t){let o=e.getBoundingClientRect();!(o.top<=t.clientY&&t.clientY<=o.top+o.height&&o.left<=t.clientX&&t.clientX<=o.left+o.width)&&t.target.tagName==="DIALOG"&&e.close()}),e.addEventListener("close",function(t){l.classList.add("hidden")}),n)f(n,e);else if(i){let t=document.querySelector(i);if(!t)return;t.focus()}},f=(e,n)=>{d?n.innerHTML=d:d=n.innerHTML,fetch(e,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(i=>i.text()).then(i=>{n.innerHTML=i,n.show(),typeof $=="function"?window.triggerEvent():document.dispatchEvent(u)})},r=e=>{document.getElementById(e).close()};window.initDialogs=a;window.openDialog=s;window.closeDialog=r;
