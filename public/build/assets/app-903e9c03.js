import{d as xn}from"./delete-confirm-63bc2c61.js";import{d as Qi}from"./mention-5d95822d.js";import{a as Zn}from"./ajax-modal-1230002e.js";import{S as ei}from"./sortable.esm-be94e56d.js";import{_ as ke,c as m,a as c,t as y,o as h,n as Ue,w as zi,b as D,F as Z,r as fe,d as ue,e as z,f as De,g as Ve,h as Kt,i as Ui,v as Vi,j as Wi,k as ti,l as Ki}from"./_plugin-vue_export-helper-c420bb3b.js";import{m as Yi}from"./mitt-f7ef348c.js";import{v as ni}from"./v-click-outside.umd-d5c5f7b0.js";import"./_commonjsHelpers-725317a4.js";$(document).ready(function(){window.initTags=function(){$.each($(".form-tags"),function(){$(this).hasClass("select2-hidden-accessible")||$(this).select2({tags:$(this).data("allow-new"),allowClear:$(this).data("allow-clear"),dropdownParent:$(this).data("dropdown-parent")||"",minimumInputLength:0,ajax:{quietMillis:500,delay:500,url:$(this).data("url"),dataType:"json",data:function(e){return{q:$.trim(e.term)}},processResults:function(e){return{results:e}},cache:!0},createTag:function(e){var t=$.trim(e.term);return t===""?null:{id:t,text:t,newTag:!0}},templateResult:function(e){var t=$("<span class='block grow text-left'>"+e.text+"</span>");return e.colour&&(t=$("<span class='flex gap-2 items-center text-left'><span class='rounded-full flex-none w-6 h-6 "+e.colour+"' /></span><span class='grow'>"+e.text+"</span></span>")),t},templateSelection:function(e,t){if(e.newTag)return $('<span class="new-tag" title="'+$("#tags").data("new-tag")+'">'+e.text+' <i class="fa-solid fa-plus-circle" aria-hidden="true"></i></span>');let n=$(e.element);return e.colour?$(t).addClass(e.colour):n.data("colour")&&$(t).addClass(n.data("colour")),$(t).addClass("text-left"),e.text}})})},window.initTags()});/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/ca",[],function(){return{errorLoading:function(){return"La càrrega ha fallat"},inputTooLong:function(t){var n=t.input.length-t.maximum,r="Si us plau, elimina "+n+" car";return r+=n==1?"àcter":"àcters"},inputTooShort:function(t){var n=t.minimum-t.input.length,r="Si us plau, introdueix "+n+" car";return r+=n==1?"àcter":"àcters"},loadingMore:function(){return"Carregant més resultats…"},maximumSelected:function(t){var n="Només es pot seleccionar "+t.maximum+" element";return t.maximum!=1&&(n+="s"),n},noResults:function(){return"No s'han trobat resultats"},searching:function(){return"Cercant…"},removeAllItems:function(){return"Treu tots els elements"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/de",[],function(){return{errorLoading:function(){return"Die Ergebnisse konnten nicht geladen werden."},inputTooLong:function(t){return"Bitte "+(t.input.length-t.maximum)+" Zeichen weniger eingeben"},inputTooShort:function(t){return"Bitte "+(t.minimum-t.input.length)+" Zeichen mehr eingeben"},loadingMore:function(){return"Lade mehr Ergebnisse…"},maximumSelected:function(t){var n="Sie können nur "+t.maximum+" Element";return t.maximum!=1&&(n+="e"),n+=" auswählen"},noResults:function(){return"Keine Übereinstimmungen gefunden"},searching:function(){return"Suche…"},removeAllItems:function(){return"Entferne alle Elemente"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var n=t.input.length-t.maximum,r="Please delete "+n+" character";return n!=1&&(r+="s"),r},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(t){var n="You can only select "+t.maximum+" item";return t.maximum!=1&&(n+="s"),n},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/es",[],function(){return{errorLoading:function(){return"No se pudieron cargar los resultados"},inputTooLong:function(t){var n=t.input.length-t.maximum,r="Por favor, elimine "+n+" car";return r+=n==1?"ácter":"acteres"},inputTooShort:function(t){var n=t.minimum-t.input.length,r="Por favor, introduzca "+n+" car";return r+=n==1?"ácter":"acteres"},loadingMore:function(){return"Cargando más resultados…"},maximumSelected:function(t){var n="Sólo puede seleccionar "+t.maximum+" elemento";return t.maximum!=1&&(n+="s"),n},noResults:function(){return"No se encontraron resultados"},searching:function(){return"Buscando…"},removeAllItems:function(){return"Eliminar todos los elementos"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/fr",[],function(){return{errorLoading:function(){return"Les résultats ne peuvent pas être chargés."},inputTooLong:function(t){var n=t.input.length-t.maximum;return"Supprimez "+n+" caractère"+(n>1?"s":"")},inputTooShort:function(t){var n=t.minimum-t.input.length;return"Saisissez au moins "+n+" caractère"+(n>1?"s":"")},loadingMore:function(){return"Chargement de résultats supplémentaires…"},maximumSelected:function(t){return"Vous pouvez seulement sélectionner "+t.maximum+" élément"+(t.maximum>1?"s":"")},noResults:function(){return"Aucun résultat trouvé"},searching:function(){return"Recherche en cours…"},removeAllItems:function(){return"Supprimer tous les éléments"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/hr",[],function(){function t(n){var r=" "+n+" znak";return n%10<5&&n%10>0&&(n%100<5||n%100>19)?n%10>1&&(r+="a"):r+="ova",r}return{errorLoading:function(){return"Preuzimanje nije uspjelo."},inputTooLong:function(n){return"Unesite "+t(n.input.length-n.maximum)},inputTooShort:function(n){return"Unesite još "+t(n.minimum-n.input.length)},loadingMore:function(){return"Učitavanje rezultata…"},maximumSelected:function(n){return"Maksimalan broj odabranih stavki je "+n.maximum},noResults:function(){return"Nema rezultata"},searching:function(){return"Pretraga…"},removeAllItems:function(){return"Ukloni sve stavke"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/hu",[],function(){return{errorLoading:function(){return"Az eredmények betöltése nem sikerült."},inputTooLong:function(t){return"Túl hosszú. "+(t.input.length-t.maximum)+" karakterrel több, mint kellene."},inputTooShort:function(t){return"Túl rövid. Még "+(t.minimum-t.input.length)+" karakter hiányzik."},loadingMore:function(){return"Töltés…"},maximumSelected:function(t){return"Csak "+t.maximum+" elemet lehet kiválasztani."},noResults:function(){return"Nincs találat."},searching:function(){return"Keresés…"},removeAllItems:function(){return"Távolítson el minden elemet"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/it",[],function(){return{errorLoading:function(){return"I risultati non possono essere caricati."},inputTooLong:function(t){var n=t.input.length-t.maximum,r="Per favore cancella "+n+" caratter";return r+=n!==1?"i":"e"},inputTooShort:function(t){return"Per favore inserisci "+(t.minimum-t.input.length)+" o più caratteri"},loadingMore:function(){return"Caricando più risultati…"},maximumSelected:function(t){var n="Puoi selezionare solo "+t.maximum+" element";return t.maximum!==1?n+="i":n+="o",n},noResults:function(){return"Nessun risultato trovato"},searching:function(){return"Sto cercando…"},removeAllItems:function(){return"Rimuovi tutti gli oggetti"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/nl",[],function(){return{errorLoading:function(){return"De resultaten konden niet worden geladen."},inputTooLong:function(t){return"Gelieve "+(t.input.length-t.maximum)+" karakters te verwijderen"},inputTooShort:function(t){return"Gelieve "+(t.minimum-t.input.length)+" of meer karakters in te voeren"},loadingMore:function(){return"Meer resultaten laden…"},maximumSelected:function(t){var n=t.maximum==1?"kan":"kunnen",r="Er "+n+" maar "+t.maximum+" item";return t.maximum!=1&&(r+="s"),r+=" worden geselecteerd"},noResults:function(){return"Geen resultaten gevonden…"},searching:function(){return"Zoeken…"},removeAllItems:function(){return"Verwijder alle items"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/pl",[],function(){var t=["znak","znaki","znaków"],n=["element","elementy","elementów"],r=function(i,a){return i===1?a[0]:i>1&&i<=4?a[1]:i>=5?a[2]:void 0};return{errorLoading:function(){return"Nie można załadować wyników."},inputTooLong:function(i){var a=i.input.length-i.maximum;return"Usuń "+a+" "+r(a,t)},inputTooShort:function(i){var a=i.minimum-i.input.length;return"Podaj przynajmniej "+a+" "+r(a,t)},loadingMore:function(){return"Trwa ładowanie…"},maximumSelected:function(i){return"Możesz zaznaczyć tylko "+i.maximum+" "+r(i.maximum,n)},noResults:function(){return"Brak wyników"},searching:function(){return"Trwa wyszukiwanie…"},removeAllItems:function(){return"Usuń wszystkie przedmioty"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/pt-BR",[],function(){return{errorLoading:function(){return"Os resultados não puderam ser carregados."},inputTooLong:function(t){var n=t.input.length-t.maximum,r="Apague "+n+" caracter";return n!=1&&(r+="es"),r},inputTooShort:function(t){return"Digite "+(t.minimum-t.input.length)+" ou mais caracteres"},loadingMore:function(){return"Carregando mais resultados…"},maximumSelected:function(t){var n="Você só pode selecionar "+t.maximum+" ite";return t.maximum==1?n+="m":n+="ns",n},noResults:function(){return"Nenhum resultado encontrado"},searching:function(){return"Buscando…"},removeAllItems:function(){return"Remover todos os itens"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/ru",[],function(){function t(n,r,i,a){return n%10<5&&n%10>0&&n%100<5||n%100>20?n%10>1?i:r:a}return{errorLoading:function(){return"Невозможно загрузить результаты"},inputTooLong:function(n){var r=n.input.length-n.maximum,i="Пожалуйста, введите на "+r+" символ";return i+=t(r,"","a","ов"),i+=" меньше"},inputTooShort:function(n){var r=n.minimum-n.input.length,i="Пожалуйста, введите ещё хотя бы "+r+" символ";return i+=t(r,"","a","ов")},loadingMore:function(){return"Загрузка данных…"},maximumSelected:function(n){var r="Вы можете выбрать не более "+n.maximum+" элемент";return r+=t(n.maximum,"","a","ов")},noResults:function(){return"Совпадений не найдено"},searching:function(){return"Поиск…"},removeAllItems:function(){return"Удалить все элементы"}}}),e.define,e.require})();/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/sk",[],function(){var t={2:function(n){return n?"dva":"dve"},3:function(){return"tri"},4:function(){return"štyri"}};return{errorLoading:function(){return"Výsledky sa nepodarilo načítať."},inputTooLong:function(n){var r=n.input.length-n.maximum;return r==1?"Prosím, zadajte o jeden znak menej":r>=2&&r<=4?"Prosím, zadajte o "+t[r](!0)+" znaky menej":"Prosím, zadajte o "+r+" znakov menej"},inputTooShort:function(n){var r=n.minimum-n.input.length;return r==1?"Prosím, zadajte ešte jeden znak":r<=4?"Prosím, zadajte ešte ďalšie "+t[r](!0)+" znaky":"Prosím, zadajte ešte ďalších "+r+" znakov"},loadingMore:function(){return"Načítanie ďalších výsledkov…"},maximumSelected:function(n){return n.maximum==1?"Môžete zvoliť len jednu položku":n.maximum>=2&&n.maximum<=4?"Môžete zvoliť najviac "+t[n.maximum](!1)+" položky":"Môžete zvoliť najviac "+n.maximum+" položiek"},noResults:function(){return"Nenašli sa žiadne položky"},searching:function(){return"Vyhľadávanie…"},removeAllItems:function(){return"Odstráňte všetky položky"}}}),e.define,e.require})();$(document).ready(function(){window.initForeignSelect=function(){$("select.select2").length!==0&&($.each($("select.select2"),function(e){if($(this).hasClass("select2-hidden-accessible"))return;if($(this).hasClass("campaign-genres")){$(this).select2({tags:!1,allowClear:!0,dropdownParent:"",width:"100%",maximumSelectionLength:3});return}let t=$(this).data("allow-clear"),n=$(this).data("dropdown-parent");$(this).select2({tags:!1,placeholder:$(this).data("placeholder"),allowClear:t||!0,language:$(this).data("language"),minimumInputLength:0,dropdownParent:n||"",width:"100%",ajax:{delay:500,quietMillis:500,url:$(this).data("url"),dataType:"json",data:function(r){return{q:$.trim(r.term)}},processResults:function(r){return{results:r}},error:function(r){return console.log("error",r),r.status===503&&window.showToast(r.responseJSON.message,"toast-error"),{results:[]}},cache:!0},templateResult:function(r){var i="";return r.image?i=$("<span class='flex gap-2 items-center text-left'><img src='"+r.image+"' class='rounded-full flex-none w-6 h-6'/><span class='grow'>"+r.text+"</span></span>"):i=$("<span>"+r.text+"</span>"),i},createTag:function(r){return null}})}),$("select.select2-local").select2({placeholder:$(this).data("placeholder"),language:$(this).data("language"),allowClear:!0}),$("select.select2-colour").select2({allowClear:!1,templateResult:_n,templateSelection:_n}))}});function _n(e){if(e.id==="none")return e.text;var t=$('<span><div class="badge label bg-'+e.id+'"> </div>'+e.text+"</span>");return t}Array();window.ajaxTooltip=function(){};$(document).ready(function(){$.each($("form"),function(){$(this).data("shortcut")&&Ji(this)}),Xi(),Gi()});function Xi(){$(document).bind("keydown",function(e){let t=$(e.target),n=$("#entity-modal"),r=$(".quick-creator-button"),i=$('[data-keyboard="edit"]');if(e.key==="]"){if(Ct(t))return;$(".sidebar-toggle").click().blur()}else{if(e.key==="k")return Ct(t)?void 0:($("#entity-lookup").focus(),!1);if(e.key==="n"&&!(e.ctrlKey||e.metaKey)&&!e.altKey&&r.length>0){if(Ct(t)||(n.data("bs.modal")||{}).isShown)return;r[0].click()}else if(e.key==="e"&&!(e.ctrlKey||e.metaKey)&&i.length===1){if(Ct(t)||(n.data("bs.modal")||{}).isShown)return;i[0].click()}else e.key==="Escape"&&n.has(".qq-modal-selection").length===1&&n.modal("hide")}})}function Ct(e){return e.length===0?!1:e.is("input")||e.is("select")||e.is("textarea")||e.attr("contentEditable")==="true"||e.hasClass("CodeMirror")}function Ji(e){$(document).bind("keydown",function(t){if((t.ctrlKey||t.metaKey)&&t.key.toLowerCase()==="s")return window.entityFormHasUnsavedChanges=!1,t.shiftKey?Nt("submit-update"):t.altKey&&Nt("submit-new"),$(e).submit(),!1;if((t.ctrlKey||t.metaKey)&&t.altKey&&t.key==="c")return window.entityFormHasUnsavedChanges=!1,Nt("submit-copy"),$(e).submit(),!1})}function Nt(e){let t=$("#form-submit-main");t&&(t.attr("name",e),$("#submit-mode").attr("name",e))}function Gi(){$('input[data-paste="fontawesome"]').on("paste",function(e){e.preventDefault();let t;if(e.clipboardData||e.originalEvent.clipboardData?t=(e.originalEvent||e).clipboardData.getData("text/plain"):window.clipboardData&&(t=window.clipboardData.getData("Text")),t.startsWith('<i class="fa')||t.startsWith('<i class="ra')){let n=$(t).attr("class");if(n){$(this).val(n);return}}$(this).val(t)})}var at,Ae,Yt,V,$e,_e,oe,it,Ot,Le,ii,Dt;$(document).ready(function(){cr(),Zn(),ri(),rr(),Dt=$('#form-entry input[name="name"]'),Dt.length===1&&er(),tr(),nr(),ir(),oi(),ai(),Zi(),ar(),si(),li(),sr(),lr(),ur()});function Zi(){$(document).on("shown.bs.modal shown.bs.popover",function(){ai(),ri(),oi()}),$("#campaign-delete-confirm").on("shown.bs.modal",function(){$("#campaign-delete-form").focus()})}function er(){Dt.data("live-disabled")||Dt.focusout(function(){if(!$(this).val())return;let e=$(".duplicate-entity-warning"),t=$(this).data("id"),n=$(this).data("live")+"?q="+encodeURIComponent($(this).val())+"&type="+$(this).data("type")+"&exclude="+$(this).data("id");e.hide(),$.ajax(n).done(function(r){if(r.length>0){let i=Object.keys(r).filter(function(a){return!t||t!=r[a].id}).map(function(a){return'<a href="'+r[a].url+'">'+r[a].name+"</a>"});i.length>0&&($("#duplicate-entities").html(i.join(", ")),e.fadeIn())}else e.hide()})})}function ri(){if(at=$(".form-submit-actions"),at.length===0)return;let e=$("#form-submit-main"),t=$("#submit-mode");if(t===void 0)throw new Error("No submit mode hidden input found");$.each(at,function(){$(this).data("loaded")!==1&&($(this).data("loaded",1),$(this).unbind("click").on("click",function(){return t.attr("name",$(this).data("action")),e.trigger("click"),!1}))})}function tr(){$.each($("form"),function(){$(this).on("submit",function(){window.entityFormHasUnsavedChanges=!1;var e=$(this).find(".btn-primary");return e.length>0&&($.each(e,function(){$(this).hasClass("dropdown-toggle")?$(this).prop("disabled",!0):$(this).prop("disabled",!0).addClass("loading")}),$(this).append('<input type="hidden" name="'+$("#form-submit-main").attr("name")+'" />')),!0})})}function nr(){Ae=$("#entity-calendar-form-add"),V=$('[name="calendar_id"]'),$(".entity-calendar-modal-form"),Le=$(".entity-calendar-subform"),it=$("#entity-calendar-form-cancel"),Yt=$(".entity-calendar-form"),_e=$('input[name="calendar_year"]'),$e=$('select[name="calendar_month"]'),oe=$('select[name="calendar_day"]'),Ot=$(".entity-calendar-loading"),Ae.length===1&&(Ae.on("click",function(e){e.preventDefault(),Ae.hide(),Yt.show();let t=$(this).data("default-calendar");return t&&(V.val(t),it.show(),Le.fadeIn(),At(t)),!1}),it.on("click",function(e){e.preventDefault(),V.val(null),it.hide(),Xt()})),V.length===1&&V.on("change",function(){if(Le.hide(),!$(this).val()){Xt();return}_e=$('input[name="calendar_year"]'),$e=$('select[name="calendar_month"]'),oe=$('select[name="calendar_day"]'),_e.length===0&&$('input[name="year"]').length===1&&(_e=$('input[name="year"]'),$e=$('select[name="month"]'),oe=$('input[name="day"]')),At(V.val())}),dr()}function ai(){$("#entity-calendar-modal-add").length!==0&&(Ae=$("input[name=calendar-data-url]"),V=$('select[name="calendar_id"]'),_e=$('input[name="year"]'),$e=$('select[name="month"]'),oe=$('input[name="day"]'),Ot=$(".entity-calendar-loading"),Le=$(".entity-calendar-subform"),V.on("change",function(){if(Le.hide(),!V.val()){Xt();return}At(V.val())}),V.val()&&(it.show(),Le.fadeIn(),At(V.val())),$('.entity-calendar-subform input[name="length"]').focusout(function(){if(!$(this).val())return;let e=$(this).data("url").replace("/0/","/"+V.val()+"/"),t={day:oe.val(),month:$e.val(),year:_e.val(),length:$(this).val()};$.ajax(e,{data:t}).done(function(n){n.overflow==!0?$(".length-warning").show():$(".length-warning").hide()})}))}function ir(){if($("#era-form-add").length===0)return;Ae=$("#era-form-add");let e=$('[name="era_id"]');ii=e.val(),V.val()&&$n(e.val()),e.length===1&&e.on("change",function(){$('select[name="position"]'),$n(e.val())})}function At(e){Ot.show(),e=parseInt(e);var t=$('input[name="calendar-data-url"]').data("url").replace("/0/","/"+e+"/");$.ajax(t).done(function(n){let r=oe.val();_e.html(""),$e.html(""),oe.html("");let i=1,a=1;r||(r=n.current.day);let l=parseInt(n.current.month);$.each(n.months,function(s){let u=n.months[s],p=i===l?' selected="selected"':"";$e.append('<option value="'+i+'" data-length="'+u.length+'" '+p+">"+this.name+"</option>"),i===l&&(a=u.length),i++});for(let s=1;s<a;s++){let u=s==r?' selected="selected"':"";oe.append('<option value="'+s+'" '+u+">"+s+"</option>")}Ot.hide(),Le.show(),_e.val(n.current.year),$('select[name="calendar_recurring_periodicity"] option').remove(),$.each(n.recurring,function(s,u){$('select[name="calendar_recurring_periodicity"]').append('<option value="'+s+'">'+u+"</option>")}),$('input[name="length"]').val(1),n.length===1&&$e.val(n[0].id),or()})}function $n(e){e=parseInt(e);var t=$('input[name="era-data-url"]').data("url").replace("/0/","/"+e+"/"),n=$('input[name="oldPosition"]').data("url");$.ajax(t).done(function(r){let i=$('select[name="position"]');i.html("");let a=1;$.each(r.positions,function(l){let s=r.positions[l],u=' selected="selected"';n&&!l&&ii==e&&i.append('<option value="" data-length="'+s.length+'" '+u+">"+s+"</option>"),l&&i.append('<option value="'+a+'" data-length="'+s.length+'" '+u+">"+s+"</option>"),a++})})}function Xt(){Yt.hide(),Ae.show(),$('input[name="calendar_day"]').val(null),$('input[name="calendar_month"]').val(null),$('input[name="calendar_year"]').val(null),$('input[name="calendar_id"]').val(null)}function rr(){if(at=$('form[data-unload="1"]'),at.length===0)return;let e=$("#form-submit-main");$(document).on("change",":input",function(){$(this).data("skip-unsaved")||(window.entityFormHasUnsavedChanges=!0)}),e.length===1&&$(window).bind("beforeunload",function(t){if(window.entityFormHasUnsavedChanges)return"Unsaved data warning"})}function oi(){$('form[data-maintenance="1"]').each(function(){$(this).data("with-maintenance")!==!0&&($(this).data("with-maintenance",!0),$(this).submit(function(e){if($(this).data("checked-maintenance")===!0)return!0;e.preventDefault();let t={url:$(this).attr("action"),method:$(this).attr("method"),data:$(this).serialize(),context:this};if($(this).find('input[type="file"]').not(".note-image-input").length>0){let n=new FormData(this);t={url:$(this).attr("action"),method:$(this).attr("method"),data:n,cache:!1,contentType:!1,processData:!1,context:this}}$.ajax(t).done(function(){$(this).data("checked-maintenance",!0).submit()}).fail(function(n){window.formErrorHandler(n,this)})}))})}function ar(){$(".permission-toggle").change(function(){let t="input[data-action="+$(this).data("action")+"]";$(this).prop("checked")?$(t).prop("checked",!0):$(t).prop("checked",!1)})}function or(){$.isFunction($.fn.spectrum)&&$(".spectrum").spectrum({preferredFormat:"hex",showInput:!0,showPalette:!0,allowEmpty:!0})}function si(){let e=$(".entity-story-block .collapse"),t=$(".entity-story-block .element-toggle");$(".btn-post-collapse").unbind("click").click(function(){return e.collapse("hide"),t.addClass("collapsed"),!1}),$(".btn-post-expand").unbind("click").click(function(){return e.collapse("show"),t.removeClass("collapsed"),!1})}function sr(){$(".sidebar-section-title").click(function(){$(this).next().hasClass("in")?($(this).find(".fa-chevron-down").hide(),$(this).find(".fa-chevron-right").show()):($(this).find(".fa-chevron-right").hide(),$(this).find(".fa-chevron-down").show())})}function li(){$(".story-load-more").click(function(e){let t=$(this);return e.preventDefault(),$("#story-more-spinner").show(),$(this).hide(),$.ajax({url:$(this).data("url")}).done(function(n){t.parent().remove(),n&&($(".entity-posts").append(n),li(),si(),window.ajaxTooltip())}).fail(function(){$("#story-more-spinner").hide(),t.show()}),!1})}function lr(){$(".domain-trust").click(function(){let e="kanka_trusted_domains",t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");t=t?t[2]:"";let n=$(this).data("domain");t.includes(n)||(t&&(t+="|"),t+=n);let r=new Date;r.setTime(r.getTime()+30*24*60*60*1e3),document.cookie=e+"="+t+";expires="+r.toUTCString()+";sameSite=Strict"})}function cr(){$(".dynamic-row-add").on("click",function(e){e.preventDefault();let t=$(this).data("target"),n=$(this).data("template");return $("."+t).append('<div class="">'+$("#"+n).html()+"</div>"),kn(),!1}),kn()}function kn(){$.each($(".dynamic-row-delete"),function(){$(this).data("init")!==1&&$(this).data("init",1).on("click",function(e){e.preventDefault(),$(this).closest(".parent-delete-row").remove()}).on("keydown",function(e){e.key==="Enter"&&$(this).click()})})}function ur(){$('input[data-toggle="entity-privacy"]').change(function(){let e=$("#entity-is-private");$(this).prop("checked")?e.show():e.hide()})}function dr(){$('select[name="calendar_month"]').change(function(){let e=$(this).find(":selected").data("length");fr(e)})}function fr(e){let t=oe.val();t>e&&(t=e),oe.html("");for(let n=1;n<=e;n++){let r=n==t?' selected="selected"':"";oe.append('<option value="'+n+'" '+r+">"+n+"</option>")}}var Jt;$(document).ready(function(){Jt=$(".post-perm-add"),Jt.length!==0&&(pr(),ci())});function pr(){Jt.on("click",function(e){e.preventDefault();let t=$(this).data("type"),n=$('select[name="'+t+'"]');if(!n||!n.val())return!1;let r=n.find(":selected")[0],i=$("#post-perm-"+t+"-template").clone().removeClass("hidden").removeAttr("id"),a=i.html().replace(/\$SELECTEDID\$/g,n.val()).replace(/\$SELECTEDNAME\$/g,r.text);return i.html(a).insertBefore($("#post-perm-target")),$("#post-new-"+t).modal("toggle"),ci(),n.val("").trigger("change"),!1})}function ci(){$.each($(".post-delete-perm"),function(){$(this).unbind("click"),$(this).on("click",function(){$(this).closest(".grid").remove()})})}var Cn;$(document).ready(function(){Cn=$("#calendar-year-switcher"),Cn.length===1&&($("#calendar-year-switcher-field"),$("#add-calendar-event"),hr()),$(document).on("shown.bs.modal",function(){Tn()}),$('select[name="recurring_periodicity"]').length===1&&Tn(),mr()});function hr(){$(".calendar-event-block").each(function(){$(this).data("toggle")!=="ajax-modal"&&$(this).data("url")&&$(this).click(function(){window.location=$(this).data("url")})})}function Tn(){$('select[name="recurring_periodicity"]').change(function(){this.value?$("#add_event_recurring_until").show():$("#add_event_recurring_until").hide()}),$("#calendar-action-existing").click(function(e){e.preventDefault(),$("#calendar-event-first").hide(),$(".calendar-new-event-field").hide(),$("#calendar-event-subform").fadeToggle(),$("#calendar-event-submit").toggle()}),$("#calendar-action-new").click(function(e){e.preventDefault(),$("#calendar-event-first").hide(),$(".calendar-existing-event-field").hide(),$("#calendar-event-subform").fadeToggle(),$("#calendar-event-submit").toggle()}),$("#calendar-event-switch").click(function(e){e.preventDefault(),$("#calendar-event-subform").hide(),$("#calendar-event-first").fadeToggle(),$(".calendar-existing-event-field").show(),$(".calendar-new-event-field").show(),$("#calendar-event-submit").toggle()})}function mr(){$('[data-shortcut="previous"]').length!==0&&$(document).bind("keydown",function(e){(e.ctrlKey||e.metaKey)&&e.which===37?$('[data-shortcut="previous"]').addClass("loading")[0].click():(e.ctrlKey||e.metaKey)&&e.which===39&&$('[data-shortcut="next"]').addClass("loading")[0].click()})}var Me,Gt=300*1e3,ui,Zt=!0;$(document).ready(function(){Me=$("#entity-edit-warning"),Me.length!==0&&(vr(),gr())});function vr(){Zt=!1,Me.modal({backdrop:!1}),$("#entity-edit-warning-ignore").click(function(e){e.preventDefault(),Sn(),Zt=!0,$.ajax({url:$(this).data("url"),type:"POST",context:this}).done(function(){Me.modal("hide")})}),$("#entity-edit-warning-back").click(function(e){e.preventDefault(),Sn(),window.location.href=$(this).data("url")})}function Sn(){Me.find(".modal-ajax-body").hide(),Me.find(".modal-spinner-body").show(),Me.find(".modal-footer").hide()}function gr(){let e=$("#editing-keep-alive");e.length!==0&&(ui=e.data("url"),setTimeout(en,Gt))}function en(){if(!Zt){setTimeout(en,Gt);return}$.ajax({url:ui,type:"POST"}).done(function(){setTimeout(en,Gt)})}var ee="#entity-modal",Tt;$(document).ready(function(){$(document).on("shown.bs.modal shown.bs.popover",function(){It()}),$(".quick-creator-subform").click(function(){$.ajax({url:$(this).data("url")}).done(function(e){$(ee).find(".modal-content").show().html(e),$(ee).find(".modal-spinner").hide(),$(ee).modal(),un()})})});function It(){$('[data-toggle="entity-creator"]').unbind("click").click(function(e){return e.preventDefault(),$(this).data("type")==="inline"?($(".quick-creator-body").hide(),$(".quick-creator-footer").hide(),$(".quick-creator-loading").show()):fi(),$.ajax({url:$(this).data("url"),context:this}).done(function(n){$(ee).find(".modal-content").show().html(n),$(ee).find(".modal-spinner").hide(),un(),dn()}),!1})}function di(){$("#qq-name-field").unbind("focusout").focusout(function(){$(this).val()&&($(this).parent().parent().find(".duplicate-entity-warning").hide(),$.ajax({url:$(this).data("live")+"?q="+$(this).val()+"&type="+$(this).data("type"),context:this}).done(function(e){if(e.length>0){let t=Object.keys(e).map(function(n){return'<a href="'+e[n].url+'">'+e[n].name+"</a>"}).join(", ");$(this).parent().parent().find(".duplicate-entities").html(t),$(this).parent().parent().find(".duplicate-entity-warning").fadeIn()}else $(this).parent().parent().find(".duplicate-entity-warning").hide()}))})}function fi(){$(ee).find(".modal-content").hide(),$(ee).find(".modal-spinner").show()}function un(){Tt=$(".quick-creator-submit"),window.initForeignSelect(),window.initTags(),di(),pi(),dn(),Tt.on("click",function(e){let t=$(this).data("action");return t&&$('#entity-creator-form [name="action"]').val(t),!0}),$("#entity-creator-form").submit(function(e){e.preventDefault(),Tt.prop("disabled",!0).find("span").hide().parent().find("i.fa-spin").show(),$("div.text-error").remove(),$.post({url:$(this).attr("action"),data:$(this).serialize(),context:this}).done(function(t){if(typeof t=="object"){if(t.redirect){window.location.replace(t.redirect);return}let n=new Option(t._name,t._id),r=$("#"+t._target);if(t._multi){let i=r.val();i.push(t._id),r.append(n).val(i)}else r.children().remove().end().append(n).val(t._id);r.trigger("change"),$(ee).find(".modal-content").html("").show(),$(ee).find(".modal-spinner").hide(),$(ee).modal("toggle"),tn();return}$(ee).find(".modal-content").html(t).show(),$(ee).find(".modal-spinner").hide(),It(),tn()}).fail(function(t){if(t.responseJSON.errors){let n=t.responseJSON.errors;Object.keys(n).forEach(function(l){let s=$('#entity-creator-form [name="'+l+'"]');s.length>0&&s.addClass("input-error").parent().append('<div class="text-error">'+n[l][0]+"</div>")});let i=Object.keys(n)[0],a=$('#entity-creator-form input[name="'+i+'"]');if(a[0]){a[0].scrollIntoView({behavior:"smooth"}),$(".tab-content .active").removeClass("active"),$(".nav-tabs li.active").removeClass("active");let l=$('[name="'+i+'"').closest(".tab-pane");l.addClass("active"),$('a[href="#'+l.attr("id")+'"]').closest("li").addClass("active")}}Tt.prop("disabled",!1).find("i.fa-spin").hide().parent().find("span").show(),$('#entity-creator-form [name="action"]').val("")})})}function pi(){$("#entity-creator-back").click(function(e){e.preventDefault(),fi(),$.ajax({url:$(this).data("url"),context:this}).done(function(t){let n=$(this).data("target");$(n).find(".modal-content").html(t).show(),$(n).find(".modal-spinner").hide(),It()})})}function dn(){$(".qq-mode-toggle").unbind("click").on("click",function(e){e.preventDefault(),!$(this).hasClass("active")&&($(".qq-mode-toggle").removeClass("active"),$(this).addClass("active"),$(".quick-creator-body").hide(),$(".quick-creator-footer").hide(),$(".quick-creator-loading").show(),$.ajax({url:$(this).data("url")}).done(function(t){$("#entity-modal").find(".modal-content").html(t).show(),tn()}))}),$(".qq-action-more").unbind("click").on("click",function(e){e.preventDefault(),$(this).hide(),$(".qq-more-fields").show()}),It()}function tn(){dn(),di(),pi(),un(),window.initForeignSelect(),window.initTags()}var Qe,rt,yr=new IntersectionObserver(function(e){e[0].isIntersecting===!0&&rn($(".datagrid-onload"))},{threshold:[0]});$(document).ready(function(){mi(),hi(),Lt(),wr()});function hi(){$("[data-bulk-action]").on("click",function(){br($(this).data("bulk-action"))}),$(".bulk-print").on("click",function(e){e.preventDefault();let t=$(this).closest("form");t.find(),t.submit()})}function mi(){var e=$("#datagrid-select-all");e.length>0&&e.unbind("click").click(function(){$(this).prop("checked")?$.each($("input[name='model[]']"),function(){$(this).prop("checked",!0)}):$.each($("input[name='model[]']"),function(){$(this).prop("checked",!1)}),Lt()}),$.each($("input[name='model[]']"),function(){$(this).change(function(t){Lt(),t.preventDefault()})})}function br(e){var t=[];$.each($("input[name='model[]']"),function(){$(this).prop("checked")&&t.push($(this).val())}),$("#datagrid-bulk-"+e+"-models").val(t.toString())}function Lt(){var e=!0;$.each($("input[name='model[]']"),function(){$(this).prop("checked")&&(e=!1)}),e?$(".datagrid-bulk-actions .btn2").prop("disabled",!0).addClass("btn-disabled"):$(".datagrid-bulk-actions .btn2").prop("disabled",!1).removeClass("btn-disabled").removeClass("disabled")}function wr(){nn(),vi(),xr(),Lt(),nn()}function nn(){$(".datagrid-bulk").click(function(e){e.preventDefault(),Qe=$(this).closest("form");let t=[];$.each($("input[name='model[]']"),function(){$(this).prop("checked")&&t.push($(this).val())}),$.ajax({url:Qe.attr("action")+"?action=edit",method:"POST",data:{model:t}}).done(function(n){$("#entity-modal").find(".modal-content").html(n),$("#entity-modal").modal()})}),$(".datagrid-submit").click(function(e){if(e.preventDefault(),Qe=$(this).closest("form"),Qe.find('input[name="action"]').val($(this).data("action")),$(this).data("action")==="delete")return $("#datagrid-bulk-delete").modal(),!1;$(".datagrid-bulk-actions").hide(),$(".datagrid-spinner").show(),Qe.submit()}),$("#datagrid-action-confirm").click(function(){$("#datagrid-bulk-delete").modal("hide"),Qe.submit()})}function vi(){$.each($('table[data-render="datagrid2"]'),function(){rt=$(this),$(this).find("thead a").click(function(e){e.preventDefault(),rn($(this))}),$(this).closest("#datagrid-parent").find('nav[role="navigation"] a').click(function(e){e.preventDefault(),rn($(this))})}),mi(),hi(),nn()}function xr(){$(".datagrid-onload").length!=0&&yr.observe(document.querySelector(".datagrid-onload"))}function rn(e){rt.find("thead").hide(),rt.find("tbody").hide(),rt.find("tfoot").fadeIn();let t=e.attr("href"),n=e.data("url");t==="#"&&n&&(t=n);let r=e.data("target")??"#datagrid-parent";$.ajax(t).done(function(i){i.html&&$(r).html(i.html),i.deletes&&$("#datagrid-delete-forms").html(i.deletes),i.url&&window.history.pushState({},"",i.url),vi(),$(document).trigger("shown.bs.modal"),Zn()}).fail(function(i){console.error("datagrid2",i),rt.find("tfoot").addClass("bg-danger")})}$(document).ready(function(){_r(),$r()});function _r(){let e=$("#quick-link-selector");if(e.length===0)return!1;e.change(function(t){t.preventDefault();let n=$(this).find(":selected");$(".quick-link-subform").hide();let r=n.data("target");$(r).show()})}function $r(){let e=$("#entity-selector");if(e.length===0)return!1;e.val()!=""&&$("#filter-subform").show(),e.change(function(){e.val()==""?($("#filter-subform").hide(),console.log(e.val())):$("#filter-subform").show()})}$(document).ready(function(){kr()});function kr(){let e=$("#post-layout-selector");e.length!==0&&e.change(function(t){t.preventDefault(),$(this).find(":selected").val()===""?($("#field-entry").show(),$("#field-location").show(),$("#field-display").show(),$("#post-layout-subform").hide()):($("#field-entry").hide(),$("#field-location").hide(),$("#field-display").hide(),$("#post-layout-subform").show())})}$(document).ready(function(){$(document).on("shown.bs.modal shown.bs.popover",function(){jn()}),$(".form-members").count!==0&&jn()});function jn(){$.each($(".form-members"),function(){let e=$(this);if(e.data("loaded")===1)return;e.data("loaded",1);let t=e.data("allow-clear");e.select2({tags:!0,allowClear:t||!0,minimumInputLength:0,ajax:{quietMillis:500,delay:500,url:e.data("url"),dataType:"json",data:function(n){return{q:$.trim(n.term)}},processResults:function(n){return{results:n}},cache:!0},createTag:function(){}})})}$(document).ready(function(){Cr(),Tr(),Sr(),Er(),Or(),Dr(),jr(),Ar(),Lr()});function Cr(){$.each($(".form-rpg-systems"),function(){$(this).select2({multiple:!0,allowClear:!0,minimumInputLength:0})})}function Tr(){$("#campaign-modules").length!==0&&$('input[name="enabled"]').change(function(e){e.preventDefault();let t=$(this).closest(".box-module").find("h3");t.hasClass("loading")||(t.addClass("loading"),$.ajax({method:"post",url:$(this).data("url"),context:this}).done(function(n){n.success&&(n.status?$(this).closest(".box-module").addClass("module-enabled"):$(this).closest(".box-module").removeClass("module-enabled"),window.showToast(n.toast)),$(this).closest(".box-module").find("h3").removeClass("loading")}))})}function Sr(){$(".btn-user-roles").popover({html:!0,sanitize:!1,trigger:"focus"})}function jr(){$(".public-permission").click(function(e){e.preventDefault(),$(this).addClass("loading"),$.ajax({method:"post",url:$(this).data("url"),context:this}).done(function(t){$(this).removeClass("loading"),t.success&&(t.status?$(this).addClass("enabled"):$(this).removeClass("enabled"),window.showToast(t.toast))})})}function Er(){$.each($(".codemirror"),function(){let e=$(this).attr("id");CodeMirror.fromTextArea(document.getElementById(e),{extraKeys:{"Ctrl-Space":"autocomplete"},lineNumbers:!0,lineWrapping:!0,theme:"dracula"})})}function Or(){let e=[].slice.call(document.querySelectorAll(".nested-sortable"));for(let t=0;t<e.length;t++)new ei(e[t],{group:"nested",handle:".dnd-handle",animation:150,fallbackOnBody:!0,swapThreshold:.65,onMove:function(n,r){let i=n.dragged,a=n.related,l=$(a).parents(".fixed-position").length>0;return!(i.classList.contains("fixed-position")&&l)}})}function Dr(){let e=$(".campaign-export-btn");e.length!==0&&e.click(function(t){t.preventDefault(),$(this).addClass("loading"),$.ajax({url:e.data("url"),method:"POST",context:this}).done(function(n){$(this).removeClass("loading").hide(),n.error?window.showToast(n.error,"toast-error"):window.showToast(n.success)}).fail(function(n){console.error("campaign export call",n)})})}function Ar(){let e=$("form#campaign-style");e.length!==0&&e.on("submit",function(t){let n=$($(this).data("error"));return $('textarea[name="content"]').val().length<$(this).data("max-content")?(n.hide(),!0):(n.show(),$("form .submit-group .btn").prop("disabled",!1),!1)})}function Lr(){$('input[name="vanity"]').focusout(function(e){let t=$(this).val(),n=$("#vanity-error"),r=$("#vanity-success"),i=$("#vanity-loading");if(n.html("").hide(),r.hide(),!t)return;i.show();let a={};a.vanity=t,$.post({url:$(this).data("url"),method:"POST",context:this,data:a}).done(function(l){$(this).val(l.vanity),r.find("code").html(l.vanity),r.show(),n.hide(),i.hide()}).fail(function(l){let s="";l.responseJSON.errors.vanity.forEach(u=>s+=u+" "),n.html(s).show(),r.hide(),i.hide()})})}const Mr=()=>{document.querySelectorAll("[data-clipboard]").forEach(t=>{t.dataset.loaded!=1&&(t.dataset.loaded=1,t.addEventListener("click",Pr,!1))})};function Pr(e){e.preventDefault(),Ir(this.dataset.clipboard,this);let t=this.dataset.toast;return t&&window.showToast(t),!1}async function Ir(e,t){if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(e);else{const n=document.createElement("textarea");n.value=e,n.style.position="absolute",n.style.left="-999999px",t.append(n),n.select();try{document.execCommand("copy")}catch(r){console.error(r)}finally{n.remove()}}}Mr();$(document).ready(function(){gi()});function gi(){$('.toast-container [data-toggle="dismiss"]').unbind("click").on("click",function(e){e.preventDefault(),$(this).parent().parent().fadeOut()})}window.showToast=function(e,t){t=t||"toast-success";let n=$('<div class="'+t+' mt-2 text-right">');n.html('<span class="toast-message inline-block p-3">'+e+'<i class="fa-solid fa-times cursor-pointer ml-1" data-toggle="dismiss"></i></span'),$(".toast-container").append(n),setTimeout(function(){n.fadeOut()},3e3),gi()};window.handleExploreMapClick=function(e){if(!window.exploreEditMode)return;let t=e.latlng,n=t.lat.toFixed(3),r=t.lng.toFixed(3);if(window.drawingPolygon){window.addPolygonPosition(n,r);return}$("#marker-latitude").val(n),$("#marker-longitude").val(r),$("#marker-modal").modal("show")};+function(e){var t="lte.pushmenu",n={collapseScreenSize:767,expandOnHover:!1,expandTransitionDelay:200},r={collapsed:".sidebar-collapse",open:".sidebar-open",mainSidebar:".main-sidebar",contentWrapper:".content-wrapper",searchInput:".sidebar-form .form-control",button:'[data-toggle="push-menu"]',mini:".sidebar-mini",expanded:".sidebar-expanded-on-hover",layoutFixed:".fixed"},i={collapsed:"sidebar-collapse",open:"sidebar-open",mini:"sidebar-mini",expanded:"sidebar-expanded-on-hover",expandFeature:"sidebar-mini-expand-feature",layoutFixed:"fixed"},a={expanded:"expanded.pushMenu",collapsed:"collapsed.pushMenu"},l=function(p){this.options=p,this.init()};l.prototype.init=function(){(this.options.expandOnHover||e("body").is(r.mini+r.layoutFixed))&&(this.expandOnHover(),e("body").addClass(i.expandFeature)),e(r.contentWrapper).click(function(){e(window).width()<=this.options.collapseScreenSize&&e("body").hasClass(i.open)&&this.close()}.bind(this)),e(r.searchInput).click(function(p){p.stopPropagation()})},l.prototype.toggle=function(){var p=e(window).width(),f=!e("body").hasClass(i.collapsed);p<=this.options.collapseScreenSize&&(f=e("body").hasClass(i.open)),f?this.close():this.open()},l.prototype.open=function(){var p=e(window).width();p>this.options.collapseScreenSize?e("body").removeClass(i.collapsed).trigger(e.Event(a.expanded)):e("body").addClass(i.open).trigger(e.Event(a.expanded))},l.prototype.close=function(){var p=e(window).width();p>this.options.collapseScreenSize?e("body").addClass(i.collapsed).trigger(e.Event(a.collapsed)):e("body").removeClass(i.open+" "+i.collapsed).trigger(e.Event(a.collapsed))},l.prototype.expandOnHover=function(){e(r.mainSidebar).hover(function(){e("body").is(r.mini+r.collapsed)&&e(window).width()>this.options.collapseScreenSize&&this.expand()}.bind(this),function(){e("body").is(r.expanded)&&this.collapse()}.bind(this))},l.prototype.expand=function(){setTimeout(function(){e("body").removeClass(i.collapsed).addClass(i.expanded)},this.options.expandTransitionDelay)},l.prototype.collapse=function(){setTimeout(function(){e("body").removeClass(i.expanded).addClass(i.collapsed)},this.options.expandTransitionDelay)};function s(p){return this.each(function(){var f=e(this),x=f.data(t);if(!x){var T=e.extend({},n,f.data(),typeof p=="object"&&p);f.data(t,x=new l(T))}p==="toggle"&&x.toggle()})}var u=window.$.fn.pushMenu;window.$.fn.pushMenu=s,window.$.fn.pushMenu.Constructor=l,window.$.fn.pushMenu.noConflict=function(){return window.$.fn.pushMenu=u,this},window.$(document).on("click",r.button,function(p){p.preventDefault(),s.call(window.$(this),"toggle")}),window.$(window).on("load",function(){s.call(window.$(r.button))})}(jQuery);const Rr=()=>{document.querySelectorAll(".banner-notification-dismiss").forEach(e=>{e.addEventListener("click",qr,!1)})};function qr(e){e.preventDefault(),axios.post(this.dataset.url).then(()=>{let t=this.dataset.dismiss;if(!t)return;let n=document.querySelector(t);n&&n.classList.add("hidden")})}Rr();window.initSortable=function(){let e=document.querySelectorAll(".sortable-elements");e.length!==0&&e.forEach(t=>{let n={},r=t.dataset.handle;r&&(n.handle=r),ei.create(t,n)})};window.initSortable();window.formErrorHandler=function(e,t){if($(".input-error").removeClass("input-error"),$(".text-error").remove(),$(t).find(".btn-primary").prop("disabled",!1).removeClass("loading"),e.status===503){window.showToast(e.responseJSON.message,"toast-error");return}if(e.status===403){$("#entity-form-403-error").show();return}let n=e.responseJSON.errors,r=[],i=Object.keys(n),a=!0;if(i.forEach(function(p){let f=$('[name="'+p+'"]');f.length>0?f.addClass("input-error").parent().append('<div class="text-error">'+n[p][0]+"</div>"):(a=!1,r.push(n[p][0])),window.showToast(n[p][0],"toast-error")}),!a){let p=$("#entity-form-generic-error .error-logs");p.html(""),r.forEach(function(f){let x=f+"<br />";p.append(x)}),$("#entity-form-generic-error").show()}if($(t).find(".tab-content").length===0)return;let l=Object.keys(n)[0],s=document.getElementsByName(l);if(!s[0])return;$(".tab-content .active").removeClass("active"),$(".nav-tabs li.active").removeClass("active");let u=$('[name="'+l+'"').closest(".tab-pane");u.addClass("active"),$('a[href="#'+u.attr("id")+'"]').closest("li").addClass("active"),s[0].scrollIntoView({behavior:"smooth"})};const Br=()=>{document.querySelectorAll('[data-toggle="dialog"]').forEach(e=>{e.addEventListener("click",En,!1)}),document.querySelectorAll('[data-toggle="dialog-ajax"]').forEach(e=>{e.addEventListener("click",En,!1)})};function En(e){e.preventDefault();let t=this.dataset.target;if(!t)return;t=document.getElementById(t),t.removeAttribute("open"),t.showModal(),t.addEventListener("click",function(r){let i=t.getBoundingClientRect();!(i.top<=r.clientY&&r.clientY<=i.top+i.height&&i.left<=r.clientX&&r.clientX<=i.left+i.width)&&r.target.tagName==="DIALOG"&&t.close()});let n=this.dataset.url;n&&Fr(n,t)}const Fr=(e,t)=>{$.ajax({url:e}).done(function(n){$(t).html(n).show(),$(document).trigger("shown.bs.modal"),$(".btn-manage-perm").click(function(r){r.preventDefault(),t.close();let i=$(this).data("target");$(i).click()})})};window.initDialogs=Br;const Nr={props:{text:String,title:String}},Hr={class:"mx-5"},Qr=["data-title"],zr=c("i",{class:"fa-solid fa-chevrons-left","aria-hidden":"true","data-sidebar":"collapse"},null,-1),Ur=c("i",{class:"fa-solid fa-chevrons-right","aria-hidden":"true","data-sidebar":"expand"},null,-1),Vr={class:"sr-only"};function Wr(e,t,n,r,i,a){return h(),m("div",Hr,[c("span",{role:"button",class:"sidebar-toggle text-center cursor-pointer","data-toggle":"tooltip","data-title":n.title,"data-placement":"right","data-html":"true",tabindex:"3"},[zr,Ur,c("span",Vr,y(n.text),1)],8,Qr)])}const Kr=ke(Nr,[["render",Wr]]),Yr={props:["entity"],methods:{backgroundImage:function(e){return"url('"+e.image+"')"},preview:function(e){this.emitter.emit("preview",e)}}},Xr=["data-id"],Jr={class:"flex-none"},Gr=["href","title"],Zr={class:"flex-grow truncate pl-1"},ea=["title"],ta={class:"entity-type text-xs"};function na(e,t,n,r,i,a){return h(),m("div",{class:"flex justify-center gap-1 mb-1 cursor-pointer hover:bg-base-200 rounded p-1 w-full","data-id":n.entity.id,onClick:t[1]||(t[1]=l=>a.preview(n.entity))},[c("div",Jr,[c("a",{href:n.entity.link,style:Ue({backgroundImage:a.backgroundImage(n.entity)}),onClick:t[0]||(t[0]=zi(()=>{},["stop"])),title:n.entity.name,class:"rounded cover-background block h-16 w-16"},null,12,Gr)]),c("div",Zr,[c("div",{class:"font-extrabold entity-name truncate",title:n.entity.name},y(n.entity.name),9,ea),c("div",ta,y(n.entity.type),1)])],8,Xr)}const yi=ke(Yr,[["render",na]]),ia={props:["entity"],components:{LookupEntity:yi},data(){return{focus_profile:!0,focus_pins:!1,focus_access:!1}},methods:{hasTitle(){return this.entity.title},tagClass(e){let t="inline-block rounded-xl px-3 py-1 mr-2 bg-base-100 text-black text-xs mb-1";return e.colour&&(t+=" bg-"+e.colour,e.colour==="black"&&(t+=" text-white")),t},backgroundImage:function(){return"url('"+this.entity.image+"')"},tabClass:function(e){let t="p-1 px-1 mx-1 pt-2 select-none text-center truncate border-b-2 border-solid border-r-0 border-t-0 border-l-0";return e==="profile"&&this.focus_profile||e==="links"&&this.focus_pins||e==="access"&&this.focus_access?t+=" font-black border-slate-600":t+=" cursor-pointer border-base-100",t},switchTab:function(e){this.focus_profile=!1,this.focus_pins=!1,this.focus_access=!1,e==="profile"?this.focus_profile=!0:e==="links"?this.focus_pins=!0:e==="access"&&(this.focus_access=!0)},profileClass:function(e){return"entity-profile-"+e.slug}}},ra={class:"entity-header p-3 bg-entity-focus"},aa={class:"block w-full flex items-center"},oa=["href","title"],sa={key:0,class:"fa-solid fa-skull mx-2","aria-hidden":"true"},la=["href"],ca=c("i",{class:"fa-solid fa-external-link","aria-hidden":"true","aria-label":"Open in a new window"},null,-1),ua=[ca],da={key:0,class:"block w-full"},fa={key:1,class:"my-1 w-full"},pa=["href"],ha=["href","data-tag"],ma=c("i",{class:"ra ra-tower","aria-hidden":"true","aria-label":"Location"},null,-1),va=["href","title"],ga={class:"entity-sections"},ya={class:"tabs flex my-2 justify-center items-center border-solid border-slate-600 border-b-2 border-r-0 border-t-0 border-l-0"},ba={key:0,class:"tab-profile p-5"},wa={key:0,class:"entity-pinned-attributes"},xa=["data-attribute","data-target"],_a={class:"inline-block uppercase font-extrabold mr-1"},$a=["innerHTML"],ka=c("hr",null,null,-1),Ca={class:"uppercase font-extrabold truncate"},Ta={key:1,class:"tab-links p-3"},Sa={key:0,class:"text-center italic"};function ja(e,t,n,r,i,a){const l=Ve("LookupEntity");return h(),m(Z,null,[c("div",ra,[c("div",aa,[c("a",{class:"text-2xl font-extrabold entity-name",href:n.entity.link,title:n.entity.name},y(n.entity.name),9,oa),n.entity.is_dead?(h(),m("i",sa)):D("",!0),c("a",{class:"ml-2 text-xs",target:"_blank",href:n.entity.link},ua,8,la)]),a.hasTitle()?(h(),m("div",da,y(n.entity.title),1)):D("",!0),n.entity.tags.length>0?(h(),m("div",fa,[(h(!0),m(Z,null,fe(n.entity.tags,s=>(h(),m("a",{class:z(a.tagClass(s)),href:s.link},y(s.name),11,pa))),256))])):D("",!0),n.entity.location?(h(),m("a",{key:2,class:"block w-full cursor-pointer my-2",href:n.entity.location.link,"data-tag":n.entity.id},[ma,ue(" "+y(n.entity.location.name),1)],8,ha)):D("",!0),n.entity.image?(h(),m("a",{key:3,href:n.entity.link,style:Ue({backgroundImage:a.backgroundImage()}),title:n.entity.name,class:"rounded cover-background block w-full aspect-square"},null,12,va)):D("",!0)]),c("div",ga,[c("div",ya,[c("div",{class:z(a.tabClass("profile")),onClick:t[0]||(t[0]=s=>a.switchTab("profile"))},y(n.entity.texts.profile),3),c("div",{class:z(a.tabClass("links")),onClick:t[1]||(t[1]=s=>a.switchTab("links"))},y(n.entity.texts.connections),3),c("div",{class:z(a.tabClass("access")),onClick:t[2]||(t[2]=s=>a.switchTab("access"))},null,2)]),i.focus_profile?(h(),m("div",ba,[n.entity.attributes.length>0?(h(),m("div",wa,[(h(!0),m(Z,null,fe(n.entity.attributes,s=>(h(),m("div",{class:"mb-3","data-attribute":s.name,"data-target":s.id},[c("span",_a,y(s.name),1),c("span",{innerHTML:s.value},null,8,$a)],8,xa))),256)),ka])):D("",!0),(h(!0),m(Z,null,fe(n.entity.profile,s=>(h(),m("div",{class:z(["mb-3",a.profileClass(s)])},[c("div",Ca,y(s.field),1),c("div",null,y(s.value),1)],2))),256))])):D("",!0),i.focus_pins?(h(),m("div",Ta,[(h(!0),m(Z,null,fe(n.entity.connections,s=>(h(),De(l,{entity:s},null,8,["entity"]))),256)),n.entity.connections.length===0?(h(),m("p",Sa,y(n.entity.texts["no-connections"]),1)):D("",!0)])):D("",!0)])],64)}const Ea=ke(ia,[["render",ja]]),Oa={directives:{clickOutside:ni.directive},props:{api_lookup:String,api_recent:String,placeholder:String,keyboard_tooltip:String},components:{LookupEntity:yi,EntityPreview:Ea},data(){return{has_drawer:!1,term:null,show_loading:!1,show_recent:!1,show_preview:!1,show_results:!1,recent:[],results:[],cached:{},has_recent:!1,texts:{},timeout_id:null,preview_entity:null}},watch:{term(e,t){this.termChanged()}},methods:{termChanged(){this.term.trim().length<3||(this.timeout_id!==void 0&&clearTimeout(this.timeout_id),this.show_loading=!0,this.timeout_id=setTimeout(()=>this.lookup(),500))},lookup(){let e=this.term.trim(),t=e.toLowerCase().replace(/ /g,"-").replace(/ [^\w-]+/g,"");if(this.cached[t])return this.displayCached(t);axios.get(this.api_lookup,{params:{q:e,v2:!0}}).then(n=>{this.parseLookupResponse(n,t)})},focus(){this.api_recent&&(this.show_preview=!1,this.has_drawer=!0,this.fetch())},escape(){this.timeout_id!==void 0&&clearTimeout(this.timeout_id),this.close()},fetch(){if(this.has_recent){this.show_recent=!0;return}this.show_loading=!0,axios.get(this.api_recent).then(e=>{this.recent=e.data.recent,this.texts.recents=e.data.texts.recents,this.texts.results=e.data.texts.results,this.texts.hint=e.data.texts.hint,this.texts.keyboard=e.data.texts.keyboard,this.texts.empty_results=e.data.texts.empty_results,this.show_loading=!1,this.show_recent=!0,this.has_recent=!0}).catch(e=>{this.show_loading=!1,this.show_recent=!0,this.has_recent=!1})},parseLookupResponse(e,t){this.results=e.data.entities,this.cached[t]=e.data.entities,this.showResults()},displayCached(e){this.results=this.cached[e],this.showResults()},showResults(){this.timeout_id=null,this.show_preview=!1,this.show_loading=!1,this.show_results=!0},loadPreview(e){this.show_loading=!0,axios.get(e.preview).then(t=>{this.parsePreviewResponse(t)})},parsePreviewResponse(e){this.preview_entity=e.data,this.show_loading=!1,this.show_preview=!0,this.show_recent=!1},onClickOutside(e){this.close()},close(){this.show_recent=!1,this.show_loading=!1,this.show_preview=!1,this.$refs.searchField.blur()}},mounted(){this.emitter.on("preview",e=>{this.loadPreview(e)})}},Da={class:"flex grow mr-2"},Aa={class:"relative grow"},La=["placeholder"],Ma={class:"form-control-feedback hidden-xs hidden-sm"},Pa=["data-title"],Ia={key:0,class:"search-drawer absolute top-0 left-0 mt-12 h-sidebar w-sidebar bg-navbar bg-base-100 shadow-r overflow-y-auto"},Ra={key:0,class:"text-center"},qa=c("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true","aria-label":"Loading"},null,-1),Ba=[qa],Fa={key:1,class:"search-recent bg-lookup p-2 min-h-full shadow-r flex flex-col items-stretch"},Na={key:0,class:"flex-none"},Ha={class:"italic text-xs text-center"},Qa={class:"grow"},za={key:0,class:"search-results mb-2"},Ua={class:"text-sm uppercase mb-2 my-2 mx-1"},Va={key:0,class:"italic m-2"},Wa={key:1,class:"recent-searches"},Ka={class:"text-sm uppercase my-2 mx-1"},Ya={key:1,class:"flex-none text-xs text-center"},Xa=c("hr",null,null,-1),Ja=["innerHTML"],Ga={key:2,class:"search-preview bg-lookup min-h-full shadow-r"};function Za(e,t,n,r,i,a){const l=Ve("LookupEntity"),s=Ve("EntityPreview"),u=ti("click-outside");return Kt((h(),m("div",Da,[c("div",Aa,[Kt(c("input",{type:"text",class:"form-control leading-4 w-20 md:w-full",maxlength:"25",ref:"searchField",id:"entity-lookup","onUpdate:modelValue":t[0]||(t[0]=p=>i.term=p),onClick:t[1]||(t[1]=p=>a.focus()),onFocus:t[2]||(t[2]=p=>a.focus()),onKeydown:t[3]||(t[3]=Ui(p=>a.escape(),["esc"])),placeholder:n.placeholder},null,40,La),[[Vi,i.term]]),c("span",Ma,[c("span",{class:"flex-none keyboard-shortcut py-1",id:"lookup-kb-shortcut","data-toggle":"tooltip","data-title":n.keyboard_tooltip,"data-html":"true","data-placement":"bottom"},"K",8,Pa)])]),i.show_recent||i.show_loading||i.show_preview?(h(),m("aside",Ia,[i.show_loading?(h(),m("div",Ra,Ba)):D("",!0),i.show_recent?(h(),m("div",Fa,[i.show_results?D("",!0):(h(),m("div",Na,[c("p",Ha,y(i.texts.hint),1)])),c("div",Qa,[i.show_results?(h(),m("div",za,[c("div",Ua,y(i.texts.results),1),i.results.length===0?(h(),m("div",Va,y(i.texts.empty_results),1)):(h(!0),m(Z,{key:1},fe(i.results,p=>(h(),De(l,{entity:p},null,8,["entity"]))),256))])):D("",!0),i.recent.length>0?(h(),m("div",Wa,[c("div",Ka,y(i.texts.recents),1),(h(!0),m(Z,null,fe(i.recent,p=>(h(),De(l,{entity:p},null,8,["entity"]))),256))])):D("",!0)]),i.show_loading?D("",!0):(h(),m("div",Ya,[Xa,c("p",{class:"italic text-xs text-center",innerHTML:i.texts.keyboard},null,8,Ja)]))])):D("",!0),i.show_preview?(h(),m("div",Ga,[Wi(s,{entity:i.preview_entity},null,8,["entity"])])):D("",!0)])):D("",!0)])),[[u,a.onClickOutside]])}const eo=ke(Oa,[["render",Za]]),to={props:["campaign"],methods:{backgroundImage:function(e){return e.image?"url("+e.image+")":""},campaignClass:function(e){return"campaign flex items-end border border-solid rounded-lg cover-background relative h-24 overflow-hidden text-break shadow-xs hover:shadow-md border-0"+(e.is_boosted?" boosted":"")}}},no=["href","title"],io=["innerHTML"];function ro(e,t,n,r,i,a){return h(),m("a",{class:z(a.campaignClass(n.campaign)),href:n.campaign.url,style:Ue({backgroundImage:a.backgroundImage(n.campaign)}),title:n.campaign.name},[c("div",{class:"flex items-end justify-center name w-full text-xs p-2 pt-6 text-center",innerHTML:n.campaign.name},null,8,io)],14,no)}const ao=ke(to,[["render",ro]]),oo={props:["notification"],data(){return{is_dismissed:!1,is_loading:!1}},methods:{backgroundClass:function(e){let t="notification bg-base-200 flex justify-center items-center mb-2 px-2 py-2 rounded-md";return e.is_read?t:t+" unread"},iconClass:function(e){return"fa-solid fa-"+e.icon},dismiss:function(e){this.is_loading=!0,axios.post(e.dismiss).then(()=>{this.is_dismissed=!0,this.emitter.emit("read_notification",e)})}}},so=["href","data-id"],lo={class:"flex-none p-2"},co=["innerHTML"],uo=["title"],fo=c("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),po=[fo],ho={key:1,class:"flex-none p-2"},mo=c("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1),vo=[mo],go=["data-id"],yo={class:"flex-none p-2"},bo=["innerHTML"],wo=["title"],xo=c("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),_o=[xo],$o={key:1,class:"flex-none p-2"},ko=c("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1),Co=[ko];function To(e,t,n,r,i,a){return n.notification.url&&!i.is_dismissed?(h(),m("a",{key:0,class:z(a.backgroundClass(n.notification)),href:n.notification.url,"data-id":n.notification.id},[c("div",lo,[c("i",{class:z(a.iconClass(n.notification)),"aria-hidden":"true"},null,2)]),c("div",{class:"flex-grow p-2 break-all",innerHTML:n.notification.text},null,8,co),this.is_loading?(h(),m("div",ho,vo)):(h(),m("div",{key:0,class:"flex-none p-2 cursor-pointer dismissable",onClick:t[0]||(t[0]=l=>a.dismiss(n.notification)),title:n.notification.dismiss_text},po,8,uo))],10,so)):i.is_dismissed?D("",!0):(h(),m("div",{key:1,class:z(a.backgroundClass(n.notification)),"data-id":n.notification.id},[c("div",yo,[c("i",{class:z(a.iconClass(n.notification)),"aria-hidden":"true"},null,2)]),c("div",{class:"flex-grow p-2",innerHTML:n.notification.text},null,8,bo),this.is_loading?(h(),m("div",$o,Co)):(h(),m("div",{key:0,class:"flex-none p-2 cursor-pointer dismissable",onClick:t[1]||(t[1]=l=>a.dismiss(n.notification)),title:n.notification.dismiss_text},_o,8,wo))],10,go))}const So=ke(oo,[["render",To]]),jo={props:["release"],data(){return{is_dismissed:!1,is_loading:!1}},methods:{backgroundClass:function(e){return"release bg-base-200 flex justify-center items-center mb-2 px-2 py-2  rounded-md"},dismiss:function(e){this.is_loading=!0,axios.post(e.dismiss).then(()=>{this.is_dismissed=!0,this.emitter.emit("read_release",e)})}}},Eo=["data-id"],Oo={class:"flex-grow p-2"},Do=["innerHTML","href"],Ao=["innerHTML"],Lo=["title"],Mo=c("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),Po=[Mo],Io={key:1,class:"flex-none p-2"},Ro=c("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1),qo=[Ro];function Bo(e,t,n,r,i,a){return i.is_dismissed?D("",!0):(h(),m("div",{key:0,class:z(a.backgroundClass(n.release)),"data-id":n.release.id},[c("div",Oo,[c("a",{innerHTML:n.release.title,class:"font-bold cursor-pointer block w-full",href:n.release.url,target:"_blank"},null,8,Do),c("p",{innerHTML:n.release.text},null,8,Ao)]),this.is_loading?(h(),m("div",Io,qo)):(h(),m("div",{key:0,class:"flex-none p-2 cursor-pointer dismissable",onClick:t[0]||(t[0]=l=>a.dismiss(n.release)),title:n.release.dismiss_text},Po,8,Lo))],10,Eo))}const Fo=ke(jo,[["render",Bo]]),No={directives:{clickOutside:ni.directive},props:{user_id:{type:String},api:{type:String},fetch:{type:String},initials:{type:String},avatar:{type:String},campaign_id:void 0,has_alerts:{type:Boolean},pro:{type:Boolean}},components:{Campaign:ao,Notification:So,Release:Fo},data(){return{alert_delta:60*1e3,is_loading:!1,is_expanded:!1,has_data:!1,view_campaigns:!1,view_profile:!1,profile:{},campaigns:{},notifications:{},marketplace:{},releases:{},show_alerts:!1,is_loaded:!1}},methods:{openCampaigns:function(){this.view_campaigns=!0,this.view_profile=!1,this.loadData()},openProfile:function(){this.view_profile=!0,this.view_campaigns=!1,this.loadData()},loadData:function(){this.is_expanded=!0,!this.has_data&&(this.is_loading=!0,axios.get(this.api).then(e=>{this.profile=e.data.profile,this.campaigns=e.data.campaigns,this.notifications=e.data.notifications,this.marketplace=e.data.marketplace,this.releases=e.data.releases,this.show_alerts=e.data.has_unread,this.has_data=!0,this.is_loading=!1,this.is_loaded=!0}))},blockClass:function(e){return e?"block p-4 flex-grow items-center focus:box-shadow":"block p-4  items-center bg-base-200 cursor-pointer flex-none focus:box-shadow"},logout:function(){document.getElementById("logout-form").submit()},onClickOutside(e){this.is_expanded=!1},readRelease:function(e){let t=this.releases.releases.findIndex(n=>n.id===e.id);this.releases.releases.slice(t,1),this.updateUnread()},readNotification:function(e){let t=this.notifications.messages.findIndex(n=>n.id==e.id);this.notifications.messages.slice(t,1),this.updateUnread()},updateUnread:function(){this.notifications.messages.length===0&&this.releases.releases.length===0&&(this.show_alerts=!1)},updateAlerts:function(){let e=localStorage.getItem("last_notification-"+this.user_id),n=new Date().getTime()-60*5e3;if(!e||e<n)this.fetchAlerts();else if(this.show_alerts=localStorage.getItem("notification-has-alerts-"+this.user_id)==="true",this.queueFetch(),!this.is_loaded)return},fetchAlerts:function(){let e=new Date().getTime();localStorage.setItem("last_notification-"+this.user_id,e),axios.get(this.fetch).then(t=>{localStorage.setItem("notification-has-alerts-"+this.user_id,t.data.has_alerts),this.updateAlerts()})},queueFetch:function(){let e=this;setTimeout(function(){e.updateAlerts()}.bind(this),this.alert_delta)},showInitials:function(){return this.avatar.startsWith("/images/")},profilePictureUrl:function(){return"url("+this.avatar+")"},campaignIcon:function(){return this.pro?"fa-solid fa-grid":"fa-solid fa-grip"}},mounted(){this.emitter.on("read_release",e=>{this.readRelease(e)}),this.emitter.on("read_notification",e=>{this.readNotification(e)}),this.show_alerts=this.has_alerts,this.queueFetch()}},Ho={class:"nav-switcher flex items-center justify-center h-12"},Qo=c("span",{class:"sr-only"},"Campaigns",-1),zo={class:"indicator relative inline-flex w-max"},Uo={key:0,class:"notification-badge left-auto top-auto w-fit inline-flex absolute content-center items-center z-10"},Vo={key:1,class:"profile-box rounded-lg p-2 text-center font-bold"},Wo={key:0,class:"navigation-drawer bg-base-100 h-full overflow-y-auto safsdf fixed top-0 right-0 rounded-l-2xl shadow-lg"},Ko={key:0,class:"temporary p-8 text-center"},Yo=c("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1),Xo=[Yo],Jo={key:1,class:""},Go={class:"header flex"},Zo={key:0,class:"full flex items-center"},es={class:"flex-none mr-4 text-2xl"},ts={class:"flex-grow"},ns={class:"font-bold"},is=["title"],rs={key:0,class:"full flex items-center"},as={key:0,class:"flex-none mr-4 profile-box rounded-lg p-2 text-center uppercase font-bold"},os={class:"flex-grow"},ss={class:"font-bold"},ls=["title"],cs={key:0,class:"flex-none profile-box rounded-lg p-2 text-center uppercase font-bold"},us={key:0,class:"profile p-5"},ds={key:0,class:"notifications mb-5"},fs={class:"flex w-full py-2"},ps={class:"flex-grow uppercase font-bold"},hs={class:"flex-grow text-right"},ms=["href"],vs={key:0,class:"no-notifications help-block italic"},gs={key:1,class:"releases mb-5"},ys={class:"flex w-full py-2"},bs={class:"flex-grow uppercase font-bold"},ws={key:2,class:"marketplace mb-5"},xs={class:"flex w-full py-2"},_s={class:"flex-grow uppercase font-bold"},$s={class:"flex-grow text-right"},ks=["href"],Cs={class:"grid grid-cols-3 gap-2"},Ts=["href"],Ss=c("div",{class:"icon bg-base-200 rounded-full w-14 h-14 mb-1 text-3xl inline-block aspect-square"},[c("i",{class:"fa-solid fa-palette mt-3","aria-hidden":"true"})],-1),js={class:"text-muted text-xs"},Es=["href"],Os=c("div",{class:"icon bg-base-200 rounded-full w-14 h-14 mb-1 text-3xl inline-block aspect-square"},[c("i",{class:"fa-solid fa-columns mt-3","aria-hidden":"true"})],-1),Ds={class:"text-muted text-xs"},As=["href"],Ls=c("div",{class:"icon bg-base-200 rounded-full w-14 h-14 mb-1 text-3xl inline-block aspect-square"},[c("i",{class:"fa-solid fa-dice-d20 mt-3","aria-hidden":"true"})],-1),Ms={class:"text-muted text-xs"},Ps={key:3,class:"subscription mb-5"},Is={class:"uppercase font-bold py-2"},Rs=["href"],qs={class:"flex-none p-2"},Bs=["src","alt"],Fs={class:"flex-grow p-2"},Ns={class:"font-bold text-lg"},Hs={key:0,class:"more"},Qs=c("br",null,null,-1),zs={key:1,class:"more"},Us={class:"link"},Vs={key:4,class:"m-0 p-0 list-none"},Ws=["href"],Ks=c("i",{class:"fa-solid fa-cog mr-3","aria-hidden":"true"},null,-1),Ys=["href"],Xs=c("i",{class:"fa-solid fa-user mr-3","aria-hidden":"true"},null,-1),Js=["href"],Gs=c("i",{class:"fa-solid fa-question-circle mr-3","aria-hidden":"true"},null,-1),Zs=c("i",{class:"fa-solid fa-sign-out mr-3","aria-hidden":"true"},null,-1),el={key:5,class:"m-0 p-0 list-none"},tl=["href"],nl=c("i",{class:"fa-solid fa-sign-out-alt mr-3","aria-hidden":"true"},null,-1),il={key:1,class:"campaigns p-5"},rl={key:0},al={class:"flex w-full py-2"},ol={class:"flex-grow uppercase font-bold"},sl={key:0,class:"flex-grow text-right"},ll=["href"],cl={class:"grid grid-cols-2 md:grid-cols-3 gap-5"},ul=["href"],dl={class:"text-xs text-break uppercase"},fl=c("i",{class:"fa-solid fa-plus","aria-hidden":"true",style:{display:"none"}},null,-1),pl={key:0,class:"following"},hl=c("hr",null,null,-1),ml={class:"uppercase"},vl={class:"grid grid-cols-2 md:grid-cols-3 gap-5"},gl=["href"],yl={class:"text-xs uppercase text-break"};function bl(e,t,n,r,i,a){const l=Ve("Notification"),s=Ve("Release"),u=Ve("Campaign"),p=ti("click-outside");return h(),m(Z,null,[c("div",Ho,[c("div",{class:"campaigns inline cursor-pointer text-center px-3 text-2xl",onClick:t[0]||(t[0]=f=>a.openCampaigns()),"aria-label":"Switch campaigns",tabindex:"0",role:"button"},[c("i",{class:z(a.campaignIcon()),"aria-hidden":"true"},null,2),Qo]),c("div",{class:"profile inline cursor-pointer text-center uppercase pt-1",onClick:t[1]||(t[1]=f=>a.openProfile()),"aria-label":"Profile settings",tabindex:"0",role:"button"},[c("div",zo,[i.show_alerts?(h(),m("span",Uo)):D("",!0),a.showInitials()?(h(),m("div",Vo,y(n.initials),1)):(h(),m("div",{key:2,class:"w-9 h-9 rounded-lg cover-background",style:Ue({backgroundImage:a.profilePictureUrl()})},null,4))])])]),i.is_expanded?Kt((h(),m("div",Wo,[i.is_loading?(h(),m("div",Ko,Xo)):(h(),m("div",Jo,[c("div",Go,[c("div",{class:z(a.blockClass(i.view_campaigns)),onClick:t[2]||(t[2]=f=>a.openCampaigns()),tabindex:"0",role:"button","aria-label":"Campaign list"},[i.view_campaigns?(h(),m("div",Zo,[c("div",es,[c("i",{class:z(a.campaignIcon()),"aria-hidden":"true"},null,2)]),c("div",ts,[c("div",ns,y(i.campaigns.texts.campaigns),1),c("div",null,y(i.campaigns.texts.count),1)])])):(h(),m("div",{key:1,class:"flex items-center justify-center h-full text-2xl",title:i.campaigns.texts.campaigns},[c("i",{class:z(a.campaignIcon()),"aria-hidden":"true"},null,2)],8,is))],2),c("div",{class:z(a.blockClass(i.view_profile)),onClick:t[3]||(t[3]=f=>a.openProfile()),tabindex:"0",role:"button","aria-label":"Profile pane"},[i.view_profile?(h(),m("div",rs,[a.showInitials()?(h(),m("div",as,y(n.initials),1)):(h(),m("div",{key:1,class:"flex-none mr-4 w-9 h-9 rounded-lg cover-background",style:Ue({backgroundImage:a.profilePictureUrl()})},null,4)),c("div",os,[c("div",ss,y(i.profile.name),1),c("div",null,y(i.profile.created),1)])])):(h(),m("div",{key:1,class:"",title:i.profile.your_profile},[a.showInitials()?(h(),m("div",cs,y(n.initials),1)):(h(),m("div",{key:1,class:"flex-none w-9 h-9 rounded-lg cover-background",style:Ue({backgroundImage:a.profilePictureUrl()})},null,4))],8,ls))],2)]),i.view_profile?(h(),m("div",us,[i.notifications.title?(h(),m("div",ds,[c("div",fs,[c("div",ps,y(i.notifications.title),1),c("div",hs,[c("a",{href:i.notifications.all.url},y(i.notifications.all.text),9,ms)])]),(h(!0),m(Z,null,fe(i.notifications.messages,f=>(h(),De(l,{notification:f},null,8,["notification"]))),256)),i.notifications.messages.length===0?(h(),m("div",vs,y(i.notifications.none),1)):D("",!0)])):D("",!0),i.releases.title&&i.releases.releases.length>0?(h(),m("div",gs,[c("div",ys,[c("div",bs,y(i.releases.title),1)]),(h(!0),m(Z,null,fe(i.releases.releases,f=>(h(),De(s,{release:f},null,8,["release"]))),256))])):D("",!0),!i.profile.is_impersonating&&i.marketplace.title?(h(),m("div",ws,[c("div",xs,[c("div",_s,y(i.marketplace.title),1),c("div",$s,[c("a",{href:i.marketplace.explore.url,target:"_blank"},y(i.marketplace.explore.text),9,ks)])]),c("div",Cs,[c("a",{href:i.marketplace.themes.url,class:"border py-2 text-center justify-center rounded-md hover:shadow-md",target:"_blank"},[Ss,c("div",null,y(i.marketplace.themes.title),1),c("div",js,y(i.marketplace.themes.number),1)],8,Ts),c("a",{href:i.marketplace.sheets.url,class:"border py-2 text-center justify-center rounded-md hover:shadow-md",target:"_blank"},[Os,c("div",null,y(i.marketplace.sheets.title),1),c("div",Ds,y(i.marketplace.sheets.number),1)],8,Es),c("a",{href:i.marketplace.content.url,class:"border py-2 text-center justify-center rounded-md hover:shadow-md",target:"_blank"},[Ls,c("div",null,y(i.marketplace.content.title),1),c("div",Ms,y(i.marketplace.content.number),1)],8,As)])])):D("",!0),i.profile.is_impersonating?D("",!0):(h(),m("div",Ps,[c("div",Is,y(i.profile.subscription.title),1),c("a",{class:"border rounded-lg flex justify-center items-center hover:shadow-md",href:i.profile.urls.subscription},[c("div",qs,[c("img",{class:"w-16 h-16",src:i.profile.subscription.image,alt:i.profile.subscription.tier},null,8,Bs)]),c("div",Fs,[c("div",Ns,y(i.profile.subscription.tier),1),i.profile.subscription.tier!=="Kobold"?(h(),m("div",Hs,[ue(y(i.profile.subscription.created),1),Qs,ue(" "+y(i.profile.subscription.boosters),1)])):(h(),m("div",zs,[ue(y(i.profile.subscription.call_to_action)+" ",1),c("div",Us,y(i.profile.subscription.call_to_action_2),1)]))])],8,Rs)])),i.profile.is_impersonating?(h(),m("ul",el,[c("li",null,[c("a",{href:i.profile.return.url,class:"p-2 mb-2"},[nl,ue(" "+y(i.profile.return.name),1)],8,tl)])])):(h(),m("ul",Vs,[c("li",null,[c("a",{href:i.profile.urls.settings.url,class:"p-2 mb-2 block"},[Ks,ue(" "+y(i.profile.urls.settings.name),1)],8,Ws)]),c("li",null,[c("a",{href:i.profile.urls.profile.url,class:"p-2 mb-2 block"},[Xs,ue(" "+y(i.profile.urls.profile.name),1)],8,Ys)]),c("li",null,[c("a",{href:i.profile.urls.help.url,class:"p-2 mb-2 block",target:"_blank"},[Gs,ue(" "+y(i.profile.urls.help.name),1)],8,Js)]),c("li",null,[c("a",{href:"#",onClick:t[4]||(t[4]=f=>a.logout()),class:"p-2 mb-2 block"},[Zs,ue(" "+y(i.profile.urls.logout.name),1)])])]))])):(h(),m("div",il,[i.profile.is_impersonating?D("",!0):(h(),m("div",rl,[c("div",al,[c("div",ol,y(i.campaigns.texts.campaigns),1),i.campaigns.member.length>0?(h(),m("div",sl,[c("a",{href:i.campaigns.urls.reorder},y(i.campaigns.texts.reorder),9,ll)])):D("",!0)]),c("div",cl,[(h(!0),m(Z,null,fe(i.campaigns.member,f=>(h(),De(u,{campaign:f},null,8,["campaign"]))),256)),c("a",{href:i.campaigns.urls.new,class:"new-campaign flex items-center text-center border-dashed border rounded-lg h-24 p-2 overflow-hidden"},[c("span",dl,[fl,ue(" "+y(i.campaigns.texts.new),1)])],8,ul)]),i.profile.is_impersonating?D("",!0):(h(),m("div",pl,[hl,c("p",ml,y(i.campaigns.texts.followed),1),c("div",vl,[(h(!0),m(Z,null,fe(i.campaigns.following,f=>(h(),De(u,{campaign:f},null,8,["campaign"]))),256)),c("a",{href:i.campaigns.urls.follow,class:"new-campaign flex items-center text-center border-dashed border rounded-lg h-24 p-2 overflow-hidden"},[c("span",yl,y(i.campaigns.texts.follow),1)],8,gl)])]))]))]))]))])),[[p,a.onClickOutside]]):D("",!0)],64)}const wl=ke(No,[["render",bl]]),xl=Yi(),dt=Ki({});dt.config.globalProperties.emitter=xl;dt.component("nav-toggler",Kr);dt.component("nav-search",eo);dt.component("nav-switcher",wl);dt.mount("#header");var W="top",ne="bottom",ie="right",K="left",fn="auto",ft=[W,ne,ie,K],We="start",ct="end",_l="clippingParents",bi="viewport",nt="popper",$l="reference",On=ft.reduce(function(e,t){return e.concat([t+"-"+We,t+"-"+ct])},[]),wi=[].concat(ft,[fn]).reduce(function(e,t){return e.concat([t,t+"-"+We,t+"-"+ct])},[]),kl="beforeRead",Cl="read",Tl="afterRead",Sl="beforeMain",jl="main",El="afterMain",Ol="beforeWrite",Dl="write",Al="afterWrite",Ll=[kl,Cl,Tl,Sl,jl,El,Ol,Dl,Al];function he(e){return e?(e.nodeName||"").toLowerCase():null}function J(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ie(e){var t=J(e).Element;return e instanceof t||e instanceof Element}function te(e){var t=J(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function pn(e){if(typeof ShadowRoot>"u")return!1;var t=J(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Ml(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},a=t.elements[n];!te(a)||!he(a)||(Object.assign(a.style,r),Object.keys(i).forEach(function(l){var s=i[l];s===!1?a.removeAttribute(l):a.setAttribute(l,s===!0?"":s)}))})}function Pl(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],a=t.attributes[r]||{},l=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),s=l.reduce(function(u,p){return u[p]="",u},{});!te(i)||!he(i)||(Object.assign(i.style,s),Object.keys(a).forEach(function(u){i.removeAttribute(u)}))})}}const xi={name:"applyStyles",enabled:!0,phase:"write",fn:Ml,effect:Pl,requires:["computeStyles"]};function pe(e){return e.split("-")[0]}var Pe=Math.max,Mt=Math.min,Ke=Math.round;function an(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function _i(){return!/^((?!chrome|android).)*safari/i.test(an())}function Ye(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,a=1;t&&te(e)&&(i=e.offsetWidth>0&&Ke(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&Ke(r.height)/e.offsetHeight||1);var l=Ie(e)?J(e):window,s=l.visualViewport,u=!_i()&&n,p=(r.left+(u&&s?s.offsetLeft:0))/i,f=(r.top+(u&&s?s.offsetTop:0))/a,x=r.width/i,T=r.height/a;return{width:x,height:T,top:f,right:p+x,bottom:f+T,left:p,x:p,y:f}}function hn(e){var t=Ye(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function $i(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&pn(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function be(e){return J(e).getComputedStyle(e)}function Il(e){return["table","td","th"].indexOf(he(e))>=0}function Ce(e){return((Ie(e)?e.ownerDocument:e.document)||window.document).documentElement}function Rt(e){return he(e)==="html"?e:e.assignedSlot||e.parentNode||(pn(e)?e.host:null)||Ce(e)}function Dn(e){return!te(e)||be(e).position==="fixed"?null:e.offsetParent}function Rl(e){var t=/firefox/i.test(an()),n=/Trident/i.test(an());if(n&&te(e)){var r=be(e);if(r.position==="fixed")return null}var i=Rt(e);for(pn(i)&&(i=i.host);te(i)&&["html","body"].indexOf(he(i))<0;){var a=be(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function pt(e){for(var t=J(e),n=Dn(e);n&&Il(n)&&be(n).position==="static";)n=Dn(n);return n&&(he(n)==="html"||he(n)==="body"&&be(n).position==="static")?t:n||Rl(e)||t}function mn(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ot(e,t,n){return Pe(e,Mt(t,n))}function ql(e,t,n){var r=ot(e,t,n);return r>n?n:r}function ki(){return{top:0,right:0,bottom:0,left:0}}function Ci(e){return Object.assign({},ki(),e)}function Ti(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var Bl=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Ci(typeof t!="number"?t:Ti(t,ft))};function Fl(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,l=n.modifiersData.popperOffsets,s=pe(n.placement),u=mn(s),p=[K,ie].indexOf(s)>=0,f=p?"height":"width";if(!(!a||!l)){var x=Bl(i.padding,n),T=hn(a),w=u==="y"?W:K,C=u==="y"?ne:ie,_=n.rects.reference[f]+n.rects.reference[u]-l[u]-n.rects.popper[f],k=l[u]-n.rects.reference[u],E=pt(a),A=E?u==="y"?E.clientHeight||0:E.clientWidth||0:0,M=_/2-k/2,o=x[w],j=A-T[f]-x[C],g=A/2-T[f]/2+M,L=ot(o,g,j),B=u;n.modifiersData[r]=(t={},t[B]=L,t.centerOffset=L-g,t)}}function Nl(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||$i(t.elements.popper,i)&&(t.elements.arrow=i))}const Hl={name:"arrow",enabled:!0,phase:"main",fn:Fl,effect:Nl,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xe(e){return e.split("-")[1]}var Ql={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zl(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:Ke(n*i)/i||0,y:Ke(r*i)/i||0}}function An(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,l=e.offsets,s=e.position,u=e.gpuAcceleration,p=e.adaptive,f=e.roundOffsets,x=e.isFixed,T=l.x,w=T===void 0?0:T,C=l.y,_=C===void 0?0:C,k=typeof f=="function"?f({x:w,y:_}):{x:w,y:_};w=k.x,_=k.y;var E=l.hasOwnProperty("x"),A=l.hasOwnProperty("y"),M=K,o=W,j=window;if(p){var g=pt(n),L="clientHeight",B="clientWidth";if(g===J(n)&&(g=Ce(n),be(g).position!=="static"&&s==="absolute"&&(L="scrollHeight",B="scrollWidth")),g=g,i===W||(i===K||i===ie)&&a===ct){o=ne;var q=x&&g===j&&j.visualViewport?j.visualViewport.height:g[L];_-=q-r.height,_*=u?1:-1}if(i===K||(i===W||i===ne)&&a===ct){M=ie;var I=x&&g===j&&j.visualViewport?j.visualViewport.width:g[B];w-=I-r.width,w*=u?1:-1}}var F=Object.assign({position:s},p&&Ql),R=f===!0?zl({x:w,y:_},J(n)):{x:w,y:_};if(w=R.x,_=R.y,u){var P;return Object.assign({},F,(P={},P[o]=A?"0":"",P[M]=E?"0":"",P.transform=(j.devicePixelRatio||1)<=1?"translate("+w+"px, "+_+"px)":"translate3d("+w+"px, "+_+"px, 0)",P))}return Object.assign({},F,(t={},t[o]=A?_+"px":"",t[M]=E?w+"px":"",t.transform="",t))}function Ul(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,a=n.adaptive,l=a===void 0?!0:a,s=n.roundOffsets,u=s===void 0?!0:s,p={placement:pe(t.placement),variation:Xe(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,An(Object.assign({},p,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:u})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,An(Object.assign({},p,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Vl={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ul,data:{}};var St={passive:!0};function Wl(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=i===void 0?!0:i,l=r.resize,s=l===void 0?!0:l,u=J(t.elements.popper),p=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&p.forEach(function(f){f.addEventListener("scroll",n.update,St)}),s&&u.addEventListener("resize",n.update,St),function(){a&&p.forEach(function(f){f.removeEventListener("scroll",n.update,St)}),s&&u.removeEventListener("resize",n.update,St)}}const Kl={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Wl,data:{}};var Yl={left:"right",right:"left",bottom:"top",top:"bottom"};function Et(e){return e.replace(/left|right|bottom|top/g,function(t){return Yl[t]})}var Xl={start:"end",end:"start"};function Ln(e){return e.replace(/start|end/g,function(t){return Xl[t]})}function vn(e){var t=J(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function gn(e){return Ye(Ce(e)).left+vn(e).scrollLeft}function Jl(e,t){var n=J(e),r=Ce(e),i=n.visualViewport,a=r.clientWidth,l=r.clientHeight,s=0,u=0;if(i){a=i.width,l=i.height;var p=_i();(p||!p&&t==="fixed")&&(s=i.offsetLeft,u=i.offsetTop)}return{width:a,height:l,x:s+gn(e),y:u}}function Gl(e){var t,n=Ce(e),r=vn(e),i=(t=e.ownerDocument)==null?void 0:t.body,a=Pe(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=Pe(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+gn(e),u=-r.scrollTop;return be(i||n).direction==="rtl"&&(s+=Pe(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:l,x:s,y:u}}function yn(e){var t=be(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Si(e){return["html","body","#document"].indexOf(he(e))>=0?e.ownerDocument.body:te(e)&&yn(e)?e:Si(Rt(e))}function st(e,t){var n;t===void 0&&(t=[]);var r=Si(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),a=J(r),l=i?[a].concat(a.visualViewport||[],yn(r)?r:[]):r,s=t.concat(l);return i?s:s.concat(st(Rt(l)))}function on(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Zl(e,t){var n=Ye(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Mn(e,t,n){return t===bi?on(Jl(e,n)):Ie(t)?Zl(t,n):on(Gl(Ce(e)))}function ec(e){var t=st(Rt(e)),n=["absolute","fixed"].indexOf(be(e).position)>=0,r=n&&te(e)?pt(e):e;return Ie(r)?t.filter(function(i){return Ie(i)&&$i(i,r)&&he(i)!=="body"}):[]}function tc(e,t,n,r){var i=t==="clippingParents"?ec(e):[].concat(t),a=[].concat(i,[n]),l=a[0],s=a.reduce(function(u,p){var f=Mn(e,p,r);return u.top=Pe(f.top,u.top),u.right=Mt(f.right,u.right),u.bottom=Mt(f.bottom,u.bottom),u.left=Pe(f.left,u.left),u},Mn(e,l,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function ji(e){var t=e.reference,n=e.element,r=e.placement,i=r?pe(r):null,a=r?Xe(r):null,l=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,u;switch(i){case W:u={x:l,y:t.y-n.height};break;case ne:u={x:l,y:t.y+t.height};break;case ie:u={x:t.x+t.width,y:s};break;case K:u={x:t.x-n.width,y:s};break;default:u={x:t.x,y:t.y}}var p=i?mn(i):null;if(p!=null){var f=p==="y"?"height":"width";switch(a){case We:u[p]=u[p]-(t[f]/2-n[f]/2);break;case ct:u[p]=u[p]+(t[f]/2-n[f]/2);break}}return u}function ut(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,a=n.strategy,l=a===void 0?e.strategy:a,s=n.boundary,u=s===void 0?_l:s,p=n.rootBoundary,f=p===void 0?bi:p,x=n.elementContext,T=x===void 0?nt:x,w=n.altBoundary,C=w===void 0?!1:w,_=n.padding,k=_===void 0?0:_,E=Ci(typeof k!="number"?k:Ti(k,ft)),A=T===nt?$l:nt,M=e.rects.popper,o=e.elements[C?A:T],j=tc(Ie(o)?o:o.contextElement||Ce(e.elements.popper),u,f,l),g=Ye(e.elements.reference),L=ji({reference:g,element:M,strategy:"absolute",placement:i}),B=on(Object.assign({},M,L)),q=T===nt?B:g,I={top:j.top-q.top+E.top,bottom:q.bottom-j.bottom+E.bottom,left:j.left-q.left+E.left,right:q.right-j.right+E.right},F=e.modifiersData.offset;if(T===nt&&F){var R=F[i];Object.keys(I).forEach(function(P){var Y=[ie,ne].indexOf(P)>=0?1:-1,X=[W,ne].indexOf(P)>=0?"y":"x";I[P]+=R[X]*Y})}return I}function nc(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,l=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,p=u===void 0?wi:u,f=Xe(r),x=f?s?On:On.filter(function(C){return Xe(C)===f}):ft,T=x.filter(function(C){return p.indexOf(C)>=0});T.length===0&&(T=x);var w=T.reduce(function(C,_){return C[_]=ut(e,{placement:_,boundary:i,rootBoundary:a,padding:l})[pe(_)],C},{});return Object.keys(w).sort(function(C,_){return w[C]-w[_]})}function ic(e){if(pe(e)===fn)return[];var t=Et(e);return[Ln(e),t,Ln(t)]}function rc(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=i===void 0?!0:i,l=n.altAxis,s=l===void 0?!0:l,u=n.fallbackPlacements,p=n.padding,f=n.boundary,x=n.rootBoundary,T=n.altBoundary,w=n.flipVariations,C=w===void 0?!0:w,_=n.allowedAutoPlacements,k=t.options.placement,E=pe(k),A=E===k,M=u||(A||!C?[Et(k)]:ic(k)),o=[k].concat(M).reduce(function(me,re){return me.concat(pe(re)===fn?nc(t,{placement:re,boundary:f,rootBoundary:x,padding:p,flipVariations:C,allowedAutoPlacements:_}):re)},[]),j=t.rects.reference,g=t.rects.popper,L=new Map,B=!0,q=o[0],I=0;I<o.length;I++){var F=o[I],R=pe(F),P=Xe(F)===We,Y=[W,ne].indexOf(R)>=0,X=Y?"width":"height",H=ut(t,{placement:F,boundary:f,rootBoundary:x,altBoundary:T,padding:p}),Q=Y?P?ie:K:P?ne:W;j[X]>g[X]&&(Q=Et(Q));var N=Et(Q),se=[];if(a&&se.push(H[R]<=0),s&&se.push(H[Q]<=0,H[N]<=0),se.every(function(me){return me})){q=F,B=!1;break}L.set(F,se)}if(B)for(var le=C?3:1,Te=function(re){var ve=o.find(function(qe){var ge=L.get(qe);if(ge)return ge.slice(0,re).every(function(Be){return Be})});if(ve)return q=ve,"break"},ce=le;ce>0;ce--){var Se=Te(ce);if(Se==="break")break}t.placement!==q&&(t.modifiersData[r]._skip=!0,t.placement=q,t.reset=!0)}}const ac={name:"flip",enabled:!0,phase:"main",fn:rc,requiresIfExists:["offset"],data:{_skip:!1}};function Pn(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function In(e){return[W,ie,ne,K].some(function(t){return e[t]>=0})}function oc(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,l=ut(t,{elementContext:"reference"}),s=ut(t,{altBoundary:!0}),u=Pn(l,r),p=Pn(s,i,a),f=In(u),x=In(p);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:p,isReferenceHidden:f,hasPopperEscaped:x},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":x})}const sc={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:oc};function lc(e,t,n){var r=pe(e),i=[K,W].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,l=a[0],s=a[1];return l=l||0,s=(s||0)*i,[K,ie].indexOf(r)>=0?{x:s,y:l}:{x:l,y:s}}function cc(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=i===void 0?[0,0]:i,l=wi.reduce(function(f,x){return f[x]=lc(x,t.rects,a),f},{}),s=l[t.placement],u=s.x,p=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=p),t.modifiersData[r]=l}const uc={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:cc};function dc(e){var t=e.state,n=e.name;t.modifiersData[n]=ji({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const fc={name:"popperOffsets",enabled:!0,phase:"read",fn:dc,data:{}};function pc(e){return e==="x"?"y":"x"}function hc(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=i===void 0?!0:i,l=n.altAxis,s=l===void 0?!1:l,u=n.boundary,p=n.rootBoundary,f=n.altBoundary,x=n.padding,T=n.tether,w=T===void 0?!0:T,C=n.tetherOffset,_=C===void 0?0:C,k=ut(t,{boundary:u,rootBoundary:p,padding:x,altBoundary:f}),E=pe(t.placement),A=Xe(t.placement),M=!A,o=mn(E),j=pc(o),g=t.modifiersData.popperOffsets,L=t.rects.reference,B=t.rects.popper,q=typeof _=="function"?_(Object.assign({},t.rects,{placement:t.placement})):_,I=typeof q=="number"?{mainAxis:q,altAxis:q}:Object.assign({mainAxis:0,altAxis:0},q),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,R={x:0,y:0};if(g){if(a){var P,Y=o==="y"?W:K,X=o==="y"?ne:ie,H=o==="y"?"height":"width",Q=g[o],N=Q+k[Y],se=Q-k[X],le=w?-B[H]/2:0,Te=A===We?L[H]:B[H],ce=A===We?-B[H]:-L[H],Se=t.elements.arrow,me=w&&Se?hn(Se):{width:0,height:0},re=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:ki(),ve=re[Y],qe=re[X],ge=ot(0,L[H],me[H]),Be=M?L[H]/2-le-ge-ve-I.mainAxis:Te-ge-ve-I.mainAxis,we=M?-L[H]/2+le+ge+qe+I.mainAxis:ce+ge+qe+I.mainAxis,Fe=t.elements.arrow&&pt(t.elements.arrow),ht=Fe?o==="y"?Fe.clientTop||0:Fe.clientLeft||0:0,Je=(P=F==null?void 0:F[o])!=null?P:0,mt=Q+Be-Je-ht,vt=Q+we-Je,Ge=ot(w?Mt(N,mt):N,Q,w?Pe(se,vt):se);g[o]=Ge,R[o]=Ge-Q}if(s){var Ze,gt=o==="x"?W:K,yt=o==="x"?ne:ie,ye=g[j],xe=j==="y"?"height":"width",et=ye+k[gt],je=ye-k[yt],tt=[W,K].indexOf(E)!==-1,bt=(Ze=F==null?void 0:F[j])!=null?Ze:0,wt=tt?et:ye-L[xe]-B[xe]-bt+I.altAxis,xt=tt?ye+L[xe]+B[xe]-bt-I.altAxis:je,_t=w&&tt?ql(wt,ye,xt):ot(w?wt:et,ye,w?xt:je);g[j]=_t,R[j]=_t-ye}t.modifiersData[r]=R}}const mc={name:"preventOverflow",enabled:!0,phase:"main",fn:hc,requiresIfExists:["offset"]};function vc(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function gc(e){return e===J(e)||!te(e)?vn(e):vc(e)}function yc(e){var t=e.getBoundingClientRect(),n=Ke(t.width)/e.offsetWidth||1,r=Ke(t.height)/e.offsetHeight||1;return n!==1||r!==1}function bc(e,t,n){n===void 0&&(n=!1);var r=te(t),i=te(t)&&yc(t),a=Ce(t),l=Ye(e,i,n),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((he(t)!=="body"||yn(a))&&(s=gc(t)),te(t)?(u=Ye(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop):a&&(u.x=gn(a))),{x:l.left+s.scrollLeft-u.x,y:l.top+s.scrollTop-u.y,width:l.width,height:l.height}}function wc(e){var t=new Map,n=new Set,r=[];e.forEach(function(a){t.set(a.name,a)});function i(a){n.add(a.name);var l=[].concat(a.requires||[],a.requiresIfExists||[]);l.forEach(function(s){if(!n.has(s)){var u=t.get(s);u&&i(u)}}),r.push(a)}return e.forEach(function(a){n.has(a.name)||i(a)}),r}function xc(e){var t=wc(e);return Ll.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function _c(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function $c(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var Rn={placement:"bottom",modifiers:[],strategy:"absolute"};function qn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function kc(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,a=i===void 0?Rn:i;return function(s,u,p){p===void 0&&(p=a);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},Rn,a),modifiersData:{},elements:{reference:s,popper:u},attributes:{},styles:{}},x=[],T=!1,w={state:f,setOptions:function(E){var A=typeof E=="function"?E(f.options):E;_(),f.options=Object.assign({},a,f.options,A),f.scrollParents={reference:Ie(s)?st(s):s.contextElement?st(s.contextElement):[],popper:st(u)};var M=xc($c([].concat(r,f.options.modifiers)));return f.orderedModifiers=M.filter(function(o){return o.enabled}),C(),w.update()},forceUpdate:function(){if(!T){var E=f.elements,A=E.reference,M=E.popper;if(qn(A,M)){f.rects={reference:bc(A,pt(M),f.options.strategy==="fixed"),popper:hn(M)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(I){return f.modifiersData[I.name]=Object.assign({},I.data)});for(var o=0;o<f.orderedModifiers.length;o++){if(f.reset===!0){f.reset=!1,o=-1;continue}var j=f.orderedModifiers[o],g=j.fn,L=j.options,B=L===void 0?{}:L,q=j.name;typeof g=="function"&&(f=g({state:f,options:B,name:q,instance:w})||f)}}}},update:_c(function(){return new Promise(function(k){w.forceUpdate(),k(f)})}),destroy:function(){_(),T=!0}};if(!qn(s,u))return w;w.setOptions(p).then(function(k){!T&&p.onFirstUpdate&&p.onFirstUpdate(k)});function C(){f.orderedModifiers.forEach(function(k){var E=k.name,A=k.options,M=A===void 0?{}:A,o=k.effect;if(typeof o=="function"){var j=o({state:f,name:E,instance:w,options:M}),g=function(){};x.push(j||g)}})}function _(){x.forEach(function(k){return k()}),x=[]}return w}}var Cc=[Kl,fc,Vl,xi,uc,ac,mc,Hl,sc],Tc=kc({defaultModifiers:Cc}),Sc="tippy-box",Ei="tippy-content",jc="tippy-backdrop",Oi="tippy-arrow",Di="tippy-svg-arrow",Oe={passive:!0,capture:!0},Ai=function(){return document.body};function Ht(e,t,n){if(Array.isArray(e)){var r=e[t];return r??(Array.isArray(n)?n[t]:n)}return e}function bn(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function Li(e,t){return typeof e=="function"?e.apply(void 0,t):e}function Bn(e,t){if(t===0)return e;var n;return function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function Ec(e){return e.split(/\s+/).filter(Boolean)}function ze(e){return[].concat(e)}function Fn(e,t){e.indexOf(t)===-1&&e.push(t)}function Oc(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function Dc(e){return e.split("-")[0]}function Pt(e){return[].slice.call(e)}function Nn(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function lt(){return document.createElement("div")}function qt(e){return["Element","Fragment"].some(function(t){return bn(e,t)})}function Ac(e){return bn(e,"NodeList")}function Lc(e){return bn(e,"MouseEvent")}function Mc(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function Pc(e){return qt(e)?[e]:Ac(e)?Pt(e):Array.isArray(e)?e:Pt(document.querySelectorAll(e))}function Qt(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function Hn(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function Ic(e){var t,n=ze(e),r=n[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function Rc(e,t){var n=t.clientX,r=t.clientY;return e.every(function(i){var a=i.popperRect,l=i.popperState,s=i.props,u=s.interactiveBorder,p=Dc(l.placement),f=l.modifiersData.offset;if(!f)return!0;var x=p==="bottom"?f.top.y:0,T=p==="top"?f.bottom.y:0,w=p==="right"?f.left.x:0,C=p==="left"?f.right.x:0,_=a.top-r+x>u,k=r-a.bottom-T>u,E=a.left-n+w>u,A=n-a.right-C>u;return _||k||E||A})}function zt(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){e[r](i,n)})}function Qn(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var de={isTouch:!1},zn=0;function qc(){de.isTouch||(de.isTouch=!0,window.performance&&document.addEventListener("mousemove",Mi))}function Mi(){var e=performance.now();e-zn<20&&(de.isTouch=!1,document.removeEventListener("mousemove",Mi)),zn=e}function Bc(){var e=document.activeElement;if(Mc(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function Fc(){document.addEventListener("touchstart",qc,Oe),window.addEventListener("blur",Bc)}var Nc=typeof window<"u"&&typeof document<"u",Hc=Nc?!!window.msCrypto:!1,Qc={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},zc={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ae=Object.assign({appendTo:Ai,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Qc,zc),Uc=Object.keys(ae),Vc=function(t){var n=Object.keys(t);n.forEach(function(r){ae[r]=t[r]})};function Pi(e){var t=e.plugins||[],n=t.reduce(function(r,i){var a=i.name,l=i.defaultValue;if(a){var s;r[a]=e[a]!==void 0?e[a]:(s=ae[a])!=null?s:l}return r},{});return Object.assign({},e,n)}function Wc(e,t){var n=t?Object.keys(Pi(Object.assign({},ae,{plugins:t}))):Uc,r=n.reduce(function(i,a){var l=(e.getAttribute("data-tippy-"+a)||"").trim();if(!l)return i;if(a==="content")i[a]=l;else try{i[a]=JSON.parse(l)}catch{i[a]=l}return i},{});return r}function Un(e,t){var n=Object.assign({},t,{content:Li(t.content,[e])},t.ignoreAttributes?{}:Wc(e,t.plugins));return n.aria=Object.assign({},ae.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var Kc=function(){return"innerHTML"};function sn(e,t){e[Kc()]=t}function Vn(e){var t=lt();return e===!0?t.className=Oi:(t.className=Di,qt(e)?t.appendChild(e):sn(t,e)),t}function Wn(e,t){qt(t.content)?(sn(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?sn(e,t.content):e.textContent=t.content)}function ln(e){var t=e.firstElementChild,n=Pt(t.children);return{box:t,content:n.find(function(r){return r.classList.contains(Ei)}),arrow:n.find(function(r){return r.classList.contains(Oi)||r.classList.contains(Di)}),backdrop:n.find(function(r){return r.classList.contains(jc)})}}function Ii(e){var t=lt(),n=lt();n.className=Sc,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=lt();r.className=Ei,r.setAttribute("data-state","hidden"),Wn(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props);function i(a,l){var s=ln(t),u=s.box,p=s.content,f=s.arrow;l.theme?u.setAttribute("data-theme",l.theme):u.removeAttribute("data-theme"),typeof l.animation=="string"?u.setAttribute("data-animation",l.animation):u.removeAttribute("data-animation"),l.inertia?u.setAttribute("data-inertia",""):u.removeAttribute("data-inertia"),u.style.maxWidth=typeof l.maxWidth=="number"?l.maxWidth+"px":l.maxWidth,l.role?u.setAttribute("role",l.role):u.removeAttribute("role"),(a.content!==l.content||a.allowHTML!==l.allowHTML)&&Wn(p,e.props),l.arrow?f?a.arrow!==l.arrow&&(u.removeChild(f),u.appendChild(Vn(l.arrow))):u.appendChild(Vn(l.arrow)):f&&u.removeChild(f)}return{popper:t,onUpdate:i}}Ii.$$tippy=!0;var Yc=1,jt=[],Ut=[];function Xc(e,t){var n=Un(e,Object.assign({},ae,Pi(Nn(t)))),r,i,a,l=!1,s=!1,u=!1,p=!1,f,x,T,w=[],C=Bn(mt,n.interactiveDebounce),_,k=Yc++,E=null,A=Oc(n.plugins),M={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},o={id:k,reference:e,popper:lt(),popperInstance:E,props:n,state:M,plugins:A,clearDelayTimeouts:wt,setProps:xt,setContent:_t,show:Ri,hide:qi,hideWithInteractivity:Bi,enable:tt,disable:bt,unmount:Fi,destroy:Ni};if(!n.render)return o;var j=n.render(o),g=j.popper,L=j.onUpdate;g.setAttribute("data-tippy-root",""),g.id="tippy-"+o.id,o.popper=g,e._tippy=o,g._tippy=o;var B=A.map(function(d){return d.fn(o)}),q=e.hasAttribute("aria-expanded");return Fe(),le(),Q(),N("onCreate",[o]),n.showOnCreate&&et(),g.addEventListener("mouseenter",function(){o.props.interactive&&o.state.isVisible&&o.clearDelayTimeouts()}),g.addEventListener("mouseleave",function(){o.props.interactive&&o.props.trigger.indexOf("mouseenter")>=0&&Y().addEventListener("mousemove",C)}),o;function I(){var d=o.props.touch;return Array.isArray(d)?d:[d,0]}function F(){return I()[0]==="hold"}function R(){var d;return!!((d=o.props.render)!=null&&d.$$tippy)}function P(){return _||e}function Y(){var d=P().parentNode;return d?Ic(d):document}function X(){return ln(g)}function H(d){return o.state.isMounted&&!o.state.isVisible||de.isTouch||f&&f.type==="focus"?0:Ht(o.props.delay,d?0:1,ae.delay)}function Q(d){d===void 0&&(d=!1),g.style.pointerEvents=o.props.interactive&&!d?"":"none",g.style.zIndex=""+o.props.zIndex}function N(d,v,b){if(b===void 0&&(b=!0),B.forEach(function(S){S[d]&&S[d].apply(S,v)}),b){var O;(O=o.props)[d].apply(O,v)}}function se(){var d=o.props.aria;if(d.content){var v="aria-"+d.content,b=g.id,O=ze(o.props.triggerTarget||e);O.forEach(function(S){var U=S.getAttribute(v);if(o.state.isVisible)S.setAttribute(v,U?U+" "+b:b);else{var G=U&&U.replace(b,"").trim();G?S.setAttribute(v,G):S.removeAttribute(v)}})}}function le(){if(!(q||!o.props.aria.expanded)){var d=ze(o.props.triggerTarget||e);d.forEach(function(v){o.props.interactive?v.setAttribute("aria-expanded",o.state.isVisible&&v===P()?"true":"false"):v.removeAttribute("aria-expanded")})}}function Te(){Y().removeEventListener("mousemove",C),jt=jt.filter(function(d){return d!==C})}function ce(d){if(!(de.isTouch&&(u||d.type==="mousedown"))){var v=d.composedPath&&d.composedPath()[0]||d.target;if(!(o.props.interactive&&Qn(g,v))){if(ze(o.props.triggerTarget||e).some(function(b){return Qn(b,v)})){if(de.isTouch||o.state.isVisible&&o.props.trigger.indexOf("click")>=0)return}else N("onClickOutside",[o,d]);o.props.hideOnClick===!0&&(o.clearDelayTimeouts(),o.hide(),s=!0,setTimeout(function(){s=!1}),o.state.isMounted||ve())}}}function Se(){u=!0}function me(){u=!1}function re(){var d=Y();d.addEventListener("mousedown",ce,!0),d.addEventListener("touchend",ce,Oe),d.addEventListener("touchstart",me,Oe),d.addEventListener("touchmove",Se,Oe)}function ve(){var d=Y();d.removeEventListener("mousedown",ce,!0),d.removeEventListener("touchend",ce,Oe),d.removeEventListener("touchstart",me,Oe),d.removeEventListener("touchmove",Se,Oe)}function qe(d,v){Be(d,function(){!o.state.isVisible&&g.parentNode&&g.parentNode.contains(g)&&v()})}function ge(d,v){Be(d,v)}function Be(d,v){var b=X().box;function O(S){S.target===b&&(zt(b,"remove",O),v())}if(d===0)return v();zt(b,"remove",x),zt(b,"add",O),x=O}function we(d,v,b){b===void 0&&(b=!1);var O=ze(o.props.triggerTarget||e);O.forEach(function(S){S.addEventListener(d,v,b),w.push({node:S,eventType:d,handler:v,options:b})})}function Fe(){F()&&(we("touchstart",Je,{passive:!0}),we("touchend",vt,{passive:!0})),Ec(o.props.trigger).forEach(function(d){if(d!=="manual")switch(we(d,Je),d){case"mouseenter":we("mouseleave",vt);break;case"focus":we(Hc?"focusout":"blur",Ge);break;case"focusin":we("focusout",Ge);break}})}function ht(){w.forEach(function(d){var v=d.node,b=d.eventType,O=d.handler,S=d.options;v.removeEventListener(b,O,S)}),w=[]}function Je(d){var v,b=!1;if(!(!o.state.isEnabled||Ze(d)||s)){var O=((v=f)==null?void 0:v.type)==="focus";f=d,_=d.currentTarget,le(),!o.state.isVisible&&Lc(d)&&jt.forEach(function(S){return S(d)}),d.type==="click"&&(o.props.trigger.indexOf("mouseenter")<0||l)&&o.props.hideOnClick!==!1&&o.state.isVisible?b=!0:et(d),d.type==="click"&&(l=!b),b&&!O&&je(d)}}function mt(d){var v=d.target,b=P().contains(v)||g.contains(v);if(!(d.type==="mousemove"&&b)){var O=xe().concat(g).map(function(S){var U,G=S._tippy,Ne=(U=G.popperInstance)==null?void 0:U.state;return Ne?{popperRect:S.getBoundingClientRect(),popperState:Ne,props:n}:null}).filter(Boolean);Rc(O,d)&&(Te(),je(d))}}function vt(d){var v=Ze(d)||o.props.trigger.indexOf("click")>=0&&l;if(!v){if(o.props.interactive){o.hideWithInteractivity(d);return}je(d)}}function Ge(d){o.props.trigger.indexOf("focusin")<0&&d.target!==P()||o.props.interactive&&d.relatedTarget&&g.contains(d.relatedTarget)||je(d)}function Ze(d){return de.isTouch?F()!==d.type.indexOf("touch")>=0:!1}function gt(){yt();var d=o.props,v=d.popperOptions,b=d.placement,O=d.offset,S=d.getReferenceClientRect,U=d.moveTransition,G=R()?ln(g).arrow:null,Ne=S?{getBoundingClientRect:S,contextElement:S.contextElement||P()}:e,wn={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function($t){var He=$t.state;if(R()){var Hi=X(),Ft=Hi.box;["placement","reference-hidden","escaped"].forEach(function(kt){kt==="placement"?Ft.setAttribute("data-placement",He.placement):He.attributes.popper["data-popper-"+kt]?Ft.setAttribute("data-"+kt,""):Ft.removeAttribute("data-"+kt)}),He.attributes.popper={}}}},Ee=[{name:"offset",options:{offset:O}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!U}},wn];R()&&G&&Ee.push({name:"arrow",options:{element:G,padding:3}}),Ee.push.apply(Ee,(v==null?void 0:v.modifiers)||[]),o.popperInstance=Tc(Ne,g,Object.assign({},v,{placement:b,onFirstUpdate:T,modifiers:Ee}))}function yt(){o.popperInstance&&(o.popperInstance.destroy(),o.popperInstance=null)}function ye(){var d=o.props.appendTo,v,b=P();o.props.interactive&&d===Ai||d==="parent"?v=b.parentNode:v=Li(d,[b]),v.contains(g)||v.appendChild(g),o.state.isMounted=!0,gt()}function xe(){return Pt(g.querySelectorAll("[data-tippy-root]"))}function et(d){o.clearDelayTimeouts(),d&&N("onTrigger",[o,d]),re();var v=H(!0),b=I(),O=b[0],S=b[1];de.isTouch&&O==="hold"&&S&&(v=S),v?r=setTimeout(function(){o.show()},v):o.show()}function je(d){if(o.clearDelayTimeouts(),N("onUntrigger",[o,d]),!o.state.isVisible){ve();return}if(!(o.props.trigger.indexOf("mouseenter")>=0&&o.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(d.type)>=0&&l)){var v=H(!1);v?i=setTimeout(function(){o.state.isVisible&&o.hide()},v):a=requestAnimationFrame(function(){o.hide()})}}function tt(){o.state.isEnabled=!0}function bt(){o.hide(),o.state.isEnabled=!1}function wt(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(a)}function xt(d){if(!o.state.isDestroyed){N("onBeforeUpdate",[o,d]),ht();var v=o.props,b=Un(e,Object.assign({},v,Nn(d),{ignoreAttributes:!0}));o.props=b,Fe(),v.interactiveDebounce!==b.interactiveDebounce&&(Te(),C=Bn(mt,b.interactiveDebounce)),v.triggerTarget&&!b.triggerTarget?ze(v.triggerTarget).forEach(function(O){O.removeAttribute("aria-expanded")}):b.triggerTarget&&e.removeAttribute("aria-expanded"),le(),Q(),L&&L(v,b),o.popperInstance&&(gt(),xe().forEach(function(O){requestAnimationFrame(O._tippy.popperInstance.forceUpdate)})),N("onAfterUpdate",[o,d])}}function _t(d){o.setProps({content:d})}function Ri(){var d=o.state.isVisible,v=o.state.isDestroyed,b=!o.state.isEnabled,O=de.isTouch&&!o.props.touch,S=Ht(o.props.duration,0,ae.duration);if(!(d||v||b||O)&&!P().hasAttribute("disabled")&&(N("onShow",[o],!1),o.props.onShow(o)!==!1)){if(o.state.isVisible=!0,R()&&(g.style.visibility="visible"),Q(),re(),o.state.isMounted||(g.style.transition="none"),R()){var U=X(),G=U.box,Ne=U.content;Qt([G,Ne],0)}T=function(){var Ee;if(!(!o.state.isVisible||p)){if(p=!0,g.offsetHeight,g.style.transition=o.props.moveTransition,R()&&o.props.animation){var Bt=X(),$t=Bt.box,He=Bt.content;Qt([$t,He],S),Hn([$t,He],"visible")}se(),le(),Fn(Ut,o),(Ee=o.popperInstance)==null||Ee.forceUpdate(),N("onMount",[o]),o.props.animation&&R()&&ge(S,function(){o.state.isShown=!0,N("onShown",[o])})}},ye()}}function qi(){var d=!o.state.isVisible,v=o.state.isDestroyed,b=!o.state.isEnabled,O=Ht(o.props.duration,1,ae.duration);if(!(d||v||b)&&(N("onHide",[o],!1),o.props.onHide(o)!==!1)){if(o.state.isVisible=!1,o.state.isShown=!1,p=!1,l=!1,R()&&(g.style.visibility="hidden"),Te(),ve(),Q(!0),R()){var S=X(),U=S.box,G=S.content;o.props.animation&&(Qt([U,G],O),Hn([U,G],"hidden"))}se(),le(),o.props.animation?R()&&qe(O,o.unmount):o.unmount()}}function Bi(d){Y().addEventListener("mousemove",C),Fn(jt,C),C(d)}function Fi(){o.state.isVisible&&o.hide(),o.state.isMounted&&(yt(),xe().forEach(function(d){d._tippy.unmount()}),g.parentNode&&g.parentNode.removeChild(g),Ut=Ut.filter(function(d){return d!==o}),o.state.isMounted=!1,N("onHidden",[o]))}function Ni(){o.state.isDestroyed||(o.clearDelayTimeouts(),o.unmount(),ht(),delete e._tippy,o.state.isDestroyed=!0,N("onDestroy",[o]))}}function Re(e,t){t===void 0&&(t={});var n=ae.plugins.concat(t.plugins||[]);Fc();var r=Object.assign({},t,{plugins:n}),i=Pc(e),a=i.reduce(function(l,s){var u=s&&Xc(s,r);return u&&l.push(u),l},[]);return qt(e)?a[0]:a}Re.defaultProps=ae;Re.setDefaultProps=Vc;Re.currentInput=de;Object.assign({},xi,{effect:function(t){var n=t.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});Re.setDefaultProps({render:Ii});const Vt=Array(),Jc=()=>{document.querySelectorAll('[data-toggle="tooltip-ajax"]').forEach(t=>{Re(t,{theme:"kanka",placement:t.dataset.direction??"bottom",allowHTML:!0,content:'<i class="fa-solid fa-spin fa-spinner" aria-hidden="true" aria-label="loading..." />',arrow:!0,onShow(n){let r=t.dataset.id;if(r&&r in Vt)return Vt[r];fetch(t.dataset.url).then(i=>i.json()).then(i=>{n.setContent(i[0]),Vt[r]=i[0]}).catch(i=>{n.setContent(`Failed loading tooltip. ${i}`)})}})})},Gc=()=>{document.querySelectorAll('[data-toggle="tooltip"]').forEach(t=>{Re(t,{content:t.dataset.title??t.title,theme:"kanka",placement:t.dataset.direction??"bottom",allowHTML:t.dataset.html??!1,arrow:!0})})},Zc=()=>{document.querySelectorAll("[data-dropdown]").forEach(t=>{let n=t.parentNode.getElementsByClassName("dropdown-menu")[0];Re(t,{content:'<ul class="dropdown-elements flex flex-col m-0 p-0 shadow-sm">'+n.innerHTML+"</ul>",theme:"kanka-dropdown",placement:t.dataset.direction??"bottom",allowHTML:!0,arrow:!0,interactive:!0,trigger:"click"})})};Gc();Jc();Zc();$(document).ready(function(){Kn(),$(document).on("shown.bs.modal shown.bs.popover",function(){Kn()})});function Kn(){let e=$(".ajax-subform");e.length!==0&&(e.off("submit"),e.on("submit",function(t){if($(this).attr("is-valid"))return!0;window.entityFormHasUnsavedChanges=!1,t.preventDefault(),tu($(this));let r=new FormData(this);$.ajax({url:$(this).attr("action"),method:$(this).attr("method"),data:r,cache:!1,contentType:!1,processData:!1,context:this}).done(function(){$(this).attr("is-valid",!0),$(this).off("submit"),$(this).submit()}).fail(function(i){eu($(this),i)})}))}const eu=(e,t)=>{if(e.find(".input-error").removeClass("input-error"),e.find(".text-error").remove(),t.status===503){window.showToast(t.responseJSON.message,"toast-error"),Wt(e);return}t.status===403&&($("#entity-form-403-error").show(),Wt(e));let n=t.responseJSON.errors,r=Object.keys(n),i=!0;r.forEach(function(s){$('[name="'+s+'"]').length>0?e.find('[name="'+s+'"]').addClass("input-error").parent().append('<div class="text-error">'+n[s][0]+"</div>"):i=!1});let a=Object.keys(n)[0],l=e.find('[name="'+a+'"]');l.length>0&&l.focus(),i||r.forEach(function(s){window.showToast(n[s][0],"toast-error")}),Wt(e)},tu=e=>{e.find(".submit-group").find(".btn2").addClass("btn-disabled"),e.find(".submit-group").find(".btn2:first").addClass("loading")},Wt=e=>{e.find(".submit-group").find(".btn2").removeClass("btn-disabled"),e.find(".submit-group").find(".btn2:first").removeClass("loading")};$(document).ready(function(){au(),window.initForeignSelect(),Yn(),ru();let e=$("#delete-confirm-form");e.length>0&&e.on("keyup keypress",function(t){var n=t.keyCode||t.which;if(n===13)return t.preventDefault(),!1}),nu(),iu(),xn(),Qi(),cn(),Jn(),Xn(),Gn(),window.initDialogs(),$(document).on("shown.bs.modal shown.bs.popover",function(){window.initForeignSelect(),window.initTags(),cn(),Yn(),Jn(),Xn(),xn(),Gn(),window.initDialogs()})});function Yn(){$.isFunction($.fn.spectrum)&&$.each($(".spectrum"),function(){$(this).spectrum({preferredFormat:"hex",showInput:!0,showPalette:!0,allowEmpty:!0,appendTo:$(this).data("append-to")??null})})}function nu(){let e=$(".list-treeview");if(e.length===0)return;let t=e.data("url");$.each($(".table-nested > tbody > tr"),function(){let n=$(this).data("children");parseInt(n)>0&&($(this).addClass("tr-hover cursor-pointer"),$(this).on("click",function(r){let i=$(r.target);r.target.type!=="checkbox"&&i.data("tree")!=="escape"&&(window.location=t+"?parent_id="+$(this).data("id")+"&m=table")}))})}function iu(){let e=$(".nav-tabs li a");e.click(function(n){n.preventDefault(),$(this).data("url")||$(this).tab("show")}),e.on("shown.bs.tab",function(n){n.preventDefault();let r=$(n.target).attr("href").substr(1),i=$(n.target).attr("ajax-modal"),a=$(n.target).data("nohash");if(i&&i==="ajax-modal"||a)return!0;window.location.hash="tab_"+r});let t=window.location.hash.replace("tab_","");$('ul.nav-tabs > li > a[href="'+t+'"]').tab("show")}function Xn(){$.each($(".img-delete"),function(){$(this).unbind("click").click(function(e){e.preventDefault(),$("input[name="+$(this).data("target")+"]")[0].value=1,$(this).parent().parent().hide()})})}function cn(){$(".pagination-ajax-links a").on("click",function(e){e.preventDefault();let t=$(".pagination-ajax-body");return t.find(".modal-loading").show(),t.find(".pagination-ajax-content").hide(),$.ajax({url:$(this).attr("href"),context:this}).done(function(n){t.parent().html(n),cn()}),!1})}function Jn(){$('[data-toggle="confirm-delete"]').on("click",function(e){if(e.preventDefault(),$(this).data("confirming")===1){$(this).addClass("loading"),$(this).html("");let t=$(this).data("target");$(t).submit();return}$(this).data("confirming",1),$(this).find("span").html($(this).data("confirm"))}),$('a[data-toggle="delete-form"]').unbind("click").click(function(e){e.preventDefault();let t=$(this).data("target");$(t).submit()})}function ru(){$(".submenu-switcher").change(function(e){e.preventDefault();let t=$(this).find(":selected");window.location.href=t.data("route")})}function au(){let e=0;const t={window:$(window).height(),header:$("header").length>0?$("header").outerHeight():0,footer:$(".main-footer").length>0?$(".main-footer").outerHeight():0,sidebar:$(".main-sidebar .sidebar").length>0?$(".main-sidebar .sidebar").height():0,controlSidebar:e};let n=ou(t),r=$(".content-wrapper");n===t.controlSidebar?r.css("min-height",n):n===t.window?r.css("min-height",n-t.header-t.footer):r.css("min-height",n-t.header)}function ou(e){let t=0;return Object.keys(e).forEach(n=>{e[n]>t&&(t=e[n])}),t}const Gn=()=>{document.querySelectorAll(".btn-feedback").forEach(e=>{e.dataset.feedback||(e.dataset.feedback=1,e.addEventListener("click",n=>{n.target.classList.add("loading")},!1))}),$("#quick-privacy-select").change(function(){let e=$(this).data("url");$.ajax({url:e,type:"POST"}).done(function(t){window.showToast(t.toast),t.status?$("body").removeClass("kanka-entity-private"):$("body").addClass("kanka-entity-private")})})};
