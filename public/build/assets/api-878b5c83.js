import{_ as C,c as n,a as e,b as c,F as u,r as h,w as v,h as p,v as b,i as g,d as y,o as a,t as d,p as w,m as M,l as F}from"./_plugin-vue_export-helper-de6cf830.js";const T={data(){return{clients:[],createForm:{errors:[],name:"",redirect:""},editForm:{errors:[],name:"",redirect:""}}},ready(){this.prepareComponent()},mounted(){this.prepareComponent()},methods:{prepareComponent(){this.getClients()},getClients(){axios.get("/oauth/clients").then(o=>{this.clients=o.data})},showCreateClientForm(){this.openModal("createModal"),this.$refs.createName.focus()},store(){this.persistClient("post","/oauth/clients",this.createForm,"createModal")},edit(o){this.editForm.id=o.id,this.editForm.name=o.name,this.editForm.redirect=o.redirect,this.openModal("editModal"),this.$refs.editName.focus()},update(){this.persistClient("put","/oauth/clients/"+this.editForm.id,this.editForm,"editModal")},persistClient(o,t,i,m){i.errors=[],axios[o](t,i).then(r=>{this.getClients(),i.name="",i.redirect="",i.errors=[],this.closeModal(m)}).catch(r=>{typeof r.response.data=="object"?i.errors=_.flatten(_.toArray(r.response.data.errors)):i.errors=["Something went wrong. Please try again."]})},destroy(o){axios.delete("/oauth/clients/"+o.id).then(t=>{this.getClients()})},openModal(o){this.$refs[o].showModal(),this.$refs[o].addEventListener("click",function(t){let i=this.getBoundingClientRect();!(i.top<=t.clientY&&t.clientY<=i.top+i.height&&i.left<=t.clientX&&t.clientX<=i.left+i.width)&&t.target.tagName==="DIALOG"&&this.close()})},closeModal(o){this.$refs[o].close()}}},S={class:"card card-default"},A={class:"card-header"},N={style:{display:"flex","justify-content":"space-between","align-items":"center"}},$=e("span",null," OAuth Clients ",-1),I={class:"card-body"},D={key:0,class:"mb-0"},j={key:1,class:"table table-borderless mb-0"},L=e("thead",null,[e("tr",null,[e("th",null,"Client ID"),e("th",null,"Name"),e("th",null,"Secret"),e("th"),e("th")])],-1),R={style:{"vertical-align":"middle"}},U={style:{"vertical-align":"middle"}},Y={style:{"vertical-align":"middle"}},z={style:{"vertical-align":"middle"}},V=["onClick"],P={style:{"vertical-align":"middle"}},B=["onClick"],K={class:"dialog rounded-2xl text-center",id:"modal-create-client",ref:"createModal","aria-modal":"true","aria-labelledby":"modal-create-client-label"},O=e("h4",{id:"modal-create-client-label"}," Create Client ",-1),q=e("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),E=e("span",{class:"sr-only"},"Close",-1),X=[q,E],W={class:"text-justify"},G={key:0,class:"rounded p-4 bg-red-100 text-red-800 w-full"},H=e("p",{class:"mb-0"},[e("strong",null,"Whoops!"),y(" Something went wrong!")],-1),J=e("br",null,null,-1),Q={class:"mb-5"},Z=e("label",{class:"font-extrabold required"},"Client name",-1),ee=e("span",{class:"text-sm text-muted"}," Something your users will recognize and trust. ",-1),te={class:"mb-5"},se=e("label",{class:"font-extrabold required"},"Redirect URL",-1),oe=e("span",{class:"text-sm text-muted"}," Your application's authorization callback URL. ",-1),le={class:"grid grid-cols-2 gap-2 w-full"},re={class:"dialog rounded-2xl text-center",id:"modal-edit-client",ref:"editModal","aria-modal":"true","aria-labelledby":"modal-edit-client-label"},ne=e("h4",{id:"modal-edit-client-label"}," Create Client ",-1),ae=e("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),ie=e("span",{class:"sr-only"},"Close",-1),de=[ae,ie],ce={class:"text-justify"},ue={key:0,class:"alert alert-danger"},he=e("p",{class:"mb-0"},[e("strong",null,"Whoops!"),y(" Something went wrong!")],-1),me=e("br",null,null,-1),pe={role:"form"},_e={class:"form-group row"},be=e("label",{class:"col-md-3 col-form-label"},"Name",-1),fe={class:"col-md-9"},ge=e("span",{class:"form-text text-muted"}," Something your users will recognize and trust. ",-1),ye={class:"form-group row"},ke=e("label",{class:"col-md-3 col-form-label"},"Redirect URL",-1),ve={class:"col-md-9"},Ce=e("span",{class:"form-text text-muted"}," Your application's authorization callback URL. ",-1),xe={class:"grid grid-cols-2 gap-2 w-full"};function we(o,t,i,m,r,l){return a(),n("div",null,[e("div",S,[e("div",A,[e("div",N,[$,e("a",{class:"cursor-pointer",tabindex:"-1",onClick:t[0]||(t[0]=(...s)=>l.showCreateClientForm&&l.showCreateClientForm(...s))}," Create New Client ")])]),e("div",I,[r.clients.length===0?(a(),n("p",D," You have not created any OAuth clients. ")):c("",!0),r.clients.length>0?(a(),n("table",j,[L,e("tbody",null,[(a(!0),n(u,null,h(r.clients,s=>(a(),n("tr",null,[e("td",R,d(s.id),1),e("td",U,d(s.name),1),e("td",Y,[e("code",null,d(s.secret),1)]),e("td",z,[e("a",{class:"cursor-pointer",tabindex:"-1",onClick:f=>l.edit(s)}," Edit ",8,V)]),e("td",P,[e("a",{class:"cursor-pointer text-danger",onClick:f=>l.destroy(s)}," Delete ",8,B)])]))),256))])])):c("",!0)])]),e("dialog",K,[e("header",null,[O,e("button",{type:"button",class:"rounded-full",onClick:t[1]||(t[1]=s=>l.closeModal("createModal")),title:"Close"},X)]),e("article",W,[r.createForm.errors.length>0?(a(),n("div",G,[H,J,e("ul",null,[(a(!0),n(u,null,h(r.createForm.errors,s=>(a(),n("li",null,d(s),1))),256))])])):c("",!0),e("form",{role:"form",class:"w-full",onSubmit:t[6]||(t[6]=v((...s)=>l.store&&l.store(...s),["prevent"]))},[e("div",Q,[Z,p(e("input",{id:"create-client-name",type:"text",class:"rounded border w-full p-2",name:"name",placeholder:"Name the token","onUpdate:modelValue":t[2]||(t[2]=s=>r.createForm.name=s),onKeyup:t[3]||(t[3]=g((...s)=>l.store&&l.store(...s),["enter"])),ref:"createName"},null,544),[[b,r.createForm.name]]),ee]),e("div",te,[se,p(e("input",{type:"text",class:"rounded border w-full p-2",name:"redirect",onKeyup:t[4]||(t[4]=g((...s)=>l.store&&l.store(...s),["enter"])),"onUpdate:modelValue":t[5]||(t[5]=s=>r.createForm.redirect=s)},null,544),[[b,r.createForm.redirect]]),oe])],32),e("form",{role:"form",class:"w-full mb-5",onSubmit:t[7]||(t[7]=v((...s)=>l.store&&l.store(...s),["prevent"]))},null,32),e("div",le,[e("button",{type:"button",class:"w-full rounded px-6 py-2.5 uppercase font-extrabold hover:bg-gray-200 hover:shadow-sm",onClick:t[8]||(t[8]=s=>l.closeModal("createModal"))},"Close"),e("button",{type:"button",class:"w-full rounded px-6 py-2.5 uppercase border border-blue-500 bg-white text-blue-500 font-extrabold hover:bg-blue-500 hover:text-white hover:shadow-sm",onClick:t[9]||(t[9]=(...s)=>l.store&&l.store(...s))}," Create ")])])],512),e("dialog",re,[e("header",null,[ne,e("button",{type:"button",class:"rounded-full",onClick:t[10]||(t[10]=s=>l.closeModal("editModal")),title:"Close"},de)]),e("article",ce,[r.editForm.errors.length>0?(a(),n("div",ue,[he,me,e("ul",null,[(a(!0),n(u,null,h(r.editForm.errors,s=>(a(),n("li",null,d(s),1))),256))])])):c("",!0),e("form",pe,[e("div",_e,[be,e("div",fe,[p(e("input",{id:"edit-client-name",type:"text",class:"form-control",onKeyup:t[11]||(t[11]=g((...s)=>l.update&&l.update(...s),["enter"])),"onUpdate:modelValue":t[12]||(t[12]=s=>r.editForm.name=s),ref:"editName"},null,544),[[b,r.editForm.name]]),ge])]),e("div",ye,[ke,e("div",ve,[p(e("input",{type:"text",class:"form-control",name:"redirect",onKeyup:t[13]||(t[13]=g((...s)=>l.update&&l.update(...s),["enter"])),"onUpdate:modelValue":t[14]||(t[14]=s=>r.editForm.redirect=s)},null,544),[[b,r.editForm.redirect]]),Ce])])]),e("div",xe,[e("button",{type:"button",class:"w-full rounded px-6 py-2.5 uppercase font-extrabold hover:bg-gray-200 hover:shadow-sm",onClick:t[15]||(t[15]=s=>l.closeModal("createModal"))},"Close"),e("button",{type:"button",class:"w-full rounded px-6 py-2.5 uppercase border border-blue-500 bg-white text-blue-500 font-extrabold hover:bg-blue-500 hover:text-white hover:shadow-sm",onClick:t[16]||(t[16]=(...s)=>l.update&&l.update(...s))}," Create ")])])],512)])}const Me=C(T,[["render",we]]);const Fe={data(){return{tokens:[]}},ready(){this.prepareComponent()},mounted(){this.prepareComponent()},methods:{prepareComponent(){this.getTokens()},getTokens(){axios.get("/oauth/tokens").then(o=>{this.tokens=o.data})},revoke(o){axios.delete("/oauth/tokens/"+o.id).then(t=>{this.getTokens()})}}},x=o=>(w("data-v-43f0ecd3"),o=o(),M(),o),Te={key:0},Se={class:"card card-default"},Ae=x(()=>e("div",{class:"card-header"},"Authorized Applications",-1)),Ne={class:"card-body"},$e={class:"table table-borderless mb-0"},Ie=x(()=>e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Scopes"),e("th")])],-1)),De={style:{"vertical-align":"middle"}},je={style:{"vertical-align":"middle"}},Le={key:0},Re={style:{"vertical-align":"middle"}},Ue=["onClick"];function Ye(o,t,i,m,r,l){return a(),n("div",null,[r.tokens.length>0?(a(),n("div",Te,[e("div",Se,[Ae,e("div",Ne,[e("table",$e,[Ie,e("tbody",null,[(a(!0),n(u,null,h(r.tokens,s=>(a(),n("tr",null,[e("td",De,d(s.client.name),1),e("td",je,[s.scopes.length>0?(a(),n("span",Le,d(s.scopes.join(", ")),1)):c("",!0)]),e("td",Re,[e("a",{class:"action-link text-danger",onClick:f=>l.revoke(s)}," Revoke ",8,Ue)])]))),256))])])])])])):c("",!0)])}const ze=C(Fe,[["render",Ye],["__scopeId","data-v-43f0ecd3"]]),Ve={data(){return{accessToken:null,tokens:[],scopes:[],form:{name:"",scopes:[],errors:[]}}},ready(){this.prepareComponent()},mounted(){this.prepareComponent()},methods:{prepareComponent(){this.getTokens(),this.getScopes()},getTokens(){axios.get("/oauth/personal-access-tokens").then(o=>{this.tokens=o.data})},getScopes(){axios.get("/oauth/scopes").then(o=>{this.scopes=o.data})},showCreateTokenForm(){this.openModal("createModal"),this.$refs.createName.focus()},store(){this.accessToken=null,this.form.errors=[],axios.post("/oauth/personal-access-tokens",this.form).then(o=>{this.form.name="",this.form.scopes=[],this.form.errors=[],this.tokens.push(o.data.token),this.showAccessToken(o.data.accessToken)}).catch(o=>{typeof o.response.data=="object"?this.form.errors=_.flatten(_.toArray(o.response.data.errors)):this.form.errors=["Something went wrong. Please try again."]})},toggleScope(o){this.scopeIsAssigned(o)?this.form.scopes=_.reject(this.form.scopes,t=>t==o):this.form.scopes.push(o)},scopeIsAssigned(o){return _.indexOf(this.form.scopes,o)>=0},showAccessToken(o){this.closeModal("createModal"),this.accessToken=o,this.openModal("accessModal")},revoke(o){axios.delete("/oauth/personal-access-tokens/"+o.id).then(t=>{this.getTokens()})},openModal(o){this.$refs[o].showModal(),this.$refs[o].addEventListener("click",function(t){let i=this.getBoundingClientRect();!(i.top<=t.clientY&&t.clientY<=i.top+i.height&&i.left<=t.clientX&&t.clientX<=i.left+i.width)&&t.target.tagName==="DIALOG"&&this.close()})},closeModal(o){this.$refs[o].close()}}},Pe={class:"card card-default"},Be={class:"card-header"},Ke={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Oe=e("span",null," Personal Access Tokens ",-1),qe={class:"card-body"},Ee={key:0,class:"mb-0"},Xe={key:1,class:"table table-borderless mb-0"},We=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th")])],-1),Ge={style:{"vertical-align":"middle"}},He={style:{"vertical-align":"middle"}},Je=["onClick"],Qe={class:"dialog rounded-2xl text-center",id:"modal-create-token",ref:"createModal","aria-modal":"true","aria-labelledby":"modal-create-token-label"},Ze=e("h4",{id:"modal-create-token-label"}," Create Token ",-1),et=e("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),tt=e("span",{class:"sr-only"},"Close",-1),st=[et,tt],ot={class:"text-justify"},lt={key:0,class:"rounded p-4 bg-red-100 text-red-800 w-full"},rt=e("p",{class:"mb-0"},[e("strong",null,"Whoops!"),y(" Something went wrong!")],-1),nt=e("br",null,null,-1),at=e("label",{class:"font-extrabold required"},"Token name",-1),it={key:0,class:"form-group row"},dt=e("label",{class:"col-md-4 col-form-label"},"Scopes",-1),ct={class:"col-md-6"},ut={class:"checkbox"},ht=["onClick","checked"],mt={class:"grid grid-cols-2 gap-2 w-full"},pt={class:"dialog rounded-2xl text-center",id:"modal-access-token",ref:"accessModal","aria-modal":"true","aria-labelledby":"modal-access-token-label"},_t=e("h4",{id:"modal-access-token-label"}," Personal Access Token ",-1),bt=e("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),ft=e("span",{class:"sr-only"},"Close",-1),gt=[bt,ft],yt={class:"text-justify"},kt=e("p",{class:"mb-2"}," Here is your new personal access token. This is the only time it will be shown so don't lose it! You may now use this token to make API requests. ",-1),vt={class:"form-control",rows:"10"};function Ct(o,t,i,m,r,l){return a(),n("div",null,[e("div",null,[e("div",Pe,[e("div",Be,[e("div",Ke,[Oe,e("a",{class:"cursor-pointer",tabindex:"-1",onClick:t[0]||(t[0]=(...s)=>l.showCreateTokenForm&&l.showCreateTokenForm(...s))}," Create New Token ")])]),e("div",qe,[r.tokens.length===0?(a(),n("p",Ee," You have not created any personal access tokens. ")):c("",!0),r.tokens.length>0?(a(),n("table",Xe,[We,e("tbody",null,[(a(!0),n(u,null,h(r.tokens,s=>(a(),n("tr",null,[e("td",Ge,d(s.name),1),e("td",He,[e("a",{class:"cursor-pointer text-danger",onClick:f=>l.revoke(s)}," Delete ",8,Je)])]))),256))])])):c("",!0)])])]),e("dialog",Qe,[e("header",null,[Ze,e("button",{type:"button",class:"rounded-full",onClick:t[1]||(t[1]=s=>l.closeModal("createModal")),title:"Close"},st)]),e("article",ot,[r.form.errors.length>0?(a(),n("div",lt,[rt,nt,e("ul",null,[(a(!0),n(u,null,h(r.form.errors,s=>(a(),n("li",null,d(s),1))),256))])])):c("",!0),e("form",{role:"form",class:"w-full mb-5",onSubmit:t[3]||(t[3]=v((...s)=>l.store&&l.store(...s),["prevent"]))},[at,p(e("input",{id:"create-token-name",type:"text",class:"rounded border w-full p-2",name:"name",placeholder:"Name the token","onUpdate:modelValue":t[2]||(t[2]=s=>r.form.name=s),ref:"createName"},null,512),[[b,r.form.name]]),r.scopes.length>0?(a(),n("div",it,[dt,e("div",ct,[(a(!0),n(u,null,h(r.scopes,s=>(a(),n("div",null,[e("div",ut,[e("label",null,[e("input",{type:"checkbox",onClick:f=>l.toggleScope(s.id),checked:l.scopeIsAssigned(s.id)},null,8,ht),y(" "+d(s.id),1)])])]))),256))])])):c("",!0)],32),e("div",mt,[e("button",{type:"button",class:"w-full rounded px-6 py-2.5 uppercase font-extrabold hover:bg-gray-200 hover:shadow-sm",onClick:t[4]||(t[4]=s=>l.closeModal("createModal"))},"Close"),e("button",{type:"button",class:"w-full rounded px-6 py-2.5 uppercase border border-blue-500 bg-white text-blue-500 font-extrabold hover:bg-blue-500 hover:text-white hover:shadow-sm",onClick:t[5]||(t[5]=(...s)=>l.store&&l.store(...s))}," Create ")])])],512),e("dialog",pt,[e("header",null,[_t,e("button",{type:"button",class:"rounded-full",onClick:t[6]||(t[6]=s=>l.closeModal("accessModal")),title:"Close"},gt)]),e("article",yt,[kt,e("textarea",vt,d(r.accessToken),1),e("button",{type:"button",class:"w-full rounded px-6 py-2.5 hover:bg-gray-200 font-extrabold uppercase",onClick:t[7]||(t[7]=s=>l.closeModal("accessModal"))},"Close")])],512)])}const xt=C(Ve,[["render",Ct]]),k=F({});k.component("passport-clients",Me);k.component("passport-authorized-clients",ze);k.component("passport-personal-access-tokens",xt);k.mount("#api");
